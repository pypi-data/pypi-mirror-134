!function(){var t={689:function(t,e,n){var i=n(7537),s=n(3645)(i);s.push([t.id,".clear-btn[data-v-85cf002e],.search-btn[data-v-85cf002e]{background-color:#1a252f !important;transition:none}.custom-input[data-v-85cf002e]{background-color:#1a252f;border:none;box-shadow:none;cursor:pointer;-webkit-appearance:none}.dropdown.show .custom-input[data-v-85cf002e],.dropdown.show .clear-btn[data-v-85cf002e],.dropdown.show .search-btn[data-v-85cf002e]{background-color:#fff !important}.dropdown-item[data-v-85cf002e]{white-space:normal;word-break:break-all}.font-sm[data-v-85cf002e]{font-size:90%}.input-group-append-content[data-v-85cf002e]{background-color:#fff;border:none;color:#aab7b8;padding-left:.75rem !important;padding-right:.75rem !important}.responsive-width[data-v-85cf002e]{width:200px}@media(min-width: 1200px){.responsive-width[data-v-85cf002e]{width:300px}}","",{version:3,sources:["webpack://./kadi/assets/scripts/lib/components/base/QuickSearch.vue"],names:[],mappings:"AAuDA,yDACE,mCAAA,CACA,eAAA,CAGF,+BACE,wBAAA,CACA,WAAA,CACA,eAAA,CACA,cAAA,CACA,uBAAA,CAIA,qIACE,gCAAA,CAIJ,gCACE,kBAAA,CACA,oBAAA,CAGF,0BACE,aAAA,CAGF,6CACE,qBAAA,CACA,WAAA,CACA,aAAA,CACA,8BAAA,CACA,+BAAA,CAGF,mCACE,WAAA,CAEA,0BAHF,mCAII,WAAA,CAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.clear-btn, .search-btn {\n  background-color: #1a252f !important;\n  transition: none;\n}\n\n.custom-input {\n  background-color: #1a252f;\n  border: none;\n  box-shadow: none;\n  cursor: pointer;\n  -webkit-appearance: none;\n}\n\n.dropdown.show {\n  .custom-input, .clear-btn, .search-btn {\n    background-color: white !important;\n  }\n}\n\n.dropdown-item {\n  white-space: normal;\n  word-break: break-all;\n}\n\n.font-sm {\n  font-size: 90%;\n}\n\n.input-group-append-content {\n  background-color: white;\n  border: none;\n  color: #aab7b8;\n  padding-left: 0.75rem !important;\n  padding-right: 0.75rem !important;\n}\n\n.responsive-width {\n  width: 200px;\n\n  @media (min-width: 1200px) {\n    width: 300px;\n  }\n}\n"],sourceRoot:""}]),t.exports=s},3645:function(t){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,s,o){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(i)for(var r=0;r<this.length;r++){var c=this[r][0];null!=c&&(a[c]=!0)}for(var d=0;d<t.length;d++){var l=[].concat(t[d]);i&&a[l[0]]||(void 0!==o&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=o),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),s&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=s):l[4]="".concat(s)),e.push(l))}},e}},7537:function(t){"use strict";t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var i=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),o="/*# ".concat(s," */"),a=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[e].concat(a).concat([o]).join("\n")}return[e].join("\n")}},3876:function(t,e,n){t.exports=n(6253)},9661:function(t){var e,n;e=-1,n={onVisible:function(t){var e=n.isSupported();if(!e||!n.hidden())return t(),e;var i=n.change((function(e,s){n.hidden()||(n.unbind(i),t())}));return i},change:function(t){if(!n.isSupported())return!1;var i=e+=1;return n._callbacks[i]=t,n._listen(),i},unbind:function(t){delete n._callbacks[t]},afterPrerendering:function(t){var e=n.isSupported(),i="prerender";if(!e||i!=n.state())return t(),e;var s=n.change((function(e,o){i!=o&&(n.unbind(s),t())}));return s},hidden:function(){return!(!n._doc.hidden&&!n._doc.webkitHidden)},state:function(){return n._doc.visibilityState||n._doc.webkitVisibilityState||"visible"},isSupported:function(){return void 0!==n._doc.hidden||void 0!==n._doc.webkitHidden},_doc:document||{},_callbacks:{},_change:function(t){var e=n.state();for(var i in n._callbacks)n._callbacks[i].call(n._doc,t,e)},_listen:function(){if(!n._init){var t="visibilitychange";n._doc.webkitVisibilityState&&(t="webkit"+t);var e=function(){n._change.apply(n,arguments)};n._doc.addEventListener?n._doc.addEventListener(t,e):n._doc.attachEvent(t,e),n._init=!0}}},t.exports?t.exports=n:this.Visibility=n},6253:function(t,e,n){!function(e){var i=-1,s=function(t){return t.every=function(e,n,s){t._time(),s||(s=n,n=null);var o=i+=1;return t._timers[o]={visible:e,hidden:n,callback:s},t._run(o,!1),t.isSupported()&&t._listen(),o},t.stop=function(e){return!!t._timers[e]&&(t._stop(e),delete t._timers[e],!0)},t._timers={},t._time=function(){t._timed||(t._timed=!0,t._wasHidden=t.hidden(),t.change((function(){t._stopRun(),t._wasHidden=t.hidden()})))},t._run=function(n,i){var s,o=t._timers[n];if(t.hidden()){if(null===o.hidden)return;s=o.hidden}else s=o.visible;var a=function(){o.last=new Date,o.callback.call(e)};if(i){var r=new Date-o.last;s>r?o.delay=setTimeout((function(){o.id=setInterval(a,s),a()}),s-r):(o.id=setInterval(a,s),a())}else o.id=setInterval(a,s)},t._stop=function(e){var n=t._timers[e];clearInterval(n.id),clearTimeout(n.delay),delete n.id,delete n.delay},t._stopRun=function(e){var n=t.hidden(),i=t._wasHidden;if(n&&!i||!n&&i)for(var s in t._timers)t._stop(s),t._run(s,!n)},t};t.exports?t.exports=s(n(9661)):s(e.Visibility||n(9661))}(window)},7822:function(t,e,n){var i=n(689);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals),(0,n(5346).Z)("02cbc9a1",i,!1,{})},5346:function(t,e,n){"use strict";function i(t,e){for(var n=[],i={},s=0;s<e.length;s++){var o=e[s],a=o[0],r={id:t+":"+s,css:o[1],media:o[2],sourceMap:o[3]};i[a]?i[a].parts.push(r):n.push(i[a]={id:a,parts:[r]})}return n}n.d(e,{Z:function(){return h}});var s="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!s)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},a=s&&(document.head||document.getElementsByTagName("head")[0]),r=null,c=0,d=!1,l=function(){},u=null,p="data-vue-ssr-id",f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(t,e,n,s){d=n,u=s||{};var a=i(t,e);return m(a),function(e){for(var n=[],s=0;s<a.length;s++){var r=a[s];(c=o[r.id]).refs--,n.push(c)}for(e?m(a=i(t,e)):a=[],s=0;s<n.length;s++){var c;if(0===(c=n[s]).refs){for(var d=0;d<c.parts.length;d++)c.parts[d]();delete o[c.id]}}}}function m(t){for(var e=0;e<t.length;e++){var n=t[e],i=o[n.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](n.parts[s]);for(;s<n.parts.length;s++)i.parts.push(g(n.parts[s]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{var a=[];for(s=0;s<n.parts.length;s++)a.push(g(n.parts[s]));o[n.id]={id:n.id,refs:1,parts:a}}}}function v(){var t=document.createElement("style");return t.type="text/css",a.appendChild(t),t}function g(t){var e,n,i=document.querySelector("style["+p+'~="'+t.id+'"]');if(i){if(d)return l;i.parentNode.removeChild(i)}if(f){var s=c++;i=r||(r=v()),e=b.bind(null,i,s,!1),n=b.bind(null,i,s,!0)}else i=v(),e=A.bind(null,i),n=function(){i.parentNode.removeChild(i)};return e(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap)return;e(t=i)}else n()}}var _,w=(_=[],function(t,e){return _[t]=e,_.filter(Boolean).join("\n")});function b(t,e,n,i){var s=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=w(e,s);else{var o=document.createTextNode(s),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function A(t,e){var n=e.css,i=e.media,s=e.sourceMap;if(i&&t.setAttribute("media",i),u.ssrId&&t.setAttribute(p,e.id),s&&(n+="\n/*# sourceURL="+s.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var o=e[i]={id:i,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";var t=n(3876),e=n.n(t),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showBroadcastMsg?n("div",{staticClass:"card"},[n("div",{staticClass:"card-body pb-1"},[n("button",{staticClass:"close text-black",attrs:{type:"button"},on:{click:t.dismissBroadcast}},[n("i",{staticClass:"fas fa-xs fa-times"})]),t._v(" "),n("markdown-preview",{attrs:{input:t.message}})],1)]):t._e()};function s(t,e,n,i,s,o,a,r){var c,d="function"==typeof t?t.options:t;if(e&&(d.render=e,d.staticRenderFns=n,d._compiled=!0),i&&(d.functional=!0),o&&(d._scopeId="data-v-"+o),a?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},d._ssrRegister=c):s&&(c=r?function(){s.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:s),c)if(d.functional){d._injectStyles=c;var l=d.render;d.render=function(t,e){return c.call(e),l(t,e)}}else{var u=d.beforeCreate;d.beforeCreate=u?[].concat(u,c):[c]}return{exports:t,options:d}}i._withStripped=!0;var o=s({data:()=>({storageKey:"hide_broadcast_msg",showBroadcastMsg:!1}),props:{message:String,hash:String},methods:{dismissBroadcast(){window.localStorage.setItem(this.storageKey,this.hash),this.showBroadcastMsg=!1}},mounted(){""===this.message?window.localStorage.removeItem(this.storageKey):window.localStorage.getItem(this.storageKey)!==this.hash&&(window.localStorage.removeItem(this.storageKey),this.showBroadcastMsg=!0)}},i,[],!1,null,null,null);o.options.__file="kadi/assets/scripts/lib/components/base/BroadcastMessage.vue";var a=o.exports,r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.active?n("div",{staticClass:"mb-4"},[n("div",{staticClass:"alert fade show",class:"alert-"+t.type},[t.icon?n("i",{staticClass:"fa",class:"fa-"+t.icon}):t._e(),t._v(" "+t._s(t.message)+"\n  ")])]):t._e()};r._withStripped=!0;var c=s({data:()=>({icon:null,active:!0}),props:{message:String,type:{type:String,default:"info"},timeout:{type:Number,default:5e3}},mounted(){"info"===this.type?this.icon="exclamation-circle":"danger"===this.type?this.icon="times-circle":"warning"===this.type?this.icon="exclamation-triangle":"success"===this.type&&(this.icon="check-circle"),null!==this.timeout&&window.setTimeout((()=>this.active=!1),this.timeout)}},r,[],!1,null,null,null);c.options.__file="kadi/assets/scripts/lib/components/base/NotificationAlert.vue";var d=c.exports,l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"notification",staticClass:"toast",staticStyle:{"min-width":"100%"},attrs:{"data-autohide":"false"}},[n("div",{staticClass:"toast-header bg-primary"},[n("span",{staticClass:"mr-auto"},[t._v(t._s(t.notification.data.title))]),t._v(" "),n("button",{staticClass:"ml-2 close text-white",attrs:{type:"button","data-dismiss":"toast"},on:{click:function(e){return t.dismiss(t.notification)}}},[n("i",{staticClass:"fas fa-xs fa-times"})])]),t._v(" "),n("div",{staticClass:"toast-body py-2"},[n("div",{domProps:{innerHTML:t._s(t.notification.data.body)}}),t._v(" "),n("div",{staticClass:"mt-1"},[n("small",{staticClass:"text-muted"},[n("from-now",{attrs:{timestamp:t.notification.created_at}})],1)])])])};l._withStripped=!0;var u=s({props:{notification:Object},methods:{dismiss(){axios.delete(this.notification._actions.dismiss).catch((t=>kadi.alert($t("Error dismissing notification."),{request:t.request})))}},mounted(){$(this.$refs.notification).toast("show")},beforeDestroy(){$(this.$refs.notification).toast("dispose")}},l,[],!1,null,null,null);u.options.__file="kadi/assets/scripts/lib/components/base/NotificationToast.vue";var p=u.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dropdown",class:{show:t.dropdownActive},attrs:{id:"dropdown-"+t.id}},[n("div",{staticClass:"input-group input-group-sm responsive-width",on:{click:t.showDropdown}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],ref:"input",staticClass:"form-control custom-input",attrs:{placeholder:t.$t("Quick search")},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),t._v(" "),t.query?n("div",{staticClass:"input-group-append"},[n("button",{staticClass:"btn btn-sm clear-btn input-group-append-content",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.clearQuery.apply(null,arguments)}}},[n("i",{staticClass:"fas fa-times"})])]):n("div",{staticClass:"input-group-append"},[t._m(0)])]),t._v(" "),n("div",{staticClass:"dropdown-menu responsive-width p-0",class:{"d-block":t.dropdownActive}},[t.initialized?n("div",[0===t.items.length?n("div",{staticClass:"px-2 my-1"},[n("strong",{staticClass:"text-muted font-sm"},[t._v(t._s(t.$t("No results.")))])]):t._l(t.items,(function(e,i){return n("div",{key:e.endpoint},[n("a",{staticClass:"dropdown-item p-2",attrs:{href:e.endpoint}},[n("div",{staticClass:"d-flex justify-content-between"},[n("strong",{staticClass:"font-sm"},[t._v(t._s(e.identifier))]),t._v(" "),n("div",[n("span",{staticClass:"badge badge-light border border-muted font-weight-normal ml-3"},[t._v(t._s(e.type))])])]),t._v(" "),n("small",[t._v("\n            "+t._s(t.$t("Last modified"))+" "),n("from-now",{attrs:{timestamp:e.timestamp}})],1)]),t._v(" "),i<t.items.length-1?n("div",{staticClass:"dropdown-divider m-0"}):t._e()])}))],2):t._e(),t._v(" "),t.initialized?t._e():n("i",{staticClass:"fas fa-circle-notch fa-spin text-muted p-2"})])])};f._withStripped=!0;var h={data:()=>({id:kadi.utils.randomAlnum(),query:"",items:[],dropdownActive:!1,initialized:!1,timeoutHandle:null}),props:{endpoint:String},watch:{query(){this.search()}},methods:{search(){null!==this.timeoutHandle&&window.clearTimeout(this.timeoutHandle),this.timeoutHandle=window.setTimeout((()=>{axios.get(`${this.endpoint}?query=${this.query}`).then((t=>{this.items=t.data,this.initialized=!0}))}),500)},showDropdown(){this.dropdownActive||(this.dropdownActive=!0,this.initialized||this.search())},clearQuery(){this.query="",this.dropdownActive=!0,this.$refs.input.focus()},outsideClickHandler(t){null===t.target.closest(`#dropdown-${this.id}`)&&(this.dropdownActive=!1)}},mounted(){window.addEventListener("click",this.outsideClickHandler)},beforeDestroy(){window.removeEventListener("click",this.outsideClickHandler)}},m=(n(7822),s(h,f,[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"search-btn input-group-text input-group-append-content"},[e("i",{staticClass:"fas fa-sm fa-search"})])}],!1,null,"85cf002e",null));m.options.__file="kadi/assets/scripts/lib/components/base/QuickSearch.vue";var v=m.exports;const g=()=>[].forEach.call(document.querySelectorAll(".kadi-logo"),(t=>{t.style.animation="none"}));[].forEach.call(document.querySelectorAll(".kadi-logo"),(t=>{t.addEventListener("animationiteration",g),t.addEventListener("webkitAnimationIteration",g)})),window.addEventListener("invalid",(t=>kadi.utils.scrollIntoView(t.target)),!0);const _=new Vue({el:"#notification-alerts",components:{NotificationAlert:d},data:{alerts:[]},methods:{alert(t,e){let n=t;const i={request:null,type:"danger",timeout:5e3,scrollTo:!0,...e};if(null!==i.request){if(0===i.request.status)return;n=`${t} (${i.request.status})`}this.alerts.push({id:kadi.utils.randomAlnum(),message:n,type:i.type,timeout:i.timeout}),i.scrollTo&&kadi.utils.scrollIntoView(this.$el,"bottom")}}});if(kadi.alert=_.alert,kadi.globals.user_active){const t={H:"",R:"records",C:"collections",G:"groups",T:"templates",U:"users"};window.addEventListener("keydown",(e=>{if(!["INPUT","SELECT","TEXTAREA"].includes(e.target.tagName)&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&!e.metaKey)for(const[n,i]of Object.entries(t))if(e.key===n)return e.preventDefault(),void(window.location.href=`/${i}`)})),new Vue({el:"#quick-search",components:{QuickSearch:v}}),new Vue({el:"#broadcast-message",components:{BroadcastMessage:a}});const n=new Vue({el:"#notification-toasts",components:{NotificationToast:p},data:{notifications:[],title:null},methods:{getNotifications(t=!0){axios.get("/api/notifications").then((e=>{this.notifications=e.data;const n=this.notifications.length;t&&n>0&&this.$nextTick((()=>kadi.utils.scrollIntoView(this.$el,"bottom"))),document.title=n>0?`(${n}) ${this.title}`:this.title}))}},mounted(){this.title=document.title,e().every(5e3,(()=>this.getNotifications(!1))),this.getNotifications(!1)}});kadi.getNotifications=n.getNotifications}}()}();
//# sourceMappingURL=base.js.map