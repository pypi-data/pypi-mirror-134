var O=Object.defineProperty,M=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var S=(t,s,r)=>s in t?O(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,v=(t,s)=>{for(var r in s||(s={}))N.call(s,r)&&S(t,r,s[r]);if(E)for(var r of E(s))q.call(s,r)&&S(t,r,s[r]);return t},b=(t,s)=>M(t,H(s));var k=(t,s)=>{var r={};for(var n in t)N.call(t,n)&&s.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&E)for(var n of E(t))s.indexOf(n)<0&&q.call(t,n)&&(r[n]=t[n]);return r};import{r as e,c as p,R as T,a as W}from"./vendor.71a38677.js";const j=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}};j();function y(){return window.location.host}function F(){const t=e.exports.useMemo(y,[]),s=e.exports.useCallback(()=>new WebSocket(`ws://${t}/inspect/`),[t]),[r,n]=e.exports.useState([]),[o,a]=e.exports.useState([]),[c,i]=e.exports.useState(()=>s());return e.exports.useEffect(()=>{const u=()=>i(()=>s()),_=({data:R})=>{const{type:L,payload:g}=JSON.parse(R);switch(L){case"request":n(h=>[...h,g]);break;case"response":a(h=>[...h,g]);break}};return c.addEventListener("message",_),c.addEventListener("close",u),()=>{c.removeEventListener("message",_),c.removeEventListener("close",u)}},[c]),e.exports.useMemo(()=>r.map(u=>({request:u,response:o.find(({id:_})=>_===u.id)})),[r,o])}const B="_app_1rrvr_1",I="_main_1rrvr_9",J="_header_1rrvr_16",D="_sidebar_1rrvr_30",P="_details_1rrvr_41",A="_noRequest_1rrvr_47",z="_noRequestSelected_1rrvr_47";var m={app:B,main:I,header:J,sidebar:D,details:P,noRequest:A,noRequestSelected:z};const K="_details_1xvog_1",U="_header_1xvog_9",V="_content_1xvog_14",G="_summary_1xvog_20",Q="_tabs_1xvog_24",X="_tab_1xvog_24",Y="_selected_1xvog_42",Z="_emptySpace_1xvog_47",ee="_resend_1xvog_56",te="_headers_1xvog_60";var l={details:K,header:U,content:V,summary:G,tabs:Q,tab:X,selected:Y,emptySpace:Z,resend:ee,headers:te};const se="_requestSummary_11fqk_1",re="_statusCode_11fqk_9",ne="_info_11fqk_14",oe="_success_11fqk_14",ae="_redirect_11fqk_14",ce="_clientError_11fqk_17",le="_serverError_11fqk_17";var d={requestSummary:se,statusCode:re,info:ne,success:oe,redirect:ae,clientError:ce,serverError:le};function x(t,s,r){return t>=s&&t<=r}function $({requestResponse:{request:t,response:s},className:r=""}){var o,a;const n=(o=s==null?void 0:s.status)!=null?o:0;return e.exports.createElement("div",{className:p(d.requestSummary,r)},e.exports.createElement("span",{className:d.method},t.method),e.exports.createElement("p",null,t.path),e.exports.createElement("span",{className:p(d.statusCode,{[d.info]:x(n,100,199),[d.success]:x(n,200,299),[d.redirect]:x(n,300,399),[d.clientError]:x(n,400,499),[d.serverError]:x(n,500,599)})},(a=s==null?void 0:s.status)!=null?a:"Loading..."))}const de="_content_13eis_1",ie="_header_13eis_9",me="_body_13eis_19",ue="_renderError_13eis_36";var f={content:de,header:ie,body:me,renderError:ue};function C(n){var o=n,{raw:t,setRaw:s}=o,r=k(o,["raw","setRaw"]);return e.exports.createElement("div",{className:f.content},e.exports.createElement("div",{className:f.header},e.exports.createElement("input",{id:"raw",type:"checkbox",checked:t,onChange:()=>s(!t)}),e.exports.createElement("label",{htmlFor:"raw"},"Raw")),e.exports.createElement("div",{className:f.body},(()=>{try{return pe(b(v({},r),{raw:t}))}catch{return e.exports.createElement("div",{className:f.renderError},e.exports.createElement("p",null,"Body could not be rendered"),e.exports.createElement("a",{onClick:()=>s(!0)},"View raw"))}})()))}function pe({data:t,raw:s=!1}){const r=e.exports.useMemo(()=>{if(s)return"";const[n,o]=Object.entries(t.headers).find(([a])=>a.toLowerCase()==="content-type");return o.toLowerCase().split(";")[0]},[t,s]);if(s)return e.exports.createElement("pre",null,atob(t.body));if(["application/pdf","text/html"].includes(r))return e.exports.createElement("iframe",{src:`data:${r};base64,${t.body}`,srcDoc:r==="text/html"?atob(t.body):void 0,loading:"lazy",sandbox:""});if(r.startsWith("application/json"))return e.exports.createElement(T,{src:JSON.parse(atob(t.body)),style:{padding:"1em",width:"100%",height:"100%"}});if(r.startsWith("audio"))return e.exports.createElement("audio",{src:`data:${r};base64,${t.body}`});if(r.startsWith("video"))return e.exports.createElement("video",{src:`data:${r};base64,${t.body}`});if(r.startsWith("image"))return e.exports.createElement("img",{src:`data:${r};base64,${t.body}`,alt:""});throw new Error("Not Rendered")}function xe({timing:t}){const s=e.exports.useMemo(()=>Math.round(t*1e3)/1e3,[t]),r=e.exports.useMemo(()=>s>1,[s]);return Number.isNaN(s)?null:e.exports.createElement(e.exports.Fragment,null,`${r?s:s*1e3}${r?"s":"ms"}`)}function w({title:t,headers:s}){return e.exports.createElement("div",{className:l.headers},e.exports.createElement("h2",null,t),Object.entries(s).map(([r,n])=>e.exports.createElement(e.exports.Fragment,null,e.exports.createElement("div",null,r),e.exports.createElement("div",null,n))))}function _e({requestResponse:t}){var c,i;const[s,r]=e.exports.useState("headers"),[n,o]=e.exports.useState(!1),a=e.exports.useCallback(async()=>fetch(`http://${y()}/resend/`,{method:"POST",body:JSON.stringify(b(v({},t.request),{id:void 0}))}),[t]);return e.exports.createElement("div",{className:l.details},e.exports.createElement("div",{className:l.header},e.exports.createElement($,{requestResponse:t,className:l.summary}),e.exports.createElement("div",{className:l.tabs},e.exports.createElement("button",{onClick:()=>r("headers"),className:p(l.tab,{[l.selected]:s==="headers"}),disabled:t.response===void 0},"Headers"),e.exports.createElement("button",{onClick:()=>r("request"),className:p(l.tab,{[l.selected]:s==="request"})},"Request"),e.exports.createElement("button",{onClick:()=>r("response"),className:p(l.tab,{[l.selected]:s==="response"}),disabled:t.response===void 0},"Response"),e.exports.createElement("div",{className:l.emptySpace},e.exports.createElement(xe,{timing:(i=(c=t.response)==null?void 0:c.timing)!=null?i:NaN}),e.exports.createElement("button",{className:l.resend,onClick:()=>a()},"Resend")))),e.exports.createElement("div",{className:l.content},s==="headers"&&e.exports.createElement(e.exports.Fragment,null,e.exports.createElement(w,{title:"Request Headers",headers:t.request.headers}),t.response&&e.exports.createElement(w,{title:"Response Headers",headers:t.response.headers})),s==="request"&&e.exports.createElement(C,{data:t.request,raw:n,setRaw:o}),s==="response"&&t.response!==void 0&&e.exports.createElement(C,{data:t.response,raw:n,setRaw:o})))}function Ee(){const[t,s]=e.exports.useState(null);e.exports.useEffect(()=>{fetch(`http://${y()}/config/`).then(c=>c.json()).then(s)},[]);const r=F(),[n,o]=e.exports.useState(null),a=e.exports.useMemo(()=>n===null?null:r[n],[n,r]);return t&&e.exports.createElement("div",{className:m.app},e.exports.createElement("header",{className:m.header},"TTUN",e.exports.createElement("a",{href:t.url,target:"_blank"},t.url)),e.exports.createElement("main",{className:m.main},e.exports.createElement("ul",{className:m.sidebar},r.length>0?r.slice(0).reverse().map((c,i)=>e.exports.createElement("li",{onClick:()=>o(r.length-i-1),key:`request-${i}`},e.exports.createElement($,{requestResponse:c}))):e.exports.createElement("div",{className:m.noRequest},e.exports.createElement("p",null,"No requests"))),e.exports.createElement("div",{className:m.details},a!==null?e.exports.createElement(_e,{requestResponse:a}):e.exports.createElement("div",{className:m.noRequestSelected},e.exports.createElement("p",null,"Select a request to inspect it")))))}W.exports.render(e.exports.createElement(Ee,null),document.getElementById("root"));
