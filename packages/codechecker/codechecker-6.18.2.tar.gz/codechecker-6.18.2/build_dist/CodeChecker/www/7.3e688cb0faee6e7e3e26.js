(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"1d9I":function(t,e,n){var i=n("b6ax");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("SZ7m").default)("2c1b7a6c",i,!0,{})},"5twP":function(t,e,n){"use strict";n.r(e);n("4l63"),n("rB9j"),n("UxlC"),n("ToJy"),n("sMBO"),n("TeQF"),n("2B1R"),n("DQNa"),n("eoL8"),n("tkto"),n("pNMO"),n("5DmW"),n("QWBl"),n("FZtP"),n("27RR"),n("HRxU");var i=n("LvDl"),o=n.n(i),r=n("GfZm"),a=n("YzhC"),s=n("Kw5r"),c=n("luwA"),u=(n("ls82"),n("yq1k"),n("JTJg"),n("07d7"),n("5s+n"),n("+bqb"));function l(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(i,o)}var d={name:"PopulatePermissionsMixin",data:function(){return{permissions:[],userAuthRights:{},groupAuthRights:{}}},methods:{populatePermissions:function(t,e){var n=this,i=new u.PermissionFilter({canManage:!0});r.a.getClient().getPermissionsForUser(t,e,i,Object(r.f)((function(t){n.permissions=t,n.populateAuthRights(e)})))},addAuthRight:function(t,e,n){var i=this;n.forEach((function(n){n in t||i.$set(t,n,[]),t[n].includes(e)||t[n].push(e)}))},populateAuthRights:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.userAuthRights={},n.groupAuthRights={},n.permissions.forEach((function(e){r.a.getClient().getAuthorisedNames(e,t,Object(r.f)((function(t){n.addAuthRight(n.userAuthRights,e,t.users),n.addAuthRight(n.groupAuthRights,e,t.groups)})))}));case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function a(t){l(r,i,o,a,s,"next",t)}function s(t){l(r,i,o,a,s,"throw",t)}a(void 0)}))})()}}},p=(n("fbCW"),n("yXV3"),n("pDQq"),{name:"BaseProductPermission",props:{permissions:{type:Array,default:function(){return[]}},authRights:{type:Object,default:function(){}},title:{type:String,default:""},label:{type:String,default:""},icon:{type:String,default:"mdi-account-outline"},bus:{type:Object,required:!0},extraParamsJson:{type:String,required:!0},isGroup:{type:Boolean,required:!0}},data:function(){return{Permission:a.Permission,name:"",changedAuthRights:{}}},mounted:function(){this.bus.$on("save",this.saveAll)},methods:{permissionToString:function(t){return Object.keys(a.Permission).find((function(e){return a.Permission[e]===t}))},changeAuthPermission:function(t,e){if(this.changedAuthRights[t]&&-1!==this.changedAuthRights[t].indexOf(e)){var n=this.changedAuthRights[t].indexOf(e);this.changedAuthRights[t].splice(n,1),this.changedAuthRights[t].length||delete this.changedAuthRights[t]}else t in this.changedAuthRights||(this.changedAuthRights[t]=[]),this.changedAuthRights[t].push(e)},saveAll:function(){for(var t=this,e=function(){var e=i[n];t.changedAuthRights[e].forEach((function(n){t.authRights[e]&&-1!==t.authRights[e].indexOf(n)?r.a.getClient().removePermission(n,e,t.isGroup,t.extraParamsJson,Object(r.f)((function(i){if(i){var o=t.authRights[e].indexOf(n);t.authRights[e].splice(o,1),t.authRights[e].length||delete t.authRights[e]}else t.$emit("update:error",!0)}),(function(){t.$emit("update:error",!0)}))):r.a.getClient().addPermission(n,e,t.isGroup,t.extraParamsJson,Object(r.f)((function(i){i?(e in t.authRights||(t.authRights[e]=[]),t.authRights[e].push(n)):t.$emit("update:error",!0)}),(function(){t.$emit("update:error",!0)})))}))},n=0,i=Object.keys(this.changedAuthRights);n<i.length;n++)e();this.$emit("update:success",!0),this.changedAuthRights={}},addNewAuthRight:function(){if(this.name.length){var t=this.name.toLowerCase();Object.keys(this.authRights).find((function(e){return e.toLowerCase()===t}))||this.$set(this.authRights,this.name,[]),this.name=""}}}}),m=(n("N6n6"),n("KHd+")),f=n("ZUTo"),h=n.n(f),v=n("gzZi"),b=n("rHzn"),g=n("pSOK"),y=n("Ey0z"),_=n("H09D"),C=n("hlRy"),x=Object(m.a)(p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("h3",{staticClass:"mb-4 text-center primary--text"},[t._v("\n    "+t._s(t.title)+"\n  ")]),t._v(" "),n("v-simple-table",{attrs:{height:"200px","fixed-header":"",dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[t._v("\n            "+t._s(t.label)+"\n          ")]),t._v(" "),t._l(t.permissions,(function(e){return n("th",{key:e,staticClass:"text-center"},[t._v("\n            "+t._s(t.permissionToString(e))+"\n          ")])}))],2)]),t._v(" "),n("tbody",t._l(t.authRights,(function(e,i){return n("tr",{key:i},[n("td",[n("v-icon",[t._v("\n              "+t._s(t.icon)+"\n            ")]),t._v("\n            "+t._s(i)+"\n          ")],1),t._v(" "),t._l(t.permissions,(function(o){return n("td",{key:o,staticClass:"pa-1 text-center",attrs:{width:"1%"}},[n("span",{staticClass:"d-inline-block"},[n("v-checkbox",{staticClass:"ma-1",attrs:{"input-value":e.includes(o),"hide-details":!0},on:{change:function(e){return t.changeAuthPermission(i,o)}}})],1)])}))],2)})),0)]},proxy:!0}])}),t._v(" "),n("v-text-field",{staticClass:"mt-4",attrs:{label:t.label,"single-line":"","hide-details":"",solo:"",flat:"",outlined:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addNewAuthRight(e)}},scopedSlots:t._u([{key:"append",fn:function(){return[n("v-btn",{staticClass:"ma-0",attrs:{color:"primary"},on:{click:t.addNewAuthRight}},[t._v("\n        Add\n      ")])]},proxy:!0}]),model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)}),[],!1,null,"2f9d7eed",null),S=x.exports;h()(x,{VBtn:v.a,VCheckbox:b.a,VContainer:g.a,VIcon:y.a,VSimpleTable:_.a,VTextField:C.a});var P={name:"ProductUserPermission",mixins:[S],props:{title:{type:String,default:"User permissions"},label:{type:String,default:"User name"}}},w=Object(m.a)(P,void 0,void 0,!1,null,null,null).exports,O={name:"ProductGroupPermission",mixins:[S],props:{title:{type:String,default:"Group permissions"},label:{type:String,default:"Group name"},icon:{type:String,default:"mdi-account-group-outline"}}},k=Object(m.a)(O,void 0,void 0,!1,null,null,null).exports,N={name:"EditProductPermission",components:{ProductUserPermission:w,ProductGroupPermission:k},mixins:[d],props:{bus:{type:Object,required:!0}},data:function(){return{scope:"SYSTEM",extraParamsJSON:JSON.stringify({}),success:!1,error:!1}},mounted:function(){this.populatePermissions(this.scope,this.extraParamsJSON)}},R=n("B5h7"),D=n("Yq0q"),A=n("D9m0"),V=Object(m.a)(N,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("v-alert",{attrs:{dismissible:"",color:"success",border:"left",elevation:"2","colored-border":"",icon:"mdi-check"},model:{value:t.success,callback:function(e){t.success=e},expression:"success"}},[t._v("\n    Permission changes saved successfully!\n  ")]),t._v(" "),n("v-alert",{attrs:{dismissible:"",color:"error",border:"left",elevation:"2","colored-border":"",icon:"mdi-alert-outline"},model:{value:t.error,callback:function(e){t.error=e},expression:"error"}},[t._v("\n    Some permission changes could not be saved!\n  ")]),t._v(" "),n("v-row",[n("v-col",[n("product-user-permission",{attrs:{permissions:t.permissions,"auth-rights":t.userAuthRights,bus:t.bus,"extra-params-json":t.extraParamsJSON,"is-group":!1,success:t.success,error:t.error},on:{"update:success":function(e){t.success=e},"update:error":function(e){t.error=e}}})],1),t._v(" "),n("v-col",[n("product-group-permission",{attrs:{permissions:t.permissions,"auth-rights":t.groupAuthRights,bus:t.bus,"extra-params-json":t.extraParamsJSON,"is-group":!0,success:t.success,error:t.error},on:{"update:success":function(e){t.success=e},"update:error":function(e){t.error=e}}})],1)],1)],1)}),[],!1,null,null,null),j=V.exports;h()(V,{VAlert:R.a,VCol:D.a,VContainer:g.a,VRow:A.a});var B={name:"EditGlobalPermissionBtn",components:{ConfirmDialog:c.a,EditGlobalPermission:j},data:function(){return{dialog:!1,bus:new s.a}},methods:{confirmPermissionChange:function(){this.bus.$emit("save")}}},E=Object(m.a)(B,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("confirm-dialog",{attrs:{"max-width":"1000px"},on:{confirm:t.confirmPermissionChange},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-btn",t._g({staticClass:"mr-2",attrs:{id:"edit-global-permissions-btn",color:"primary"}},i),[n("v-icon",{attrs:{left:""}},[t._v("\n        mdi-shield-key\n      ")]),t._v("\n      Edit global permission\n    ")],1)]}},{key:"title",fn:function(){return[t._v("\n    Global permissions\n  ")]},proxy:!0},{key:"content",fn:function(){return[n("edit-global-permission",{attrs:{bus:t.bus}})]},proxy:!0}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}})}),[],!1,null,null,null),T=E.exports;h()(E,{VBtn:v.a,VIcon:y.a});var $={name:"DeleteProductBtn",components:{ConfirmDialog:c.a},props:{product:{type:Object,required:!0}},data:function(){return{dialog:!1}},methods:{confirmDelete:function(){var t=this;r.g.getClient().removeProduct(this.product.id,Object(r.f)((function(e){e&&t.$emit("on-complete",t.product)})))}}},q=Object(m.a)($,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("confirm-dialog",{attrs:{"max-width":"600px","cancel-btn-color":"primary","confirm-btn-label":"Remove","confirm-btn-color":"error"},on:{confirm:t.confirmDelete},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-btn",t._g({staticClass:"remove-btn",attrs:{icon:"",color:"error"}},i),[n("v-icon",[t._v("mdi-trash-can-outline")])],1)]}},{key:"title",fn:function(){return[t._v("\n    Confirm deletion of product\n  ")]},proxy:!0},{key:"content",fn:function(){return[n("p",[t._v("\n      You have selected to delete "),n("b",[t._v(t._s(t.product.endpoint))]),t._v("\n      product!\n    ")]),t._v(" "),n("p",[t._v("\n      Deleting a product "),n("b",[t._v("will")]),t._v(" remove product-specific\n      configuration, such as access control and authorisation settings,\n      and "),n("b",[t._v("will")]),t._v(" disconnect the database from the server.\n    ")]),t._v(" "),n("p",[t._v("\n      Analysis results stored in the database "),n("b",[t._v("will NOT")]),t._v(" be lost!\n    ")])]},proxy:!0}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}})}),[],!1,null,null,null),I=q.exports;h()(q,{VBtn:v.a,VIcon:y.a});var U=n("L2JU"),L=n("bDO0"),M=n("kNJ9");function F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function J(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?F(Object(n),!0).forEach((function(e){G(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function G(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var H={name:"EditAnnouncementBtn",components:{ConfirmDialog:c.a},data:function(){return{dialog:!1,value:null}},computed:J({},Object(U.c)(["announcement"])),mounted:function(){var t=this;this.getAnnouncement().then((function(e){t.value=e}))},methods:J(J(J({},Object(U.b)([L.a])),Object(U.d)([M.e])),{},{confirmAnnouncementChange:function(){var t=this,e=this.value?window.btoa(this.value):window.btoa("");r.c.getClient().setNotificationBannerText(e,Object(r.f)((function(){t.dialog=!1,t.setAnnouncement(t.value)})))}})},K=Object(m.a)(H,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("confirm-dialog",{attrs:{"confirm-btn-label":"Change"},on:{confirm:t.confirmAnnouncementChange},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-btn",t._g({staticClass:"mr-2",attrs:{id:"edit-announcement-btn",color:"primary"}},i),[n("v-icon",{attrs:{left:""}},[t._v("\n        mdi-bullhorn-outline\n      ")]),t._v("\n      Edit announcement\n    ")],1)]}},{key:"title",fn:function(){return[t._v("\n    Change announcement\n  ")]},proxy:!0},{key:"content",fn:function(){return[n("v-text-field",{attrs:{"append-icon":"mdi-bullhorn-outline",label:"Write your alert here...","single-line":"","hide-details":"",outlined:"",solo:"",clearable:"",flat:"",dense:""},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})]},proxy:!0}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}})}),[],!1,null,null,null),z=K.exports;h()(K,{VBtn:v.a,VIcon:y.a,VTextField:C.a});var Q=n("S4uM"),Z={name:"EditProductPermission",components:{ProductUserPermission:w,ProductGroupPermission:k},mixins:[d],props:{product:{type:Object,required:!0},bus:{type:Object,required:!0},success:{type:Boolean,default:!1},error:{type:Boolean,default:!1}},data:function(){return{scope:"PRODUCT",extraParamsJSON:JSON.stringify({productID:this.product.id.toNumber()})}},mounted:function(){this.populatePermissions(this.scope,this.extraParamsJSON)}},Y=Object(m.a)(Z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"auto"}},[n("product-user-permission",{attrs:{permissions:t.permissions,"auth-rights":t.userAuthRights,bus:t.bus,"extra-params-json":t.extraParamsJSON,"is-group":!1,success:t.success,error:t.error},on:{"update:success":function(e){return t.$emit("update:success",e)},"update:error":function(e){return t.$emit("update:error",e)}}})],1),t._v(" "),n("v-col",{attrs:{cols:"auto"}},[n("product-group-permission",{attrs:{permissions:t.permissions,"auth-rights":t.groupAuthRights,bus:t.bus,"extra-params-json":t.extraParamsJSON,"is-group":!0,success:t.success,error:t.error},on:{"update:success":function(e){return t.$emit("update:success",e)},"update:error":function(e){return t.$emit("update:error",e)}}})],1)],1)],1)}),[],!1,null,null,null),W=Y.exports;h()(Y,{VCol:D.a,VContainer:g.a,VRow:A.a});var X=n("6eI2"),tt=n("G2KY"),et=n("nocd"),nt={name:"SelectConfidentialityItem",components:{ConfidentialityIcon:et.b},mixins:[tt.b],props:{value:{type:String,required:!0}}},it=n("ghKu"),ot=Object(m.a)(nt,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("v-avatar",{attrs:{left:"",size:16}},[e("confidentiality-icon",{attrs:{value:this.confidentialityFromStringToCode(this.value),small:""}})],1),this._v("\n  "+this._s(this.value)+"\n")],1)}),[],!1,null,null,null),rt=ot.exports;h()(ot,{VAvatar:it.a});var at={name:"EditProduct",components:{TooltipHelpIcon:X.a,SelectConfidentialityItem:rt},mixins:[tt.b],props:{productConfig:{type:Object,required:!0},isValid:{type:Boolean,default:!1},isSuperUser:{type:Boolean,default:!1}},data:function(){return{rules:{endpoint:[function(t){return!!t||"Endpoint is required"}],dbFile:[function(t){return!!t||"Database file is required"}],dbName:[function(t){return!!t||"Database name is required"}],dbHost:[function(t){return!!t||"Database host is required"}],dbPort:[function(t){return!!t||"Database port is required"}],dbUser:[function(t){return!!t||"Database user name is required"}],engine:[function(t){return!!t||"Engine is required"}],runLimit:[function(t){return!t||!!t&&!isNaN(parseInt(t))||"Number is required"}]}}},computed:{confidentialityItems:function(){return this.confidentialities()},confidentialityString:{get:function(){return this.confidentialityFromCodeToString(this.productConfig.confidentiality)},set:function(t){this.productConfig.confidentiality=this.confidentialityFromStringToCode(t)}},valid:{get:function(){return this.isValid},set:function(t){this.$emit("update:is-valid",t)}},dbConnection:function(){return this.productConfig.connection},dbUserName:{get:function(){return this.productConfig.connection.username_b64?window.atob(this.productConfig.connection.username_b64):""},set:function(t){this.productConfig.connection.username_b64=t.length?window.btoa(t):null}},dbPassword:{get:function(){return this.productConfig.connection.password_b64?window.atob(this.productConfig.connection.password_b64):""},set:function(t){this.productConfig.connection.password_b64=t.length?window.btoa(t):null}},description:{get:function(){return this.productConfig.description_b64?window.atob(this.productConfig.description_b64):""},set:function(t){this.productConfig.description_b64=t.length?window.btoa(t):null}},displayName:{get:function(){return this.productConfig.displayedName_b64?window.atob(this.productConfig.displayedName_b64):""},set:function(t){this.productConfig.displayedName_b64=t.length?window.btoa(t):null}}},created:function(){this.productConfig.confidentiality||(this.productConfig.confidentiality=Q.Confidentiality.CONFIDENTIAL)},methods:{validate:function(){return this.$refs.form.validate()}}},st=n("zn5u"),ct=n("S9TP"),ut=n("Z7Yp"),lt=n("Q6Zl"),dt=n("uXRr"),pt=n("qEQh"),mt=Object(m.a)(at,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[t.isSuperUser?n("v-text-field",{attrs:{rules:t.rules.endpoint,label:"URL endpoint*",name:"endpoint","prepend-icon":"mdi-card-account-details-outline",required:""},model:{value:t.productConfig.endpoint,callback:function(e){t.$set(t.productConfig,"endpoint",e)},expression:"productConfig.endpoint"}}):t._e(),t._v(" "),n("v-text-field",{attrs:{label:"Display name",name:"display-name","prepend-icon":"mdi-television"},model:{value:t.displayName,callback:function(e){t.displayName=e},expression:"displayName"}}),t._v(" "),n("v-textarea",{attrs:{label:"Description",name:"description","prepend-icon":"mdi-text",rows:"1"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),t._v(" "),t.isSuperUser?n("v-text-field",{attrs:{value:t.productConfig.runLimit,type:"number",label:"Run limit",name:"run-limit","prepend-icon":"mdi-speedometer",rules:t.rules.runLimit},on:{input:function(e){t.productConfig.runLimit=e||null}}}):t._e(),t._v(" "),n("v-row",{staticClass:"ma-0"},[n("v-select",{staticClass:"select-confidentiality",attrs:{label:"Information Classification","prepend-icon":"mdi-file-eye-outline",name:"confidentiality",items:t.confidentialityItems},scopedSlots:t._u([{key:"selection",fn:function(t){var e=t.item;return[n("select-confidentiality-item",{attrs:{value:e}})]}},{key:"item",fn:function(t){var e=t.item;return[n("select-confidentiality-item",{attrs:{value:e}})]}}]),model:{value:t.confidentialityString,callback:function(e){t.confidentialityString=e},expression:"confidentialityString"}}),t._v(" "),n("tooltip-help-icon",[t._v("\n      Classification and handling of source code confidentiality.\n    ")])],1),t._v(" "),n("v-checkbox",{attrs:{label:"Disable review status change",name:"disable-review-status-change"},model:{value:t.productConfig.isReviewStatusChangeDisabled,callback:function(e){t.$set(t.productConfig,"isReviewStatusChangeDisabled",e)},expression:"productConfig.isReviewStatusChangeDisabled"}}),t._v(" "),t.isSuperUser?n("div",[n("v-divider"),t._v(" "),n("v-radio-group",{attrs:{rules:t.rules.engine},model:{value:t.dbConnection.engine,callback:function(e){t.$set(t.dbConnection,"engine",e)},expression:"dbConnection.engine"}},[n("v-radio",{attrs:{label:"SQLite",value:"sqlite"}}),t._v(" "),n("v-radio",{attrs:{label:"PostgreSQL",value:"postgresql"}})],1),t._v(" "),"sqlite"==t.dbConnection.engine?n("div",[n("v-text-field",{attrs:{label:"Database file*",name:"db-file","prepend-icon":"mdi-database",rules:t.rules.dbFile},model:{value:t.dbConnection.database,callback:function(e){t.$set(t.dbConnection,"database",e)},expression:"dbConnection.database"}})],1):t._e(),t._v(" "),"postgresql"==t.dbConnection.engine?n("div",[n("v-text-field",{attrs:{label:"Server address*",name:"db-host","prepend-icon":"mdi-protocol",rules:t.rules.dbHost,required:""},model:{value:t.dbConnection.host,callback:function(e){t.$set(t.dbConnection,"host",e)},expression:"dbConnection.host"}}),t._v(" "),n("v-text-field",{attrs:{label:"Port*",name:"db-port","prepend-icon":"mdi-map-marker",rules:t.rules.dbPort,required:""},model:{value:t.dbConnection.port,callback:function(e){t.$set(t.dbConnection,"port",e)},expression:"dbConnection.port"}}),t._v(" "),n("v-text-field",{attrs:{label:"User name*",name:"db-username","prepend-icon":"mdi-account-outline",autocomplete:"new-password",rules:t.rules.dbUserName,required:""},model:{value:t.dbUserName,callback:function(e){t.dbUserName=e},expression:"dbUserName"}}),t._v(" "),n("v-text-field",{attrs:{type:"password",label:"Password",name:"db-password","prepend-icon":"mdi-lock-outline",autocomplete:"new-password"},model:{value:t.dbPassword,callback:function(e){t.dbPassword=e},expression:"dbPassword"}}),t._v(" "),n("v-text-field",{attrs:{label:"Database name*",name:"db-name","prepend-icon":"mdi-database",rules:t.rules.dbName},model:{value:t.dbConnection.database,callback:function(e){t.$set(t.dbConnection,"database",e)},expression:"dbConnection.database"}})],1):t._e()],1):t._e()],1)}),[],!1,null,null,null),ft=mt.exports;h()(mt,{VCheckbox:b.a,VDivider:st.a,VForm:ct.a,VRadio:ut.a,VRadioGroup:lt.a,VRow:A.a,VSelect:dt.a,VTextField:C.a,VTextarea:pt.a});var ht={name:"EditProductBtn",components:{ConfirmDialog:c.a,EditProductPermission:W,ProductConfigForm:ft},props:{product:{type:Object,required:!0},isSuperUser:{type:Boolean,default:!1}},data:function(){return{dialog:!1,productConfig:new Q.ProductConfiguration({connection:new Q.DatabaseConnection}),tab:null,loading:!1,isValid:!1,success:!1,error:!1,bus:new s.a}},watch:{dialog:function(){var t=this;this.dialog&&(this.loading=!0,r.g.getClient().getProductConfiguration(this.product.id,Object(r.f)((function(e){t.productConfig=e,t.loading=!1}))))}},methods:{save:function(){var t=this;r.g.getClient().editProduct(this.product.id,this.productConfig,Object(r.f)((function(e){e?(t.success=!0,t.$emit("on-complete",new Q.ProductConfiguration(t.productConfig))):t.error=!0}),(function(){t.error=!0}))),this.bus.$emit("save")}}},vt=n("caNO"),bt=n("xnG4"),gt=n("/ldL"),yt=n("qsiC"),_t=Object(m.a)(ht,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("confirm-dialog",{attrs:{"max-width":"80%",loading:t.loading},on:{confirm:t.save},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-btn",t._g({staticClass:"edit-btn",attrs:{icon:"",color:"primary"}},i),[n("v-icon",[t._v("mdi-pencil")])],1)]}},{key:"title",fn:function(){return[t._v("\n    Edit product\n  ")]},proxy:!0},{key:"content",fn:function(){return[n("v-alert",{attrs:{dismissible:"",color:"success",border:"left",elevation:"2","colored-border":"",icon:"mdi-check"},model:{value:t.success,callback:function(e){t.success=e},expression:"success"}},[t._v("\n      Successfully saved.\n    ")]),t._v(" "),n("v-alert",{attrs:{dismissible:"",color:"error",border:"left",elevation:"2","colored-border":"",icon:"mdi-alert-outline"},model:{value:t.error,callback:function(e){t.error=e},expression:"error"}},[t._v("\n      Failed to save product changes.\n    ")]),t._v(" "),n("v-tabs",{attrs:{"background-color":"transparent",color:"basil",grow:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[n("v-tab",[t._v("\n        Edit\n      ")]),t._v(" "),n("v-tab",[t._v("\n        Permissions\n      ")])],1),t._v(" "),n("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[n("v-tab-item",[n("v-container",{attrs:{fluid:""}},[n("product-config-form",{attrs:{"is-valid":t.isValid,"is-super-user":t.isSuperUser,"product-config":t.productConfig},on:{"update:isValid":function(e){t.isValid=e},"update:is-valid":function(e){t.isValid=e}}})],1)],1),t._v(" "),n("v-tab-item",[n("edit-product-permission",{attrs:{product:t.product,bus:t.bus,success:t.success,error:t.error},on:{"update:success":function(e){t.success=e},"update:error":function(e){t.error=e}}})],1)],1)]},proxy:!0}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}})}),[],!1,null,null,null),Ct=_t.exports;h()(_t,{VAlert:R.a,VBtn:v.a,VContainer:g.a,VIcon:y.a,VTab:vt.a,VTabItem:bt.a,VTabs:gt.a,VTabsItems:yt.a});var xt={name:"NewProductBtn",components:{ConfirmDialog:c.a,ProductConfigForm:ft},props:{isSuperUser:{type:Boolean,default:!1}},data:function(){return{dialog:!1,productConfig:new Q.ProductConfiguration({connection:new Q.DatabaseConnection}),isValid:!1}},methods:{save:function(){var t=this;this.$refs.form.validate()&&r.g.getClient().addProduct(this.productConfig,Object(r.f)((function(){t.$emit("on-complete",new Q.ProductConfiguration(t.productConfig)),t.dialog=!1,t.productConfig=new Q.ProductConfiguration({connection:new Q.DatabaseConnection})})))}}},St=Object(m.a)(xt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("confirm-dialog",{attrs:{"max-width":"50%"},on:{confirm:t.save},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-btn",t._g({attrs:{id:"new-product-btn",color:"primary"}},i),[n("v-icon",{attrs:{left:""}},[t._v("\n        mdi-plus\n      ")]),t._v("\n      New product\n    ")],1)]}},{key:"title",fn:function(){return[t._v("\n    New product\n  ")]},proxy:!0},{key:"content",fn:function(){return[n("product-config-form",{ref:"form",attrs:{"is-valid":t.isValid,"is-super-user":t.isSuperUser,"product-config":t.productConfig},on:{"update:isValid":function(e){t.isValid=e},"update:is-valid":function(e){t.isValid=e}}})]},proxy:!0}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}})}),[],!1,null,null,null),Pt=St.exports;h()(St,{VBtn:v.a,VIcon:y.a});var wt=n("dMvs"),Ot={name:"ProductNameColumn",filters:{productIconName:function(t){return t?t.charAt(0).toUpperCase():""}},components:{ConfidentialityIcon:et.b},mixins:[tt.g],props:{product:{type:Object,required:!0}},data:function(){return{DBStatus:a.DBStatus,links:[{name:"runs",title:"Show runs",color:"primary",icon:"mdi-run-fast",divider:!0},{name:"reports",title:"Show reports",color:"rgb(236, 118, 114)",icon:"mdi-bug",query:wt.b,divider:!0},{name:"statistics",title:"Show statistics",color:"green",icon:"mdi-chart-line",query:wt.b}]}},computed:{confidentialityTitle:function(){return this.confidentialityFromCodeToString(this.product.confidentiality)}},methods:{dbStatusFromCodeToString:function(t){switch(parseInt(t)){case a.DBStatus.OK:return"Database is up to date.";case a.DBStatus.MISSING:return"Database is missing.";case a.DBStatus.FAILED_TO_CONNECT:return"Failed to connect to the database.";case a.DBStatus.SCHEMA_MISMATCH_OK:return"Schema mismatch: migration is possible.";case a.DBStatus.SCHEMA_MISMATCH_NO:return"Schema mismatch: migration not available.";case a.DBStatus.SCHEMA_MISSING:return"Schema is missing.";case a.DBStatus.SCHEMA_INIT_ERROR:return"Schema initialization error.";default:return console.warn("Non existing database status code: ",t),"N/A"}}}},kt=n("2hOt"),Nt=n("gnBG"),Rt=n("XSMC"),Dt=Object(m.a)(Ot,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-item",{staticClass:"pa-0",attrs:{"two-line":""}},[n("v-list-item-avatar",{staticClass:"my-1"},[n("v-avatar",{staticClass:"my-1",attrs:{color:t.strToColor(t.product.endpoint),size:"48"}},[n("span",{staticClass:"white--text headline"},[t._v("\n        "+t._s(t._f("productIconName")(t.product.endpoint))+"\n      ")])])],1),t._v(" "),n("v-list-item-content",[n("v-list-item-title",[n("confidentiality-icon",{attrs:{value:t.product.confidentiality,small:""}}),t._v(" "),t.product.databaseStatus===t.DBStatus.OK&&t.product.accessible?n("router-link",{attrs:{to:{name:"runs",params:{endpoint:t.product.endpoint}}}},[t._v("\n        "+t._s(t.product.displayedName)+"\n      ")]):n("span",{style:{"text-decoration":"line-through"}},[t._v("\n        "+t._s(t.product.displayedName)+"\n      ")]),t._v(" "),t.product.accessible?t.product.databaseStatus!==t.DBStatus.OK?n("span",{staticClass:"error--text"},[n("v-icon",[t._v("mdi-alert-outline")]),t._v("\n        "+t._s(t.dbStatusFromCodeToString(t.product.databaseStatus))+"\n        "),t.product.databaseStatus===t.DBStatus.SCHEMA_MISMATCH_OK||t.product.databaseStatus===t.DBStatus.SCHEMA_MISSING?n("span",[t._v("\n          Use "),n("kbd",[t._v("CodeChecker server")]),t._v(" command for schema\n          upgrade/initialization.\n        ")]):t._e()],1):t._e():n("span",{attrs:{color:"grey--text"}},[n("v-icon",[t._v("mdi-alert-outline")]),t._v("\n        You do not have access to this product!\n      ")],1)],1),t._v(" "),n("v-list-item-subtitle",[t._v("\n      "+t._s(t.product.description)+"\n    ")]),t._v(" "),t.product.databaseStatus===t.DBStatus.OK&&t.product.accessible?n("v-list-item-subtitle",t._l(t.links,(function(e){return n("span",{key:e.name},[n("v-btn",{attrs:{to:{name:e.name,params:{endpoint:t.product.endpoint},query:e.query||{}},title:e.title,color:e.color,"x-small":"",text:"",icon:""}},[n("v-icon",[t._v(t._s(e.icon))])],1),t._v(" "),e.divider?n("v-divider",{staticClass:"mx-2 d-inline",attrs:{inset:"",vertical:""}}):t._e()],1)})),0):t._e()],1)],1)}),[],!1,null,null,null),At=Dt.exports;function Vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Vt(Object(n),!0).forEach((function(e){Bt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Bt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}h()(Dt,{VAvatar:it.a,VBtn:v.a,VDivider:st.a,VIcon:y.a,VListItem:kt.a,VListItemAvatar:Nt.a,VListItemContent:Rt.a,VListItemSubtitle:Rt.b,VListItemTitle:Rt.c});var Et={name:"Products",components:{DeleteProductBtn:I,EditAnnouncementBtn:z,EditGlobalPermissionBtn:T,EditProductBtn:Ct,NewProductBtn:Pt,ProductNameColumn:At},data:function(){var t=this.$router.currentRoute.query["sort-by"],e=this.$router.currentRoute.query["sort-desc"],n=parseInt(this.$router.currentRoute.query.page)||1;return{DBStatus:a.DBStatus,productNameSearch:null,loading:!1,pagination:{sortBy:t?[t]:[],sortDesc:void 0!==e?[!!e]:[]},footerProps:{itemsPerPageOptions:[25]},page:n,headers:[{text:"Name",value:"displayedName",sortable:!0},{text:"Admins",value:"admins",sortable:!1},{text:"Number of runs",value:"runCount",align:"center",sortable:!0},{text:"Latest store to product",value:"latestStoreToProduct",sortable:!0},{text:"Actions",value:"action",sortable:!1}],products:[],isSuperUser:!1,isAdminOfAnyProduct:!1}},watch:{pagination:{handler:function(){var t=this.pagination.sortBy.length?this.pagination.sortBy[0]:void 0,e=this.pagination.sortDesc.length?this.pagination.sortDesc[0]:void 0;this.$router.replace({query:jt(jt({},this.$route.query),{},{"sort-by":t,"sort-desc":e})}).catch((function(){})),this.products.sort(this.sortProducts)},deep:!0},page:function(){var t=1===this.page?void 0:this.page;this.$router.replace({query:jt(jt({},this.$route.query),{},{page:t})}).catch((function(){}))},productNameSearch:o.a.debounce((function(){this.$router.replace({query:jt(jt({},this.$route.query),{},{name:this.productNameSearch?this.productNameSearch:void 0})}).catch((function(){})),this.fetchProducts()}),500)},created:function(){var t=this;this.productNameSearch=this.$router.currentRoute.query.name||null,r.a.getClient().hasPermission(a.Permission.SUPERUSER,"",Object(r.f)((function(e){t.isSuperUser=e,e||r.g.getClient().isAdministratorOfAnyProduct(Object(r.f)((function(e){t.isAdminOfAnyProduct=e,e||(t.headers=t.headers.filter((function(t){return"action"!==t.value})))})))}))),this.productNameSearch||this.fetchProducts()},methods:{fetchProducts:function(){var t=this;this.loading=!0;var e=this.productNameSearch?"*".concat(this.productNameSearch,"*"):null;r.g.getClient().getProducts(null,e,Object(r.f)((function(e){t.products=e.map((function(t){return jt({description:t.description_b64?window.atob(t.description_b64):null,displayedName:t.displayedName_b64?window.atob(t.displayedName_b64):null},t)})).sort(t.sortProducts),t.pagination.page=t.page,t.loading=!1})))},sortProducts:function(t,e){var n=this.pagination.sortBy.length?this.pagination.sortBy[0]:void 0,i=this.pagination.sortDesc.length?this.pagination.sortDesc[0]:void 0,o=null,r=null;if(void 0===n){if(t.accessible!==e.accessible)return t.accessible?-1:1;o=t.displayedName.toLowerCase(),r=e.displayedName.toLowerCase()}else"displayedName"===n?(o=t.displayedName.toLowerCase(),r=e.displayedName.toLowerCase()):"runCount"===n?(o=t.runCount,r=e.runCount):"latestStoreToProduct"===n?(o=t.latestStoreToProduct?new Date(t.latestStoreToProduct):null,r=e.latestStoreToProduct?new Date(e.latestStoreToProduct):null):console.warn("Invalid sort field: ",n);if(i){var a=[r,o];o=a[0],r=a[1]}return o<r?-1:o>r?1:0},onCompleteNewProduct:function(){this.fetchProducts()},onCompleteEditProduct:function(){this.fetchProducts()},deleteProduct:function(t){this.products=this.products.filter((function(e){return e.id!==t.id}))},getRunCountColor:function(t){return t>500?"red":t>200?"orange":"green"}}},Tt=(n("TU2a"),n("zCDB")),$t=n("j+oE"),qt=n("L6Q5"),It=n("cdmR"),Ut=Object(m.a)(Et,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("v-data-table",{attrs:{headers:t.headers,items:t.products,options:t.pagination,"footer-props":t.footerProps,page:t.page,"must-sort":!0,loading:t.loading,"mobile-breakpoint":1e3,"loading-text":"Loading products...","item-key":"endpoint"},on:{"update:options":function(e){t.pagination=e},"update:page":function(e){t.page=e}},scopedSlots:t._u([{key:"top",fn:function(){return[n("v-toolbar",{staticClass:"mb-4",attrs:{flat:""}},[n("v-row",[n("v-col",[n("v-text-field",{attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search for products...","single-line":"","hide-details":"",outlined:"",solo:"",flat:"",dense:""},model:{value:t.productNameSearch,callback:function(e){t.productNameSearch=e},expression:"productNameSearch"}})],1),t._v(" "),n("v-spacer"),t._v(" "),n("v-col",{attrs:{cols:"auto",align:"right"}},[n("v-spacer"),t._v(" "),t.isSuperUser?n("span",[n("edit-announcement-btn"),t._v(" "),n("edit-global-permission-btn"),t._v(" "),n("new-product-btn",{attrs:{"is-super-user":t.isSuperUser},on:{"on-complete":t.onCompleteNewProduct}})],1):t._e(),t._v(" "),n("v-btn",{attrs:{icon:"",title:"Reload products",color:"primary"},on:{click:t.fetchProducts}},[n("v-icon",[t._v("mdi-refresh")])],1)],1)],1)],1)]},proxy:!0},{key:"item.displayedName",fn:function(t){var e=t.item;return[n("product-name-column",{attrs:{product:e}})]}},{key:"item.admins",fn:function(e){var i=e.item;return t._l(i.admins,(function(e){return n("span",{key:e,staticClass:"v-chip-max-width-wrapper"},[n("v-chip",{staticClass:"mr-2 my-1",attrs:{color:"secondary",outlined:"",title:e}},[n("v-avatar",[n("v-icon",[t._v("mdi-account-circle")])],1),t._v("\n          "+t._s(e)+"\n        ")],1)],1)}))}},{key:"item.runCount",fn:function(e){var i=e.item;return[n("v-chip",{attrs:{color:t.getRunCountColor(i.runCount),dark:""}},[t._v("\n        "+t._s(i.runCount)+"\n      ")])]}},{key:"item.latestStoreToProduct",fn:function(e){var i=e.item;return[i.latestStoreToProduct?n("v-chip",{staticClass:"ma-2",attrs:{color:"primary",outlined:""}},[n("v-icon",{attrs:{left:""}},[t._v("\n          mdi-calendar-range\n        ")]),t._v("\n        "+t._s(t._f("prettifyDate")(i.latestStoreToProduct))+"\n      ")],1):t._e()]}},{key:"item.action",fn:function(e){var i=e.item;return[n("div",{staticClass:"text-no-wrap"},[i.administrating?n("edit-product-btn",{attrs:{product:i,"is-super-user":t.isSuperUser},on:{"on-complete":t.onCompleteEditProduct}}):t._e(),t._v(" "),t.isSuperUser?n("delete-product-btn",{attrs:{product:i},on:{"on-complete":t.deleteProduct}}):t._e()],1)]}}])})],1)}),[],!1,null,"62fab1a6",null);e.default=Ut.exports;h()(Ut,{VAvatar:it.a,VBtn:v.a,VChip:Tt.a,VCol:D.a,VContainer:g.a,VDataTable:$t.a,VIcon:y.a,VRow:A.a,VSpacer:qt.a,VTextField:C.a,VToolbar:It.a})},N6n6:function(t,e,n){"use strict";var i=n("cMT2");n.n(i).a},TU2a:function(t,e,n){"use strict";var i=n("1d9I");n.n(i).a},TvUN:function(t,e,n){(e=n("JPst")(!1)).push([t.i,"[data-v-2f9d7eed] .v-input--selection-controls__input{margin:0}",""]),t.exports=e},b6ax:function(t,e,n){(e=n("JPst")(!1)).push([t.i,".v-list-item__subtitle[data-v-62fab1a6]{white-space:normal}.v-chip-max-width-wrapper[data-v-62fab1a6]{display:inline-block;max-width:150px}.v-chip-max-width-wrapper[data-v-62fab1a6]  .v-chip__content{line-height:32px;display:inline-block !important;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;position:relative}",""]),t.exports=e},cMT2:function(t,e,n){var i=n("TvUN");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("SZ7m").default)("98e69eea",i,!0,{})}}]);