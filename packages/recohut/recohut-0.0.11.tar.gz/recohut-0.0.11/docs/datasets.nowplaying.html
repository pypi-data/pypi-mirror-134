---

title: NowPlaying dataset


keywords: fastai
sidebar: home_sidebar

summary: "NowPlaying dataset."
description: "NowPlaying dataset."
nb_path: "nbs/datasets/datasets.nowplaying.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/datasets/datasets.nowplaying.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="NowPlayingDataset" class="doc_header"><code>class</code> <code>NowPlayingDataset</code><a href="https://github.com/RecoHut-Projects/recohut/tree/master/recohut/datasets/nowplaying.py#L22" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>NowPlayingDataset</code>(<strong><code>root</code></strong>, <strong><code>process_method</code></strong>, <strong><code>min_session_length</code></strong>=<em><code>2</code></em>, <strong><code>min_item_support</code></strong>=<em><code>2</code></em>, <strong><code>num_slices</code></strong>=<em><code>5</code></em>, <strong><code>days_offset</code></strong>=<em><code>0</code></em>, <strong><code>days_shift</code></strong>=<em><code>95</code></em>, <strong><code>days_train</code></strong>=<em><code>90</code></em>, <strong><code>days_test</code></strong>=<em><code>5</code></em>) :: <a href="/recohut/datasets.base.html#SessionDataset"><code>SessionDataset</code></a></p>
</blockquote>
<p>Session data base class.</p>
<p>Args:
    min_session_length (int): Minimum number of items for a session to be valid
    min_item_support (int): Minimum number of interactions for an item to be valid
    eval_sec (int): these many seconds from the end will be taken as validation data</p>
<p>References:</p>

<pre><code>1. https://github.com/Ethan-Yys/GRU4REC-pytorch-master/blob/master/preprocessing.py</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>rm -r /content/nowplaying/processed/*
<span class="n">npdata</span> <span class="o">=</span> <span class="n">NowPlayingDataset</span><span class="p">(</span><span class="n">root</span><span class="o">=</span><span class="s1">&#39;/content/nowplaying&#39;</span><span class="p">,</span> <span class="n">process_method</span><span class="o">=</span><span class="s1">&#39;last&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>Downloading https://github.com/RecoHut-Datasets/nowplaying/raw/v2/nowplaying.zip
Extracting /content/nowplaying/raw/nowplaying.zip
Processing...
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Loaded data set
	Events: 1587776
	Sessions: 156958
	Items: 258322
	Span: 2014-01-03 / 2015-06-22


Filtered data set
	Events: 1471664
	Sessions: 153383
	Items: 145045
	Span: 2014-01-03 / 2015-06-22


Full train set
	Events: 1469377
	Sessions: 153168
	Items: 145037
Test set
	Events: 2262
	Sessions: 215
	Items: 1841
Train set
	Events: 1466700
	Sessions: 152892
	Items: 145019
Validation set
	Events: 2634
	Sessions: 276
	Items: 2238
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>Done!
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>tree --du -h -C /content/nowplaying
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre><span class="ansi-blue-intense-fg ansi-bold">/content/nowplaying</span>
├── [ 96M]  <span class="ansi-blue-intense-fg ansi-bold">processed</span>
│   ├── [ 76K]  events_test.txt
│   ├── [ 48M]  events_train_full.txt
│   ├── [ 48M]  events_train_tr.txt
│   └── [ 89K]  events_train_valid.txt
└── [ 54M]  <span class="ansi-blue-intense-fg ansi-bold">raw</span>
    └── [ 54M]  nowplaying.csv

 150M used in 2 directories, 5 files
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>rm -r /content/nowplaying/processed/*
<span class="n">npdata</span> <span class="o">=</span> <span class="n">NowPlayingDataset</span><span class="p">(</span><span class="n">root</span><span class="o">=</span><span class="s1">&#39;/content/nowplaying&#39;</span><span class="p">,</span> <span class="n">process_method</span><span class="o">=</span><span class="s1">&#39;days_test&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>Processing...
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Loaded data set
	Events: 1587776
	Sessions: 156958
	Items: 258322
	Span: 2014-01-03 / 2015-06-22


Filtered data set
	Events: 1471664
	Sessions: 153383
	Items: 145045
	Span: 2014-01-03 / 2015-06-22


Full train set
	Events: 1459201
	Sessions: 152086
	Items: 144863
Test set
	Events: 11993
	Sessions: 1286
	Items: 8449
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>Done!
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>tree --du -h -C /content/nowplaying
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre><span class="ansi-blue-intense-fg ansi-bold">/content/nowplaying</span>
├── [ 48M]  <span class="ansi-blue-intense-fg ansi-bold">processed</span>
│   ├── [406K]  events_test.txt
│   └── [ 48M]  events_train_full.txt
└── [ 54M]  <span class="ansi-blue-intense-fg ansi-bold">raw</span>
    └── [ 54M]  nowplaying.csv

 102M used in 2 directories, 3 files
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>rm -r /content/nowplaying/processed/*
<span class="n">npdata</span> <span class="o">=</span> <span class="n">NowPlayingDataset</span><span class="p">(</span><span class="n">root</span><span class="o">=</span><span class="s1">&#39;/content/nowplaying&#39;</span><span class="p">,</span> <span class="n">process_method</span><span class="o">=</span><span class="s1">&#39;slice&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>Processing...
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Loaded data set
	Events: 1587776
	Sessions: 156958
	Items: 258322
	Span: 2014-01-03 / 2015-06-22


Filtered data set
	Events: 1471664
	Sessions: 153383
	Items: 145045
	Span: 2014-01-03 / 2015-06-22


Full data set 0
	Events: 1471664
	Sessions: 153383
	Items: 145045
	Span: 2014-01-03T00:56:05+00:00 / 2015-06-22T01:09:22+00:00
Slice data set 0
	Events: 181916
	Sessions: 19510
	Items: 57310
	Span: 2014-01-03 / 2014-04-03 / 2014-04-08
Train set 0
	Events: 162294
	Sessions: 17418
	Items: 53350
	Span: 2014-01-03 / 2014-04-03
Test set 0
	Events: 14641
	Sessions: 1930
	Items: 8273
	Span: 2014-04-03 / 2014-04-08 


Full data set 1
	Events: 1471664
	Sessions: 153383
	Items: 145045
	Span: 2014-01-03T00:56:05+00:00 / 2015-06-22T01:09:22+00:00
Slice data set 1
	Events: 306065
	Sessions: 33152
	Items: 76007
	Span: 2014-04-08 / 2014-07-07 / 2014-07-12
Train set 1
	Events: 289659
	Sessions: 31264
	Items: 73786
	Span: 2014-04-08 / 2014-07-07
Test set 1
	Events: 13730
	Sessions: 1812
	Items: 8835
	Span: 2014-07-07 / 2014-07-12 


Full data set 2
	Events: 1471664
	Sessions: 153383
	Items: 145045
	Span: 2014-01-03T00:56:05+00:00 / 2015-06-22T01:09:22+00:00
Slice data set 2
	Events: 313537
	Sessions: 31904
	Items: 75732
	Span: 2014-07-12 / 2014-10-10 / 2014-10-15
Train set 2
	Events: 297065
	Sessions: 30308
	Items: 73746
	Span: 2014-07-12 / 2014-10-10
Test set 2
	Events: 14148
	Sessions: 1535
	Items: 7955
	Span: 2014-10-10 / 2014-10-15 


Full data set 3
	Events: 1471664
	Sessions: 153383
	Items: 145045
	Span: 2014-01-03T00:56:05+00:00 / 2015-06-22T01:09:22+00:00
Slice data set 3
	Events: 217179
	Sessions: 22175
	Items: 64982
	Span: 2014-10-15 / 2015-01-13 / 2015-01-18
Train set 3
	Events: 217179
	Sessions: 22175
	Items: 64982
	Span: 2014-10-15 / 2015-01-13
Test set 3
	Events: 0
	Sessions: 0
	Items: 0
	Span: 2015-01-13 / 2015-01-18 


Full data set 4
	Events: 1471664
	Sessions: 153383
	Items: 145045
	Span: 2014-01-03T00:56:05+00:00 / 2015-06-22T01:09:22+00:00
Slice data set 4
	Events: 293509
	Sessions: 30423
	Items: 80761
	Span: 2015-01-18 / 2015-04-18 / 2015-04-23
Train set 4
	Events: 278156
	Sessions: 29059
	Items: 78269
	Span: 2015-01-18 / 2015-04-18
Test set 4
	Events: 12287
	Sessions: 1276
	Items: 8609
	Span: 2015-04-18 / 2015-04-23 


</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>Done!
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>tree --du -h -C /content/nowplaying
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre><span class="ansi-blue-intense-fg ansi-bold">/content/nowplaying</span>
├── [ 43M]  <span class="ansi-blue-intense-fg ansi-bold">processed</span>
│   ├── [486K]  events_test.0.txt
│   ├── [458K]  events_test.1.txt
│   ├── [474K]  events_test.2.txt
│   ├── [  36]  events_test.3.txt
│   ├── [415K]  events_test.4.txt
│   ├── [5.3M]  events_train_full.0.txt
│   ├── [9.5M]  events_train_full.1.txt
│   ├── [9.7M]  events_train_full.2.txt
│   ├── [7.1M]  events_train_full.3.txt
│   └── [9.2M]  events_train_full.4.txt
└── [ 54M]  <span class="ansi-blue-intense-fg ansi-bold">raw</span>
    └── [ 54M]  nowplaying.csv

  96M used in 2 directories, 11 files
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

