---

title: Config


keywords: fastai
sidebar: home_sidebar

summary: "A configurator module."
description: "A configurator module."
nb_path: "nbs/utils/config.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/utils/config.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="https://colab.research.google.com/github/RecoHut-Projects/recohut/blob/master/nbs/utils/config.ipynb" target="_parent"><img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"/></a></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Configurator" class="doc_header"><code>class</code> <code>Configurator</code><a href="https://github.com/RecoHut-Projects/recohut/tree/master/recohut/utils/config.py#L12" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Configurator</code>(<strong><code>config_file</code></strong>, <strong><code>default_section</code></strong>=<em><code>'default'</code></em>)</p>
</blockquote>
<p>A configurator class.
This class can read arguments from ini-style configuration file and parse
arguments from command line simultaneously. This class can also convert
the argument value from <code>str</code> to <code>int</code>, <code>float</code>, <code>bool</code>, <code>list</code> and <code>None</code>
automatically. The priority of arguments from command line is higher than
that from configuration file. That is, if there are same argument name in
configuration file and command line, the value in the former will be
overwritten by that in the latter. Moreover:</p>
<ul>
<li>Command line: The format of arguments is <code>--arg_name=arg_value</code>,
there cannot be any space in the inner of an argument string.
For example::
  python main.py --model=Pop --num_thread=128 --group_view=[10,30,50,100]</li>
<li>Configuration file: This file must be ini-style. If there is only one
section and whatever the name is, this class will read arguments from
that section. If there are more than one sections, this class will read
arguments from the section named <code>default_section</code>.
After initialization successful, the objective of this class can be used as
a dictionary::
  config = Configurator("./NeuRec.properties")
  num_thread = config["num_thread"]
  group_view = config["group_view"]
Here, the types of <code>num_thread</code> and <code>group_view</code> are <code>int</code> and <code>list</code>,
respectively.</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">unittest</span>


<span class="k">class</span> <span class="nc">TestConfigurator</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">conf_default</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">(</span><span class="s2">&quot;config.properties&quot;</span><span class="p">,</span> <span class="n">default_section</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">conf_mlp</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">(</span><span class="s2">&quot;config.properties&quot;</span><span class="p">,</span> <span class="n">default_section</span><span class="o">=</span><span class="s2">&quot;mlp&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">testRecommenderName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conf_default</span><span class="p">[</span><span class="s2">&quot;recommender&quot;</span><span class="p">],</span> <span class="s2">&quot;config_MF&quot;</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">testRecommenderNameType</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conf_default</span><span class="p">[</span><span class="s2">&quot;recommender&quot;</span><span class="p">])),</span> <span class="s2">&quot;&lt;class &#39;str&#39;&gt;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">testIntegerType</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conf_default</span><span class="p">[</span><span class="s2">&quot;epochs&quot;</span><span class="p">])),</span> <span class="s2">&quot;&lt;class &#39;int&#39;&gt;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">testListType</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conf_mlp</span><span class="p">[</span><span class="s2">&quot;layers&quot;</span><span class="p">])),</span> <span class="s2">&quot;&lt;class &#39;list&#39;&gt;&quot;</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">testUnwantedTypeConversion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conf_default</span><span class="p">[</span><span class="s2">&quot;batch_size&quot;</span><span class="p">])),</span> <span class="s2">&quot;&lt;class &#39;str&#39;&gt;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">testDefaultSectionValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conf_default</span><span class="p">[</span><span class="s2">&quot;epochs&quot;</span><span class="p">],</span> <span class="mi">300</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">testCustomSectionValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conf_mlp</span><span class="p">[</span><span class="s2">&quot;epochs&quot;</span><span class="p">],</span> <span class="mi">100</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">testListValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conf_mlp</span><span class="p">[</span><span class="s2">&quot;layers&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">32</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>


<span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">argv</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">],</span> <span class="n">verbosity</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">exit</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>testCustomSectionValue (__main__.TestConfigurator) ... ok
testDefaultSectionValue (__main__.TestConfigurator) ... ok
testIntegerType (__main__.TestConfigurator) ... ok
testListType (__main__.TestConfigurator) ... ok
testListValue (__main__.TestConfigurator) ... ok
testRecommenderName (__main__.TestConfigurator) ... ok
testRecommenderNameType (__main__.TestConfigurator) ... ok
testUnwantedTypeConversion (__main__.TestConfigurator) ... ok

----------------------------------------------------------------------
Ran 8 tests in 0.038s

OK
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;unittest.main.TestProgram at 0x7f4771c904d0&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Author: Sparsh A.

Last updated: 2021-12-05 09:19:00

Compiler    : GCC 7.5.0
OS          : Linux
Release     : 5.4.104+
Machine     : x86_64
Processor   : x86_64
CPU cores   : 2
Architecture: 64bit

sys    : 3.7.12 (default, Sep 10 2021, 00:21:48) 
[GCC 7.5.0]
IPython: 5.5.0

</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>

</div>
</div>
</div>
</div>
 

