---

title: AOTM dataset


keywords: fastai
sidebar: home_sidebar

summary: "AOTM dataset."
description: "AOTM dataset."
nb_path: "nbs/datasets/aotm.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/datasets/aotm.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="AOTMDataset" class="doc_header"><code>class</code> <code>AOTMDataset</code><a href="https://github.com/RecoHut-Projects/recohut/tree/master/recohut/datasets/aotm.py#L22" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>AOTMDataset</code>(<strong><code>root</code></strong>, <strong><code>process_method</code></strong>, <strong><code>min_session_length</code></strong>=<em><code>2</code></em>, <strong><code>min_item_support</code></strong>=<em><code>2</code></em>, <strong><code>num_slices</code></strong>=<em><code>5</code></em>, <strong><code>days_offset</code></strong>=<em><code>0</code></em>, <strong><code>days_shift</code></strong>=<em><code>95</code></em>, <strong><code>days_train</code></strong>=<em><code>90</code></em>, <strong><code>days_test</code></strong>=<em><code>5</code></em>) :: <a href="/recohut/base.html#SessionDataset"><code>SessionDataset</code></a></p>
</blockquote>
<p>Session data base class.</p>
<p>Args:
    min_session_length (int): Minimum number of items for a session to be valid
    min_item_support (int): Minimum number of interactions for an item to be valid
    eval_sec (int): these many seconds from the end will be taken as validation data</p>
<p>References:</p>

<pre><code>1. https://github.com/Ethan-Yys/GRU4REC-pytorch-master/blob/master/preprocessing.py</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>rm -r /content/aotm
<span class="n">aotmdata</span> <span class="o">=</span> <span class="n">AOTMDataset</span><span class="p">(</span><span class="n">root</span><span class="o">=</span><span class="s1">&#39;/content/aotm&#39;</span><span class="p">,</span> <span class="n">process_method</span><span class="o">=</span><span class="s1">&#39;last&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>Downloading https://github.com/RecoHut-Datasets/aotm/raw/v1/aotm.zip
Extracting /content/aotm/raw/aotm.zip
Processing...
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Loaded data set
	Events: 1821241
	Sessions: 93313
	Items: 765790
	Span: 2016-01-02 / 2016-12-30


Filtered data set
	Events: 1192938
	Sessions: 87654
	Items: 138815
	Span: 2016-01-02 / 2016-12-30


Full train set
	Events: 1189593
	Sessions: 87410
	Items: 138815
Test set
	Events: 3345
	Sessions: 244
	Items: 3105
Train set
	Events: 1185992
	Sessions: 87145
	Items: 138814
Validation set
	Events: 3600
	Sessions: 265
	Items: 3363
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>Done!
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>tree --du -h -C /content/aotm
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre><span class="ansi-blue-intense-fg ansi-bold">/content/aotm</span>
├── [ 83M]  <span class="ansi-blue-intense-fg ansi-bold">processed</span>
│   ├── [120K]  events_test.txt
│   ├── [ 42M]  events_train_full.txt
│   ├── [ 41M]  events_train_tr.txt
│   └── [129K]  events_train_valid.txt
└── [ 65M]  <span class="ansi-blue-intense-fg ansi-bold">raw</span>
    └── [ 65M]  playlists-aotm.csv

 149M used in 2 directories, 5 files
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>rm -r /content/aotm
<span class="n">aotmdata</span> <span class="o">=</span> <span class="n">AOTMDataset</span><span class="p">(</span><span class="n">root</span><span class="o">=</span><span class="s1">&#39;/content/aotm&#39;</span><span class="p">,</span> <span class="n">process_method</span><span class="o">=</span><span class="s1">&#39;days_test&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>Downloading https://github.com/RecoHut-Datasets/aotm/raw/v1/aotm.zip
Extracting /content/aotm/raw/aotm.zip
Processing...
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Loaded data set
	Events: 1821241
	Sessions: 93313
	Items: 765790
	Span: 2016-01-02 / 2016-12-30


Filtered data set
	Events: 1192938
	Sessions: 87654
	Items: 138815
	Span: 2016-01-02 / 2016-12-30


Full train set
	Events: 1176744
	Sessions: 86474
	Items: 138786
Test set
	Events: 16138
	Sessions: 1179
	Items: 12841
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>Done!
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>tree --du -h -C /content/aotm
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre><span class="ansi-blue-intense-fg ansi-bold">/content/aotm</span>
├── [ 42M]  <span class="ansi-blue-intense-fg ansi-bold">processed</span>
│   ├── [578K]  events_test.txt
│   └── [ 41M]  events_train_full.txt
└── [ 65M]  <span class="ansi-blue-intense-fg ansi-bold">raw</span>
    └── [ 65M]  playlists-aotm.csv

 107M used in 2 directories, 3 files
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>rm -r /content/aotm/processed/*
<span class="n">aotmdata</span> <span class="o">=</span> <span class="n">AOTMDataset</span><span class="p">(</span><span class="n">root</span><span class="o">=</span><span class="s1">&#39;/content/aotm&#39;</span><span class="p">,</span> <span class="n">process_method</span><span class="o">=</span><span class="s1">&#39;slice&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>Processing...
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Loaded data set
	Events: 1821241
	Sessions: 93313
	Items: 765790
	Span: 2016-01-02 / 2016-12-30


Filtered data set
	Events: 1192938
	Sessions: 87654
	Items: 138815
	Span: 2016-01-02 / 2016-12-30


Full data set 0
	Events: 1192938
	Sessions: 87654
	Items: 138815
	Span: 2016-01-02T23:00:00+00:00 / 2016-12-30T23:00:42+00:00
Slice data set 0
	Events: 315346
	Sessions: 23197
	Items: 95205
	Span: 2016-01-02 / 2016-04-01 / 2016-04-06
Train set 0
	Events: 298510
	Sessions: 21960
	Items: 92778
	Span: 2016-01-02 / 2016-04-01
Test set 0
	Events: 14333
	Sessions: 1213
	Items: 10851
	Span: 2016-04-01 / 2016-04-06 


Full data set 1
	Events: 1192938
	Sessions: 87654
	Items: 138815
	Span: 2016-01-02T23:00:00+00:00 / 2016-12-30T23:00:42+00:00
Slice data set 1
	Events: 310422
	Sessions: 22778
	Items: 94240
	Span: 2016-04-06 / 2016-07-05 / 2016-07-10
Train set 1
	Events: 294246
	Sessions: 21594
	Items: 91873
	Span: 2016-04-06 / 2016-07-05
Test set 1
	Events: 13733
	Sessions: 1163
	Items: 10441
	Span: 2016-07-05 / 2016-07-10 


Full data set 2
	Events: 1192938
	Sessions: 87654
	Items: 138815
	Span: 2016-01-02T23:00:00+00:00 / 2016-12-30T23:00:42+00:00
Slice data set 2
	Events: 309023
	Sessions: 22710
	Items: 94366
	Span: 2016-07-10 / 2016-10-08 / 2016-10-13
Train set 2
	Events: 292756
	Sessions: 21528
	Items: 91935
	Span: 2016-07-10 / 2016-10-08
Test set 2
	Events: 13747
	Sessions: 1155
	Items: 10553
	Span: 2016-10-08 / 2016-10-13 


Full data set 3
	Events: 1192938
	Sessions: 87654
	Items: 138815
	Span: 2016-01-02T23:00:00+00:00 / 2016-12-30T23:00:42+00:00
Slice data set 3
	Events: 258147
	Sessions: 18969
	Items: 86140
	Span: 2016-10-13 / 2017-01-11 / 2017-01-16
Train set 3
	Events: 258147
	Sessions: 18969
	Items: 86140
	Span: 2016-10-13 / 2017-01-11
Test set 3
	Events: 0
	Sessions: 0
	Items: 0
	Span: 2017-01-11 / 2017-01-16 


Full data set 4
	Events: 1192938
	Sessions: 87654
	Items: 138815
	Span: 2016-01-02T23:00:00+00:00 / 2016-12-30T23:00:42+00:00
Slice data set 4
	Events: 0
	Sessions: 0
	Items: 0
	Span: 2017-01-16 / 2017-04-16 / 2017-04-21
Train set 4
	Events: 0
	Sessions: 0
	Items: 0
	Span: 2017-01-16 / 2017-04-16
Test set 4
	Events: 0
	Sessions: 0
	Items: 0
	Span: 2017-04-16 / 2017-04-21 


</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>Done!
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>tree --du -h -C /content/aotm
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre><span class="ansi-blue-intense-fg ansi-bold">/content/aotm</span>
├── [ 41M]  <span class="ansi-blue-intense-fg ansi-bold">processed</span>
│   ├── [513K]  events_test.0.txt
│   ├── [491K]  events_test.1.txt
│   ├── [491K]  events_test.2.txt
│   ├── [  38]  events_test.3.txt
│   ├── [  38]  events_test.4.txt
│   ├── [ 10M]  events_train_full.0.txt
│   ├── [ 10M]  events_train_full.1.txt
│   ├── [ 10M]  events_train_full.2.txt
│   ├── [9.0M]  events_train_full.3.txt
│   └── [  38]  events_train_full.4.txt
└── [ 65M]  <span class="ansi-blue-intense-fg ansi-bold">raw</span>
    └── [ 65M]  playlists-aotm.csv

 107M used in 2 directories, 11 files
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

