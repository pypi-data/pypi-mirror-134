"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_organizationIntegrations_pluginDetailedView_tsx"],{"./app/views/organizationIntegrations/pluginDeprecationAlert.tsx":(t,e,n)=>{n.d(e,{Z:()=>u});var i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=n("../node_modules/react/index.js"),o=n("./app/components/alert.tsx"),a=n("./app/components/button.tsx"),r=n("./app/icons/index.tsx"),l=n("./app/locale.tsx"),c=n("./app/utils/integrationUtil.tsx"),p=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class d extends s.Component{render(){const{organization:t,plugin:e}=this.props;if(!e.deprecationDate)return(0,p.tZ)(s.Fragment,{});const n=e.altIsSentryApp?"sentry-apps":"integrations",i="/settings/".concat(t.slug,"/").concat(n,"/").concat(e.firstPartyAlternative,"/"),a="?".concat(e.altIsSentryApp?"":"tab=configurations&","referrer=directory_upgrade_now");return(0,p.tZ)("div",{children:(0,p.BX)(o.Z,{type:"warning",icon:(0,p.tZ)(r.FC,{size:"sm"}),children:[(0,p.tZ)("span",{children:"This integration is being deprecated on ".concat(e.deprecationDate,". Please upgrade to avoid any disruption.")}),(0,p.tZ)(g,{href:"".concat(i).concat(a),size:"xsmall",onClick:()=>(0,c.Db)("integrations.resolve_now_clicked",{integration_type:"plugin",integration:e.slug,organization:t}),children:(0,l.t)("Upgrade Now")})]})})}}d.displayName="PluginDeprecationAlert";const g=(0,i.Z)(a.ZP,{target:"e1otf8d90"})("color:",(t=>t.theme.subText),";float:right;"),u=d},"./app/views/organizationIntegrations/pluginDetailedView.tsx":(t,e,n)=>{n.r(e),n.d(e,{default:()=>S});var i=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/core-js/modules/es.symbol.description.js"),n("../node_modules/react/index.js")),a=n("./app/actionCreators/modal.tsx"),r=n("./app/components/button.tsx"),l=n("./app/components/contextPickerModal.tsx"),c=n("./app/locale.tsx"),p=n("./app/styles/space.tsx"),d=n("./app/utils/withOrganization.tsx"),g=n("./app/views/organizationIntegrations/abstractIntegrationDetailedView.tsx"),u=n("./app/actionCreators/indicator.tsx"),h=n("./app/components/acl/access.tsx"),m=n("./app/components/alert.tsx"),b=n("./app/components/confirm.tsx"),Z=n("./app/components/idBadge/projectBadge.tsx"),j=n("./app/components/switchButton.tsx"),x=n("./app/icons/index.tsx"),f=n("./app/utils/withApi.tsx"),y=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class w extends o.Component{constructor(...t){super(...t),(0,i.Z)(this,"pluginUpdate",(async(t,e="POST")=>{const{organization:n,projectItem:i,plugin:s}=this.props;await this.props.api.requestPromise("/projects/".concat(n.slug,"/").concat(i.projectSlug,"/plugins/").concat(s.id,"/"),{method:e,data:t})})),(0,i.Z)(this,"updatePluginEnableStatus",(async t=>{t?await this.pluginUpdate({enabled:t}):await this.pluginUpdate({},"DELETE")})),(0,i.Z)(this,"handleReset",(async()=>{try{(0,u.E3)((0,c.t)("Removing...")),await this.pluginUpdate({reset:!0}),(0,u.S9)((0,c.t)("Configuration was removed")),this.props.onResetConfiguration(this.projectId),this.props.trackIntegrationAnalytics("integrations.uninstall_completed")}catch(t){(0,u.Iw)((0,c.t)("Unable to remove configuration"))}})),(0,i.Z)(this,"handleUninstallClick",(()=>{this.props.trackIntegrationAnalytics("integrations.uninstall_clicked")})),(0,i.Z)(this,"toggleEnablePlugin",(async(t,e=!0)=>{try{(0,u.E3)((0,c.t)("Enabling...")),await this.updatePluginEnableStatus(e),(0,u.S9)(e?(0,c.t)("Configuration was enabled."):(0,c.t)("Configuration was disabled.")),this.props.onPluginEnableStatusChange(t,e),this.props.trackIntegrationAnalytics(e?"integrations.enabled":"integrations.disabled")}catch(t){(0,u.Iw)(e?(0,c.t)("Unable to enable configuration."):(0,c.t)("Unable to disable configuration."))}}))}get projectId(){return this.props.projectItem.projectId}getConfirmMessage(){return(0,y.tZ)(o.Fragment,{children:(0,y.tZ)(m.Z,{type:"error",icon:(0,y.tZ)(x.Gy,{size:"md"}),children:(0,c.t)("Deleting this installation will disable the integration for this project and remove any configurations.")})})}get projectForBadge(){const{projectItem:t}=this.props;return{slug:t.projectSlug,platform:t.projectPlatform?t.projectPlatform:void 0}}render(){const{className:t,plugin:e,organization:n,projectItem:i}=this.props;return(0,y.tZ)(v,{children:(0,y.tZ)(h.Z,{access:["org:integrations"],children:({hasAccess:s})=>(0,y.BX)(P,{className:t,children:[(0,y.tZ)(_,{children:(0,y.tZ)(Z.Z,{project:this.projectForBadge})}),(0,y.tZ)("div",{children:(0,y.tZ)(C,{borderless:!0,icon:(0,y.tZ)(x.iC,{}),disabled:!s,to:"/settings/".concat(n.slug,"/projects/").concat(i.projectSlug,"/plugins/").concat(e.id,"/"),"data-test-id":"integration-configure-button",children:(0,c.t)("Configure")})}),(0,y.tZ)("div",{children:(0,y.tZ)(b.Z,{priority:"danger",onConfirming:this.handleUninstallClick,disabled:!s,confirmText:"Delete Installation",onConfirm:()=>this.handleReset(),message:this.getConfirmMessage(),children:(0,y.tZ)(C,{disabled:!s,borderless:!0,icon:(0,y.tZ)(x.Fz,{}),"data-test-id":"integration-remove-button",children:(0,c.t)("Uninstall")})})}),(0,y.tZ)(j.Z,{isActive:i.enabled,toggle:()=>this.toggleEnablePlugin(i.projectId,!i.enabled),isDisabled:!s})]})})})}}w.displayName="InstalledPlugin";const I=(0,f.Z)(w),v=(0,s.Z)("div",{target:"emrs3rl3"})("padding:",(0,p.Z)(2),";border:1px solid ",(t=>t.theme.border),";border-bottom:none;background-color:",(t=>t.theme.background),";&:last-child{border-bottom:1px solid ",(t=>t.theme.border),";}"),C=(0,s.Z)(r.ZP,{target:"emrs3rl2"})("color:",(t=>t.theme.gray300),";"),P=(0,s.Z)("div",{target:"emrs3rl1"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),_=(0,s.Z)("div",{target:"emrs3rl0"})({name:"b6ci67",styles:"flex:1;box-sizing:border-box;display:flex;flex-direction:row;min-width:0"});var k=n("./app/views/organizationIntegrations/pluginDeprecationAlert.tsx");class z extends g.Z{constructor(...t){super(...t),(0,i.Z)(this,"handleResetConfiguration",(t=>{const e=this.plugin.projectList.slice(),n=e.findIndex((e=>e.projectId===t));n<0||(e.splice(n,1),this.setState({plugins:[{...this.state.plugins[0],projectList:e}]}))})),(0,i.Z)(this,"handlePluginEnableStatus",((t,e=!0)=>{const n=this.plugin.projectList.slice(),i=n.findIndex((e=>e.projectId===t));i<0||(n[i]={...n[i],enabled:e},this.setState({plugins:[{...this.state.plugins[0],projectList:n}]}))})),(0,i.Z)(this,"handleAddToProject",(()=>{const t=this.plugin,{organization:e,router:n}=this.props;this.trackIntegrationAnalytics("integrations.plugin_add_to_project_clicked"),a.openModal((i=>(0,y.tZ)(l.Z,{...i,nextPath:"/settings/".concat(e.slug,"/projects/:projectId/plugins/").concat(t.id,"/"),needProject:!0,needOrg:!1,onFinish:t=>{i.closeModal(),n.push(t)}})),{allowClickClose:!1})}))}getEndpoints(){const{orgId:t,integrationSlug:e}=this.props.params;return[["plugins","/organizations/".concat(t,"/plugins/configs/?plugins=").concat(e)]]}get integrationType(){return"plugin"}get plugin(){return this.state.plugins[0]}get description(){return this.plugin.description||""}get author(){var t;return null===(t=this.plugin.author)||void 0===t?void 0:t.name}get resourceLinks(){return this.plugin.resourceLinks||[]}get installationStatus(){return this.plugin.projectList.length>0?"Installed":"Not Installed"}get integrationName(){return"".concat(this.plugin.name).concat(this.plugin.isHidden?" (Legacy)":"")}get featureData(){return this.plugin.featureDescriptions}getTabDisplay(t){return"configurations"===t?"project configurations":"overview"}renderTopButton(t,e){return e?(0,y.tZ)(A,{"data-test-id":"install-button",disabled:t,onClick:this.handleAddToProject,size:"small",priority:"primary",children:(0,c.t)("Add to Project")}):this.renderRequestIntegrationButton()}renderConfigurations(){const t=this.plugin,{organization:e}=this.props;return t.projectList.length?(0,y.BX)(o.Fragment,{children:[(0,y.tZ)(k.Z,{organization:e,plugin:t}),(0,y.tZ)("div",{children:t.projectList.map((n=>(0,y.tZ)(I,{organization:e,plugin:t,projectItem:n,onResetConfiguration:this.handleResetConfiguration,onPluginEnableStatusChange:this.handlePluginEnableStatus,trackIntegrationAnalytics:this.trackIntegrationAnalytics},n.projectId)))})]}):this.renderEmptyConfigurations()}}const A=(0,s.Z)(r.ZP,{target:"e13hh9ci0"})("margin-bottom:",(0,p.Z)(1),";"),S=(0,d.Z)(z)}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationIntegrations_pluginDetailedView_tsx.b90493e717f38fbd58418f320ddde8b7.js.map