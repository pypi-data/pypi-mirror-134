"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_components_modals_diffModal_tsx"],{"./app/components/events/interfaces/crashContent/stackTrace/rawContent.tsx":(e,t,n)=>{n.d(t,{ZP:()=>a}),n("../node_modules/core-js/modules/es.array.reverse.js");var o=n("./app/components/events/interfaces/frame/utils.tsx"),s=n("./app/utils.tsx");function i(e){let t="";return(0,s.ri)(e.filename)?t+='  File "'+e.filename+'"':(0,s.ri)(e.module)?t+='  Module "'+e.module+'"':t+="  ?",(0,s.ri)(e.lineNo)&&e.lineNo>=0&&(t+=", line "+e.lineNo),(0,s.ri)(e.colNo)&&e.colNo>=0&&(t+=", col "+e.colNo),(0,s.ri)(e.function)&&(t+=", in "+e.function),(0,s.ri)(e.context)&&e.context.forEach((n=>{n[0]===e.lineNo&&(t+="\n    "+(0,s.fy)(n[1]))})),t}function r(e,t){return e+Array(Math.max(0,t-e.length)+1).join(" ")}function a(e,t,n){var a;const c=[];return(null!==(a=null==e?void 0:e.frames)&&void 0!==a?a:[]).forEach(((e,n)=>{c.push(function(e,t,n){switch(e.platform&&(n=e.platform),n){case"javascript":return function(e){let t="";return(0,s.ri)(e.function)?t+="  at "+e.function+"(":t+="  at ? (",(0,s.ri)(e.filename)?t+=e.filename:(0,s.ri)(e.module)&&(t+=e.module),(0,s.ri)(e.lineNo)&&e.lineNo>=0&&(t+=":"+e.lineNo),(0,s.ri)(e.colNo)&&e.colNo>=0&&(t+=":"+e.colNo),t+=")",t}(e);case"ruby":return function(e){let t="  from ";return(0,s.ri)(e.filename)?t+=e.filename:(0,s.ri)(e.module)?t+="("+e.module+")":t+="?",(0,s.ri)(e.lineNo)&&e.lineNo>=0&&(t+=":"+e.lineNo),(0,s.ri)(e.colNo)&&e.colNo>=0&&(t+=":"+e.colNo),(0,s.ri)(e.function)&&(t+=":in `"+e.function+"'"),t}(e);case"php":return function(e,t){const n="null"===e.function?"{main}":e.function;return"#".concat(t," ").concat(e.filename||e.module,"(").concat(e.lineNo,"): ").concat(n)}(e,t);case"python":return i(e);case"java":return function(e){let t="    at";return(0,s.ri)(e.module)&&(t+=" "+e.module+"."),(0,s.ri)(e.function)&&(t+=e.function),(0,s.ri)(e.filename)&&(t+="("+e.filename,(0,s.ri)(e.lineNo)&&e.lineNo>=0&&(t+=":"+e.lineNo),t+=")"),t}(e);case"objc":case"cocoa":case"native":return function(e){let t="  ";return(0,s.ri)(e.package)&&(t+=r((0,o.Q6)(e.package),20)),(0,s.ri)(e.instructionAddr)&&(t+=r(e.instructionAddr,12)),t+=" "+(e.function||e.symbolAddr),(0,s.ri)(e.filename)&&(t+=" ("+e.filename,(0,s.ri)(e.lineNo)&&e.lineNo>=0&&(t+=":"+e.lineNo),t+=")"),t}(e);default:return i(e)}}(e,n,t))})),"python"!==t&&c.reverse(),n&&c.unshift(function(e,t){switch(t){case"java":return function(e){let t="".concat(e.type,": ").concat(e.value);return e.module&&(t="".concat(e.module,".").concat(t)),t}(e);default:return e.type+": "+e.value}}(n,t)),c.join("\n")}},"./app/components/events/interfaces/frame/utils.tsx":(e,t,n)=>{n.d(t,{Q6:()=>c,Xf:()=>l,XQ:()=>u,c$:()=>d,IY:()=>p,H5:()=>f,uI:()=>m,C4:()=>h,IR:()=>g}),n("../node_modules/core-js/modules/es.string.replace.js");var o=n("./app/icons/index.tsx"),s=n("./app/locale.tsx"),i=n("./app/utils.tsx"),r=n("./app/components/events/interfaces/types.tsx");if("app"==n.j)var a=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function c(e){const t=e.split(/^([a-z]:\\|\\\\)/i.test(e)?"\\":"/");return(t[t.length-1]||t[t.length-2]||e).replace(/\.(dylib|so|a|dll|exe)$/,"")}function l(e,t){return e||t}function u(e){const{symbolicatorStatus:t}=e,n=e.function||"<unknown>",i=(0,a.tZ)(o.BS,{size:"xs",color:"#2c45a8"}),c=(0,a.tZ)(o.FC,{size:"xs",color:"red300"});if(n.match(/^@objc\s/))return[(0,s.t)("Objective-C -> Swift shim frame"),i];if(n.match(/^__?hidden#\d+/))return[(0,s.t)("Hidden function from bitcode build"),c];if(!t&&"<unknown>"===n)return[(0,s.t)("No function name was supplied by the client SDK."),i];if("<unknown>"===n||"<redacted>"===n&&t===r.i.MISSING_SYMBOL)switch(t){case r.i.MISSING_SYMBOL:return[(0,s.t)("The symbol was not found within the debug file."),i];case r.i.UNKNOWN_IMAGE:return[(0,s.t)("No image is specified for the address of the frame."),i];case r.i.MISSING:return[(0,s.t)("The debug file could not be retrieved from any of the sources."),c];case r.i.MALFORMED:return[(0,s.t)("The retrieved debug file could not be processed."),c]}return"<redacted>"===n?[(0,s.t)("Unknown system frame. Usually from beta SDKs"),i]:[null,null]}function d(e){return"csharp"===e}function p(e){return(0,i.ri)(e.context)&&!!e.context.length}function f(e){return!(0,i.z)(e.vars||{})}function m(e){return!(0,i.z)(e)}function h(e,t){return d(l(e.platform,null!=t?t:"other"))&&(0,i.ri)(e.package)}function g({frame:e,registers:t,emptySourceNotation:n,platform:o,isOnlyFrame:s}){return!s&&n||p(e)||f(e)||m(t)||h(e,o)}},"./app/components/events/interfaces/types.tsx":(e,t,n)=>{let o;n.d(t,{i:()=>o}),function(e){e.SYMBOLICATED="symbolicated",e.MISSING_SYMBOL="missing_symbol",e.UNKNOWN_IMAGE="unknown_image",e.MISSING="missing",e.MALFORMED="malformed"}(o||(o={}))},"./app/components/modals/diffModal.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>_,modalCss:()=>w});var o=n("../node_modules/react/index.js"),s=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/@emotion/is-prop-valid/dist/is-prop-valid.browser.esm.js")),a=n("./app/actionCreators/indicator.tsx"),c=n("./app/components/button.tsx"),l=n("./app/components/buttonBar.tsx"),u=n("./app/components/loadingIndicator.tsx"),d=n("./app/locale.tsx"),p=n("./app/styles/space.tsx"),f=n("./app/utils/getStacktraceBody.tsx"),m=n("./app/utils/withApi.tsx");function h(e){const t=[(0,d.t)("Type: %s",e.type)];e.hash&&t.push((0,d.t)("Hash: %s",e.hash)),e.description&&t.push((0,d.t)("Description: %s",e.description));const n=[t.join("\n")];return e.component&&n.push(g(e.component).join("\n")),n}function g(e){if(!e.contributes)return[];const{name:t,id:n,hint:o}=e,s=t||n,i=s&&o?"".concat(s," (").concat(o,")"):s,r=i?[i]:[];if(e.values)for(const t of e.values)if("string"!=typeof t)for(const e of g(t))r.push("  ".concat(e));else r.push("  ".concat(t));return r}n("../node_modules/core-js/modules/es.symbol.description.js");var v=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class x extends o.Component{constructor(...e){super(...e),(0,s.Z)(this,"state",{loading:!0,groupingDiff:!1,baseEvent:[],targetEvent:[],SplitDiffAsync:void 0}),(0,s.Z)(this,"toggleDiffMode",(()=>{this.setState((e=>({groupingDiff:!e.groupingDiff,loading:!0})),this.fetchData)})),(0,s.Z)(this,"fetchEventData",(async(e,t)=>{const{orgId:n,project:o,api:s}=this.props,{groupingDiff:i}=this.state;let r=t;if("latest"===t&&(r=(await s.requestPromise("/issues/".concat(e,"/events/latest/"))).eventID),i){return function(e){return Object.values(e).map(h).flat()}(await s.requestPromise("/projects/".concat(n,"/").concat(o.slug,"/events/").concat(r,"/grouping-info/")))}const a=await s.requestPromise("/projects/".concat(n,"/").concat(o.slug,"/events/").concat(r,"/"));return(0,f.Z)(a)}))}componentDidMount(){this.fetchData()}fetchData(){const{baseIssueId:e,targetIssueId:t,baseEventId:o,targetEventId:s}=this.props;Promise.all([Promise.all([n.e("vendors-node_modules_diff_lib_index_mjs"),n.e("app_components_splitDiff_tsx")]).then(n.bind(n,"./app/components/splitDiff.tsx")),this.fetchEventData(e,null!=o?o:"latest"),this.fetchEventData(t,null!=s?s:"latest")]).then((([{default:e},t,n])=>{this.setState({SplitDiffAsync:e,baseEvent:t,targetEvent:n,loading:!1})})).catch((()=>{(0,a.Iw)((0,d.t)("Error loading events"))}))}render(){const{className:e,project:t}=this.props,{SplitDiffAsync:n,loading:o,groupingDiff:s,baseEvent:i,targetEvent:r}=this.state,a=t.features.includes("similarity-view-v2");return(0,v.BX)(y,{className:e,loading:o,children:[o&&(0,v.tZ)(u.Z,{}),!o&&a&&(0,v.tZ)(N,{children:(0,v.BX)(l.ZP,{merged:!0,active:s?"grouping":"event",children:[(0,v.tZ)(c.ZP,{barId:"event",size:"small",onClick:this.toggleDiffMode,children:(0,d.t)("Diff stack trace and message")}),(0,v.tZ)(c.ZP,{barId:"grouping",size:"small",onClick:this.toggleDiffMode,children:(0,d.t)("Diff grouping information")})]})}),!o&&n&&i.map(((e,t)=>{var o;return(0,v.tZ)(n,{base:e,target:null!==(o=r[t])&&void 0!==o?o:"",type:"words"},t)}))]})}}x.displayName="IssueDiff",(0,s.Z)(x,"defaultProps",{baseEventId:"latest",targetEventId:"latest"});const b=(0,m.Z)(x),y=(0,i.Z)("div",{shouldForwardProp:e=>"string"==typeof e&&(0,r.Z)(e)&&"loading"!==e,target:"ectlbkf1"})("background-color:",(e=>e.theme.backgroundSecondary),";overflow:auto;padding:",(0,p.Z)(1),";flex:1;display:flex;flex-direction:column;",(e=>e.loading&&"\n        background-color: ".concat(e.theme.background,";\n        justify-content: center;\n        align-items: center;\n      ")),";"),N=(0,i.Z)("div",{target:"ectlbkf0"})("display:flex;align-items:center;margin-bottom:",(0,p.Z)(2),";"),j=({className:e,Body:t,CloseButton:n,...o})=>(0,v.BX)(t,{children:[(0,v.tZ)(n,{}),(0,v.tZ)(b,{className:e,...o})]});j.displayName="DiffModal";const w={name:"1s9ys09",styles:"position:absolute;left:20px;right:20px;top:20px;bottom:20px;display:flex;padding:0;width:auto;[role='document']{overflow:scroll;height:100%;display:flex;flex:1;}section{display:flex;width:100%;}"},_=j},"./app/utils/getStacktraceBody.tsx":(e,t,n)=>{n.d(t,{Z:()=>s}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var o=n("./app/components/events/interfaces/crashContent/stackTrace/rawContent.tsx");function s(e){if(!e||!e.entries)return[];const t=e.entries.find((({type:e})=>"exception"===e));if(!t){var n;const t=e.entries.find((({type:e})=>"message"===e));return t?(null==t||null===(n=t.data)||void 0===n?void 0:n.formatted)&&[t.data.formatted]:[]}return t.data?t.data.values.filter((e=>!!e.stacktrace)).map((t=>(0,o.ZP)(t.stacktrace,e.platform,t))).reduce(((e,t)=>e.concat(t)),[]):[]}},"./app/utils/useApi.tsx":(e,t,n)=>{n.d(t,{Z:()=>i});var o=n("../node_modules/react/index.js"),s=n("./app/api.tsx");const i=function({persistInFlight:e,api:t}={}){const n=(0,o.useRef)();void 0===n.current&&void 0===t&&(n.current=new s.KU);const i=null!=t?t:n.current;function r(){!e&&i.clear()}return(0,o.useEffect)((()=>r),[]),i}},"./app/utils/withApi.tsx":(e,t,n)=>{n.d(t,{Z:()=>r});var o=n("./app/utils/getDisplayName.tsx"),s=n("./app/utils/useApi.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const r=(e,t={})=>{const n=({api:n,...o})=>{const r=(0,s.Z)({api:n,...t});return(0,i.tZ)(e,{...o,api:r})};return n.displayName="withApi(".concat((0,o.Z)(e),")"),n}}}]);
//# sourceMappingURL=../sourcemaps/app_components_modals_diffModal_tsx.714da24b0c80d82ca6266c186b39b983.js.map