"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_components_banner_tsx-app_views_eventsV2_savedQuery_utils_tsx"],{"./app/actionCreators/discoverSavedQueries.tsx":(e,t,a)=>{a.d(t,{Yi:()=>o,GH:()=>i,M6:()=>d,EQ:()=>c,qF:()=>u}),a("../node_modules/core-js/modules/es.string.trim.js");var s=a("./app/actionCreators/indicator.tsx"),r=a("./app/api.tsx"),n=a("./app/locale.tsx");function o(e,t,a){const r=e.requestPromise("/organizations/".concat(t,"/discover/saved/").concat(a,"/"),{method:"GET"});return r.catch((()=>{(0,s.Iw)((0,n.t)("Unable to load saved query"))})),r}function i(e,t,a){const r=e.requestPromise("/organizations/".concat(t,"/discover/saved/"),{method:"POST",data:a});return r.catch((()=>{(0,s.Iw)((0,n.t)("Unable to create your saved query"))})),r}function d(e,t,a){const r=e.requestPromise("/organizations/".concat(t,"/discover/saved/").concat(a.id,"/"),{method:"PUT",data:a});return r.catch((()=>{(0,s.Iw)((0,n.t)("Unable to update your saved query"))})),r}function c(e,t){return(new r.KU).requestPromise("/organizations/".concat(e,"/discover/saved/").concat(t,"/visit/"),{method:"POST"})}function u(e,t,a){const r=e.requestPromise("/organizations/".concat(t,"/discover/saved/").concat(a,"/"),{method:"DELETE"});return r.catch((()=>{(0,s.Iw)((0,n.t)("Unable to delete the saved query"))})),r}},"./app/components/banner.tsx":(e,t,a)=>{a.d(t,{Z:()=>w});var s=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(a("../node_modules/core-js/modules/web.dom-collections.iterator.js"),a("../node_modules/react/index.js")),n=a("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),o=a("./app/components/button.tsx"),i=a("./app/components/buttonBar.tsx"),d=a("./app/icons/index.tsx"),c=a("./app/locale.tsx"),u=a("./app/styles/space.tsx"),v=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=e=>"".concat(e,"-banner-dismissed");function p(e){localStorage.setItem(l(e),"true")}const m=({title:e,subtitle:t,isDismissable:a=!0,dismissKey:s="generic-banner",className:n,backgroundImg:o,backgroundComponent:i,children:d})=>{const[u,m]=function(e){const t=l(e),[a,s]=r.useState(localStorage.getItem(t));return["true"===a,()=>{s("true"),p(e)}]}(s);return u?null:(0,v.BX)(y,{backgroundImg:o,className:n,children:[i,a?(0,v.tZ)(b,{onClick:m,"aria-label":(0,c.t)("Close")}):null,(0,v.BX)(_,{children:[(0,v.tZ)(g,{children:e}),(0,v.tZ)(q,{children:t}),(0,v.tZ)(h,{gap:1,children:d})]})]})};m.displayName="Banner",m.dismiss=p;const y=(0,s.Z)("div",{target:"e8az5815"})((e=>e.backgroundImg?(0,n.iv)("background:url(",e.backgroundImg,");background-repeat:no-repeat;background-size:cover;background-position:center center;",""):(0,n.iv)("background-color:",e.theme.gray500,";",""))," display:flex;overflow:hidden;align-items:center;justify-content:center;position:relative;margin-bottom:",(0,u.Z)(2),";box-shadow:",(e=>e.theme.dropShadowLight),";border-radius:",(e=>e.theme.borderRadius),";height:180px;color:",(e=>e.theme.white),";@media (min-width: ",(e=>e.theme.breakpoints[0]),"){height:220px;}"),_=(0,s.Z)("div",{target:"e8az5814"})("position:absolute;display:grid;justify-items:center;grid-template-rows:repeat(3, max-content);text-align:center;padding:",(0,u.Z)(4),";"),g=(0,s.Z)("h1",{target:"e8az5813"})("margin:0;@media (min-width: ",(e=>e.theme.breakpoints[0]),"){font-size:40px;}"),q=(0,s.Z)("div",{target:"e8az5812"})("margin:0;@media (min-width: ",(e=>e.theme.breakpoints[0]),"){font-size:",(e=>e.theme.fontSizeExtraLarge),";}"),h=(0,s.Z)(i.ZP,{target:"e8az5811"})("margin-top:",(0,u.Z)(2),";width:fit-content;"),b=(0,s.Z)(o.ZP,{target:"e8az5810"})("position:absolute;display:block;top:",(0,u.Z)(2),";right:",(0,u.Z)(2),";color:",(e=>e.theme.white),";cursor:pointer;z-index:1;");b.defaultProps={icon:(0,v.tZ)(d.bM,{}),label:(0,c.t)("Close"),priority:"link",borderless:!0,size:"xsmall"};const w=m},"./app/views/dashboardsV2/types.tsx":(e,t,a)=>{a.d(t,{ZU:()=>s,FO:()=>r,l9:()=>n,n3:()=>o,EN:()=>i});const s=30;let r,n,o,i;!function(e){e.AREA="area",e.BAR="bar",e.LINE="line",e.TABLE="table",e.WORLD_MAP="world_map",e.BIG_NUMBER="big_number",e.STACKED_AREA="stacked_area",e.TOP_N="top_n"}(r||(r={})),function(e){e.DISCOVER="discover",e.ISSUE="issue"}(n||(n={})),function(e){e.VIEW="view",e.EDIT="edit",e.CREATE="create",e.PENDING_DELETE="pending_delete",e.PREVIEW="preview"}(o||(o={})),function(e){e.DISCOVERV2="discoverv2",e.DASHBOARDS="dashboards",e.LIBRARY="library",e.ISSUE_DETAILS="issueDetail"}(i||(i={}))},"./app/views/eventsV2/savedQuery/utils.tsx":(e,t,a)=>{a.d(t,{b2:()=>c,O$:()=>l,pb:()=>p,Uc:()=>m,zz:()=>g});var s=a("./app/actionCreators/discoverSavedQueries.tsx"),r=a("./app/actionCreators/indicator.tsx"),n=a("./app/locale.tsx"),o=a("./app/utils/analytics.tsx"),i=a("./app/utils/discover/types.tsx"),d=a("./app/views/dashboardsV2/types.tsx");function c(e,t,a,i,d=!0){const c=a.toNewQuery();c.yAxis=i,(0,o.ec)({...y(d,"request"),organization_id:parseInt(t.id,10),..._(c)});const u=(0,s.GH)(e,t.slug,c);return u.then((e=>((0,r.S9)((0,n.t)("Query saved")),(0,o.ec)({...y(d,"success"),organization_id:parseInt(t.id,10),..._(c)}),e))).catch((e=>{(0,r.Iw)((0,n.t)("Query not saved")),(0,o.ec)({...y(d,"failed"),organization_id:parseInt(t.id,10),..._(c),error:e&&e.message||"Could not save a ".concat(d?"new":"existing"," query")})})),u}const u={request:"Discoverv2: Request to save a saved query as a new query",success:"Discoverv2: Successfully saved a saved query as a new query",failed:"Discoverv2: Failed to save a saved query as a new query"},v={request:"Discoverv2: Request to save a new query",success:"Discoverv2: Successfully saved a new query",failed:"Discoverv2: Failed to save a new query"};function l(e,t,a,i){const d=a.toNewQuery();if(d.yAxis=i,!a.name)return(0,r.Iw)((0,n.t)("Please name your query")),Promise.reject();(0,o.ec)({eventKey:"discover_v2.update_query_request",eventName:"Discoverv2: Request to update a saved query",organization_id:parseInt(t.id,10),..._(d)});const c=(0,s.M6)(e,t.slug,d);return c.then((e=>((0,r.S9)((0,n.t)("Query updated")),(0,o.ec)({eventKey:"discover_v2.update_query_success",eventName:"Discoverv2: Successfully updated a saved query",organization_id:parseInt(t.id,10),..._(d)}),e))).catch((e=>{(0,r.Iw)((0,n.t)("Query not updated")),(0,o.ec)({eventKey:"discover_v2.update_query_failed",eventName:"Discoverv2: Failed to update a saved query",organization_id:parseInt(t.id,10),..._(d),error:e&&e.message||"Failed to update a query"})})),c}function p(e,t,a){const i=a.toNewQuery();(0,o.ec)({eventKey:"discover_v2.update_query_name_request",eventName:"Discoverv2: Request to update a saved query's name",organization_id:parseInt(t.id,10),..._(i)});const d=(0,s.M6)(e,t.slug,i);return d.then((e=>{(0,r.S9)((0,n.t)("Query name saved")),(0,o.ec)({eventKey:"discover_v2.update_query_name_success",eventName:"Discoverv2: Successfully updated a saved query's name",organization_id:parseInt(t.id,10),..._(i)})})).catch((e=>{(0,r.Iw)((0,n.t)("Query name not saved")),(0,o.ec)({eventKey:"discover_v2.update_query_failed",eventName:"Discoverv2: Failed to update a saved query's name",organization_id:parseInt(t.id,10),..._(i),error:e&&e.message||"Failed to update a query name"})})),d}function m(e,t,a){(0,o.ec)({eventKey:"discover_v2.delete_query_request",eventName:"Discoverv2: Request to delete a saved query",organization_id:parseInt(t.id,10),..._(a.toNewQuery())});const i=(0,s.qF)(e,t.slug,a.id);return i.then((()=>{(0,r.S9)((0,n.t)("Query deleted")),(0,o.ec)({eventKey:"discover_v2.delete_query_success",eventName:"Discoverv2: Successfully deleted a saved query",organization_id:parseInt(t.id,10),..._(a.toNewQuery())})})).catch((e=>{(0,r.Iw)((0,n.t)("Query not deleted")),(0,o.ec)({eventKey:"discover_v2.delete_query_failed",eventName:"Discoverv2: Failed to delete a saved query",organization_id:parseInt(t.id,10),..._(a.toNewQuery()),error:e&&e.message||"Failed to delete query"})})),i}function y(e,t){return{eventKey:e?"discover_v2.save_new_query_"+t:"discover_v2.save_existing_query_"+t,eventName:e?v[t]:u[t]}}function _(e){const{projects:t,fields:a,query:s}=e;return{projects:t,fields:a,query:s}}function g(e){switch(e){case i.DC.BAR:return d.FO.BAR;case i.DC.WORLDMAP:return d.FO.WORLD_MAP;case i.DC.TOP5:return d.FO.TOP_N;default:return d.FO.LINE}}}}]);
//# sourceMappingURL=../sourcemaps/app_components_banner_tsx-app_views_eventsV2_savedQuery_utils_tsx.90ecc7a2d83070b72a79948975c9fc24.js.map