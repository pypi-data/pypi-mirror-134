"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_projectGeneralSettings_tsx"],{"./app/utils/recreateRoute.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("../node_modules/lodash/findLastIndex.js"),n=s.n(r),o=s("./app/utils/replaceRouterParams.tsx");function i(e,t){var s,r;const{routes:i,params:a,location:c,stepBack:l}=t,d=i.map((({path:e})=>e||""));let p,h;"string"!=typeof e?(h=i.indexOf(e)+1,p=n()(d.slice(0,h),(e=>"/"===e[0]))):p=n()(d,(e=>"/"===e[0]));let m=d.slice(p,h);void 0!==l&&(m=m.slice(0,l));const u=null!==(s=null==c?void 0:c.search)&&void 0!==s?s:"",g=null!==(r=null==c?void 0:c.hash)&&void 0!==r?r:"",j="".concat(m.join("")).concat("string"!=typeof e?"":e).concat(u).concat(g);return(0,o.Z)(j,a)}},"./app/utils/routeTitle.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});const r=function(e,t,s=!0,r){const n="".concat(e," - ").concat(t),o=r?"".concat(n," - ").concat(r):n;return s?"".concat(o," - Sentry"):o}},"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>i}),s("../node_modules/react/index.js");var r=s("./app/components/asyncComponent.tsx"),n=s("./app/components/sentryDocumentTitle.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class i extends r.Z{getTitle(){return""}render(){return(0,o.tZ)(n.Z,{title:this.getTitle(),children:this.renderComponent()})}}i.displayName="AsyncView"},"./app/views/settings/project/permissionAlert.tsx":(e,t,s)=>{s.d(t,{Z:()=>l}),s("../node_modules/react/index.js");var r=s("./app/components/acl/access.tsx"),n=s("./app/components/alert.tsx"),o=s("./app/icons/index.tsx"),i=s("./app/locale.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const c=({access:e=["project:write"],...t})=>(0,a.tZ)(r.Z,{access:e,children:({hasAccess:e})=>!e&&(0,a.tZ)(n.Z,{type:"warning",icon:(0,a.tZ)(o.FC,{size:"xs"}),...t,children:(0,i.t)("These settings can only be edited by users with the organization owner, manager, or admin role.")})});c.displayName="PermissionAlert";const l=c},"./app/views/settings/projectGeneralSettings.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/react/index.js")),o=s("../node_modules/react-router/es/index.js"),i=s("./app/actionCreators/projects.tsx"),a=s("./app/actions/projectActions.tsx"),c=s("./app/components/button.tsx"),l=s("./app/components/confirm.tsx"),d=s("./app/components/organizations/pageFilters/utils.tsx"),p=s("./app/components/panels/index.tsx"),h=s("./app/data/forms/projectGeneralSettings.tsx"),m=s("./app/locale.tsx"),u=s("./app/stores/projectsStore.tsx"),g=s("./app/utils/handleXhrErrorResponse.tsx"),j=s("./app/utils/recreateRoute.tsx"),Z=s("./app/utils/routeTitle.tsx"),f=s("./app/utils/withOrganization.tsx"),v=s("./app/views/asyncView.tsx"),x=s("./app/views/settings/components/forms/field/index.tsx"),w=s("./app/views/settings/components/forms/form.tsx"),b=s("./app/views/settings/components/forms/jsonForm.tsx"),y=s("./app/views/settings/components/forms/textField.tsx"),P=s("./app/views/settings/components/settingsPageHeader.tsx"),S=s("./app/views/settings/components/text/textBlock.tsx"),T=s("./app/views/settings/project/permissionAlert.tsx"),_=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class C extends v.Z{constructor(...e){super(...e),(0,r.Z)(this,"_form",{}),(0,r.Z)(this,"handleTransferFieldChange",((e,t)=>{this._form[e]=t})),(0,r.Z)(this,"handleRemoveProject",(()=>{const{orgId:e}=this.props.params,t=this.state.data;(0,d.tB)(e),t&&(0,i.rR)(this.api,e,t).then((()=>{window.location.assign("/")}),(0,g.Z)("Unable to remove project"))})),(0,r.Z)(this,"handleTransferProject",(async()=>{const{orgId:e}=this.props.params,t=this.state.data;if(t&&!("string"!=typeof this._form.email||this._form.email.length<1))try{await(0,i.bL)(this.api,e,t,this._form.email),window.location.assign("/")}catch(e){e.status>=500&&(0,g.Z)("Unable to transfer project")(e)}})),(0,r.Z)(this,"isProjectAdmin",(()=>new Set(this.props.organization.access).has("project:admin")))}getTitle(){const{projectId:e}=this.props.params;return(0,Z.Z)((0,m.t)("Project Settings"),e,!1)}getEndpoints(){const{orgId:e,projectId:t}=this.props.params;return[["data","/projects/".concat(e,"/").concat(t,"/")]]}renderRemoveProject(){const e=this.state.data,t=this.isProjectAdmin(),{isInternal:s}=e;return(0,_.BX)(x.Z,{label:(0,m.t)("Remove Project"),help:(0,m._N)("Remove the [project] project and all related data. [linebreak] Careful, this action cannot be undone.",{project:(0,_.tZ)("strong",{children:e.slug}),linebreak:(0,_.tZ)("br",{})}),children:[!t&&(0,m.t)("You do not have the required permission to remove this project."),s&&(0,m.t)("This project cannot be removed. It is used internally by the Sentry server."),t&&!s&&(0,_.tZ)(l.Z,{onConfirm:this.handleRemoveProject,priority:"danger",confirmText:(0,m.t)("Remove project"),message:(0,_.BX)("div",{children:[(0,_.tZ)(S.Z,{children:(0,_.tZ)("strong",{children:(0,m.t)("Removing this project is permanent and cannot be undone!")})}),(0,_.tZ)(S.Z,{children:(0,m.t)("This will also remove all associated event data.")})]}),children:(0,_.tZ)("div",{children:(0,_.tZ)(c.ZP,{className:"ref-remove-project",type:"button",priority:"danger",children:(0,m.t)("Remove Project")})})})]})}renderTransferProject(){const e=this.state.data,t=this.isProjectAdmin(),{isInternal:s}=e;return(0,_.BX)(x.Z,{label:(0,m.t)("Transfer Project"),help:(0,m._N)("Transfer the [project] project and all related data. [linebreak] Careful, this action cannot be undone.",{project:(0,_.tZ)("strong",{children:e.slug}),linebreak:(0,_.tZ)("br",{})}),children:[!t&&(0,m.t)("You do not have the required permission to transfer this project."),s&&(0,m.t)("This project cannot be transferred. It is used internally by the Sentry server."),t&&!s&&(0,_.tZ)(l.Z,{onConfirm:this.handleTransferProject,priority:"danger",confirmText:(0,m.t)("Transfer project"),renderMessage:({confirm:e})=>(0,_.BX)("div",{children:[(0,_.tZ)(S.Z,{children:(0,_.tZ)("strong",{children:(0,m.t)("Transferring this project is permanent and cannot be undone!")})}),(0,_.tZ)(S.Z,{children:(0,m.t)("Please enter the email of an organization owner to whom you would like to transfer this project.")}),(0,_.tZ)(p.s_,{children:(0,_.tZ)(w.Z,{hideFooter:!0,onFieldChange:this.handleTransferFieldChange,onSubmit:(t,s,r,n)=>{n.stopPropagation(),e()},children:(0,_.tZ)(y.Z,{name:"email",label:(0,m.t)("Organization Owner"),placeholder:"admin@example.com",required:!0,help:(0,m.t)("A request will be emailed to this address, asking the organization owner to accept the project transfer.")})})})]}),children:(0,_.tZ)("div",{children:(0,_.tZ)(c.ZP,{className:"ref-transfer-project",type:"button",priority:"danger",children:(0,m.t)("Transfer Project")})})})]})}renderBody(){var e;const{organization:t}=this.props,s=this.state.data,{orgId:r,projectId:n}=this.props.params,o="/projects/".concat(r,"/").concat(n,"/"),c=new Set(t.access),l={additionalFieldProps:{organization:t},features:new Set(t.features),access:c,disabled:!c.has("project:write")},d=s.teams.length?null===(e=s.teams)||void 0===e?void 0:e[0]:void 0;return(0,_.BX)("div",{children:[(0,_.tZ)(P.Z,{title:(0,m.t)("Project Settings")}),(0,_.tZ)(T.Z,{}),(0,_.BX)(w.Z,{saveOnBlur:!0,allowUndo:!0,initialData:{...s,team:d},apiMethod:"PUT",apiEndpoint:o,onSubmitSuccess:e=>{this.setState({data:e}),n!==e.slug&&((0,i.TA)(n,e.slug),this.props.onChangeSlug(e.slug)),a.Z.updateSuccess(e)},children:[(0,_.tZ)(b.Z,{...l,title:(0,m.t)("Project Details"),fields:[h.fields.slug,h.fields.platform]}),(0,_.tZ)(b.Z,{...l,title:(0,m.t)("Email"),fields:[h.fields.subjectPrefix]}),(0,_.tZ)(b.Z,{...l,title:(0,m.t)("Event Settings"),fields:[h.fields.resolveAge]}),(0,_.tZ)(b.Z,{...l,title:(0,m.t)("Client Security"),fields:[h.fields.allowedDomains,h.fields.scrapeJavaScript,h.fields.securityToken,h.fields.securityTokenHeader,h.fields.verifySSL],renderHeader:()=>(0,_.tZ)(p.aU,{type:"info",children:(0,_.BX)(S.Z,{noMargin:!0,children:[(0,m._N)("Configure origin URLs which Sentry should accept events from. This is used for communication with clients like [link].",{link:(0,_.tZ)("a",{href:"https://github.com/getsentry/sentry-javascript",children:"sentry-javascript"})})," ",(0,m._N)("This will restrict requests based on the [Origin] and [Referer] headers.",{Origin:(0,_.tZ)("code",{children:"Origin"}),Referer:(0,_.tZ)("code",{children:"Referer"})})]})})})]}),(0,_.BX)(p.s_,{children:[(0,_.tZ)(p.V9,{children:(0,m.t)("Project Administration")}),this.renderRemoveProject(),this.renderTransferProject()]})]})}}class R extends n.Component{constructor(...e){super(...e),(0,r.Z)(this,"changedSlug",void 0),(0,r.Z)(this,"unsubscribe",u.Z.listen((()=>this.onProjectsUpdate()),void 0))}componentWillUnmount(){this.unsubscribe()}onProjectsUpdate(){this.changedSlug&&u.Z.getBySlug(this.changedSlug)&&o.browserHistory.replace((0,j.Z)("",{...this.props,params:{...this.props.params,projectId:this.changedSlug}}))}render(){return(0,_.tZ)(C,{onChangeSlug:e=>this.changedSlug=e,...this.props})}}R.displayName="ProjectGeneralSettingsContainer";const k=(0,f.Z)(R)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_projectGeneralSettings_tsx.d3458a015870b59c2c8a9a895445ece7.js.map