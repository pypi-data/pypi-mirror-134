(self.webpackChunk=self.webpackChunk||[]).push([["app_views_organizationGroupDetails_groupEventAttachments_index_tsx"],{"./app/components/acl/role.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var n=s("../node_modules/react/index.js"),o=s("./app/stores/configStore.tsx"),a=s("./app/utils/isActiveSuperuser.tsx"),r=s("./app/utils/isRenderFunc.tsx"),i=s("./app/utils/withOrganization.tsx");class d extends n.Component{hasRole(){var e;const t=o.Z.get("user"),{organization:s,role:n}=this.props,{availableRoles:r}=s,i=null!==(e=s.role)&&void 0!==e?e:"";if(!t)return!1;if((0,a.M)())return!0;if(!Array.isArray(r))return!1;const d=r.map((e=>e.id));if(!d.includes(n)||!d.includes(i))return!1;const l=d.indexOf(n);return d.indexOf(i)>=l}render(){const{children:e}=this.props,t=this.hasRole();return(0,r.l)(e)?e({hasRole:t}):t&&e?e:null}}d.displayName="Role";const l=(0,i.Z)(d)},"./app/components/events/eventAttachmentActions.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>x});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("../node_modules/react/index.js"),a=s("./app/components/button.tsx"),r=s("./app/components/buttonBar.tsx"),i=s("./app/components/confirm.tsx"),d=s("./app/icons/index.tsx"),l=s("./app/locale.tsx"),c=s("./app/styles/space.tsx"),p=s("./app/utils/withApi.tsx"),m=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class u extends o.Component{handlePreview(){const{onPreview:e,attachmentId:t}=this.props;e&&e(t)}render(){const{url:e,withPreviewButton:t,hasPreview:s,previewIsOpen:n,onDelete:o,attachmentId:c}=this.props;return(0,m.BX)(r.ZP,{gap:1,children:[(0,m.tZ)(i.Z,{confirmText:(0,l.t)("Delete"),message:(0,l.t)("Are you sure you wish to delete this file?"),priority:"danger",onConfirm:()=>o(c),disabled:!e,children:(0,m.tZ)(a.ZP,{size:"xsmall",icon:(0,m.tZ)(d.Fz,{size:"xs"}),label:(0,l.t)("Delete"),disabled:!e,title:e?void 0:(0,l.t)("Insufficient permissions to delete attachments")})}),(0,m.tZ)(h,{size:"xsmall",icon:(0,m.tZ)(d.Dj,{size:"xs"}),href:e?"".concat(e,"?download=1"):"",disabled:!e,title:e?void 0:(0,l.t)("Insufficient permissions to download attachments"),label:(0,l.t)("Download")}),t&&(0,m.tZ)(h,{size:"xsmall",disabled:!e||!s,priority:n?"primary":"default",icon:(0,m.tZ)(d.fn,{size:"xs"}),onClick:()=>this.handlePreview(),title:e?s?void 0:(0,l.t)("This attachment cannot be previewed"):(0,l.t)("Insufficient permissions to preview attachments"),children:(0,l.t)("Preview")})]})}}u.displayName="EventAttachmentActions";const h=(0,n.Z)(a.ZP,{target:"erg6n450"})("margin-right:",(0,c.Z)(.5),";"),x=(0,p.Z)(u)},"./app/components/fileSize.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("./app/utils.tsx"),a=s("./app/utils/getDynamicText.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){const{className:t,bytes:s}=e;return(0,r.tZ)(d,{className:t,children:(0,a.Z)({value:(0,o.F)(s),fixed:"xx KB"})})}i.displayName="FileSize";const d=(0,n.Z)("span",{target:"e1xn0mc30"})({name:"kow0uz",styles:"font-variant-numeric:tabular-nums"}),l=i},"./app/utils/attachmentUrl.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var n=s("../node_modules/react/index.js"),o=s("./app/components/acl/role.tsx"),a=s("./app/utils/withOrganization.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i({attachment:e,organization:t,eventId:s,projectId:n,children:a}){return(0,r.tZ)(o.Z,{role:t.attachmentsRole,children:({hasRole:o})=>a(o?"/api/0/projects/".concat(t.slug,"/").concat(n,"/events/").concat(s,"/attachments/").concat(e.id,"/"):null)})}i.displayName="AttachmentUrl";const d=(0,a.Z)((0,n.memo)(i))},"./app/views/organizationGroupDetails/groupEventAttachments/groupEventAttachmentsFilter.tsx":(e,t,s)=>{"use strict";s.d(t,{M:()=>h,Z:()=>v});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("../node_modules/react-router/es/index.js"),a=s("../node_modules/lodash/omit.js"),r=s.n(a),i=s("../node_modules/lodash/xor.js"),d=s.n(i),l=s("./app/components/button.tsx"),c=s("./app/components/buttonBar.tsx"),p=s("./app/locale.tsx"),m=s("./app/styles/space.tsx"),u=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const h=["event.minidump","event.applecrashreport"],x=e=>{const{query:t,pathname:s}=e.location,{types:n}=t,o=r()(t,"types"),a={...t,types:h};let i="";return void 0===n?i="all":0===d()(h,n).length&&(i="onlyCrash"),(0,u.tZ)(Z,{children:(0,u.BX)(c.ZP,{merged:!0,active:i,children:[(0,u.tZ)(l.ZP,{barId:"all",size:"small",to:{pathname:s,query:o},children:(0,p.t)("All Attachments")}),(0,u.tZ)(l.ZP,{barId:"onlyCrash",size:"small",to:{pathname:s,query:a},children:(0,p.t)("Only Crash Reports")})]})})};x.displayName="GroupEventAttachmentsFilter";const Z=(0,n.Z)("div",{target:"eftnont0"})("display:flex;justify-content:flex-end;margin-bottom:",(0,m.Z)(3),";"),v=(0,o.withRouter)(x)},"./app/views/organizationGroupDetails/groupEventAttachments/index.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>S});var n=s("./app/components/acl/feature.tsx"),o=s("./app/components/acl/featureDisabled.tsx"),a=s("./app/utils/withOrganization.tsx"),r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),d=s("../node_modules/react-router/es/index.js"),l=s("../node_modules/lodash/pick.js"),c=s.n(l),p=s("./app/components/asyncComponent.tsx"),m=s("./app/components/emptyStateWarning.tsx"),u=s("./app/components/loadingIndicator.tsx"),h=s("./app/components/pagination.tsx"),x=s("./app/components/panels/index.tsx"),Z=s("./app/locale.tsx"),v=s("./app/views/organizationGroupDetails/groupEventAttachments/groupEventAttachmentsFilter.tsx"),y=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),g=s("./app/components/dateTime.tsx"),j=s("./app/components/events/eventAttachmentActions.tsx"),b=s("./app/components/fileSize.tsx"),_=s("./app/components/links/link.tsx"),f=s("./app/utils/attachmentUrl.tsx");const w={"event.minidump":(0,Z.t)("Minidump"),"event.applecrashreport":(0,Z.t)("Apple Crash Report"),"event.attachment":(0,Z.t)("Other")};var A=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const I=({attachment:e,projectId:t,onDelete:s,isDeleted:n,orgId:o,groupId:a})=>(0,A.BX)(D,{isDeleted:n,children:[(0,A.tZ)("td",{children:(0,A.BX)("h5",{children:[e.name,(0,A.tZ)("br",{}),(0,A.BX)("small",{children:[(0,A.tZ)(g.Z,{date:e.dateCreated})," Â·"," ",(0,A.tZ)(_.Z,{to:"/organizations/".concat(o,"/issues/").concat(a,"/events/").concat(e.event_id,"/"),children:e.event_id})]})]})}),(0,A.tZ)("td",{children:w[e.type]||(0,Z.t)("Other")}),(0,A.tZ)("td",{children:(0,A.tZ)(b.Z,{bytes:e.size})}),(0,A.tZ)("td",{children:(0,A.tZ)(z,{children:(0,A.tZ)(f.Z,{projectId:t,eventId:e.event_id,attachment:e,children:t=>!n&&(0,A.tZ)(j.Z,{url:t,onDelete:s,attachmentId:e.id})})})})]});I.displayName="GroupEventAttachmentsTableRow";const D=(0,y.Z)("tr",{target:"egfj2n61"})("opacity:",(e=>e.isDeleted?.3:1),";td{text-decoration:",(e=>e.isDeleted?"line-through":"normal"),";}"),z=(0,y.Z)("div",{target:"egfj2n60"})({name:"1r5gb7q",styles:"display:inline-block"}),N=I,R=({attachments:e,orgId:t,projectId:s,groupId:n,onDelete:o,deletedAttachments:a})=>{const r=[(0,Z.t)("Name"),(0,Z.t)("Type"),(0,Z.t)("Size"),(0,Z.t)("Actions")];return(0,A.BX)("table",{className:"table events-table",children:[(0,A.tZ)("thead",{children:(0,A.tZ)("tr",{children:r.map((e=>(0,A.tZ)("th",{children:e},e)))})}),(0,A.tZ)("tbody",{children:e.map((e=>(0,A.tZ)(N,{attachment:e,orgId:t,projectId:s,groupId:n,onDelete:o,isDeleted:a.some((t=>e.id===t))},e.id)))})]})};R.displayName="GroupEventAttachmentsTable";const B=R;class C extends p.Z{constructor(...e){super(...e),(0,r.Z)(this,"handleDelete",(e=>{this.setState((t=>({deletedAttachments:[...t.deletedAttachments,e]})))}))}getDefaultState(){return{...super.getDefaultState(),deletedAttachments:[]}}getEndpoints(){const{params:e,location:t}=this.props;return[["eventAttachments","/issues/".concat(e.groupId,"/attachments/"),{query:{...c()(t.query,["cursor","environment","types"]),limit:50}}]]}renderNoQueryResults(){return(0,A.tZ)(m.Z,{children:(0,A.tZ)("p",{children:(0,Z.t)("Sorry, no event attachments match your search query.")})})}renderEmpty(){return(0,A.tZ)(m.Z,{children:(0,A.tZ)("p",{children:(0,Z.t)("There don't seem to be any event attachments yet.")})})}renderLoading(){return this.renderBody()}renderInnerBody(){const{projectSlug:e,params:t,location:s}=this.props,{loading:n,eventAttachments:o,deletedAttachments:a}=this.state;return n?(0,A.tZ)(u.Z,{}):o.length>0?(0,A.tZ)(B,{attachments:o,orgId:t.orgId,projectId:e,groupId:t.groupId,onDelete:this.handleDelete,deletedAttachments:a}):s.query.types?this.renderNoQueryResults():this.renderEmpty()}renderBody(){return(0,A.BX)(i.Fragment,{children:[(0,A.tZ)(v.Z,{}),(0,A.tZ)(x.s_,{className:"event-list",children:(0,A.tZ)(x.N,{children:this.renderInnerBody()})}),(0,A.tZ)(h.Z,{pageLinks:this.state.eventAttachmentsPageLinks})]})}}const E=(0,d.withRouter)(C),P=({organization:e,group:t})=>(0,A.tZ)(n.Z,{features:["event-attachments"],organization:e,renderDisabled:e=>(0,A.tZ)(o.Z,{...e}),children:(0,A.tZ)(E,{projectSlug:t.project.slug})});P.displayName="GroupEventAttachmentsContainer";const S=(0,a.Z)(P)},"../node_modules/lodash/_baseDifference.js":(e,t,s)=>{var n=s("../node_modules/lodash/_SetCache.js"),o=s("../node_modules/lodash/_arrayIncludes.js"),a=s("../node_modules/lodash/_arrayIncludesWith.js"),r=s("../node_modules/lodash/_arrayMap.js"),i=s("../node_modules/lodash/_baseUnary.js"),d=s("../node_modules/lodash/_cacheHas.js");e.exports=function(e,t,s,l){var c=-1,p=o,m=!0,u=e.length,h=[],x=t.length;if(!u)return h;s&&(t=r(t,i(s))),l?(p=a,m=!1):t.length>=200&&(p=d,m=!1,t=new n(t));e:for(;++c<u;){var Z=e[c],v=null==s?Z:s(Z);if(Z=l||0!==Z?Z:0,m&&v==v){for(var y=x;y--;)if(t[y]===v)continue e;h.push(Z)}else p(t,v,l)||h.push(Z)}return h}},"../node_modules/lodash/_baseXor.js":(e,t,s)=>{var n=s("../node_modules/lodash/_baseDifference.js"),o=s("../node_modules/lodash/_baseFlatten.js"),a=s("../node_modules/lodash/_baseUniq.js");e.exports=function(e,t,s){var r=e.length;if(r<2)return r?a(e[0]):[];for(var i=-1,d=Array(r);++i<r;)for(var l=e[i],c=-1;++c<r;)c!=i&&(d[i]=n(d[i]||l,e[c],t,s));return a(o(d,1),t,s)}},"../node_modules/lodash/xor.js":(e,t,s)=>{var n=s("../node_modules/lodash/_arrayFilter.js"),o=s("../node_modules/lodash/_baseRest.js"),a=s("../node_modules/lodash/_baseXor.js"),r=s("../node_modules/lodash/isArrayLikeObject.js"),i=o((function(e){return a(n(e,r))}));e.exports=i}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationGroupDetails_groupEventAttachments_index_tsx.ecb13e358a76b867ced52a9a0e84148e.js.map