"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_project_projectKeys_details_index_tsx"],{"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>r}),s("../node_modules/react/index.js");var n=s("./app/components/asyncComponent.tsx"),i=s("./app/components/sentryDocumentTitle.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class r extends n.Z{getTitle(){return""}render(){return(0,o.tZ)(i.Z,{title:this.getTitle(),children:this.renderComponent()})}}r.displayName="AsyncView"},"./app/views/settings/project/permissionAlert.tsx":(e,t,s)=>{s.d(t,{Z:()=>d}),s("../node_modules/react/index.js");var n=s("./app/components/acl/access.tsx"),i=s("./app/components/alert.tsx"),o=s("./app/icons/index.tsx"),r=s("./app/locale.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=({access:e=["project:write"],...t})=>(0,a.tZ)(n.Z,{access:e,children:({hasAccess:e})=>!e&&(0,a.tZ)(i.Z,{type:"warning",icon:(0,a.tZ)(o.FC,{size:"xs"}),...t,children:(0,r.t)("These settings can only be edited by users with the organization owner, manager, or admin role.")})});l.displayName="PermissionAlert";const d=l},"./app/views/settings/project/projectKeys/details/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>Q});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react-router/es/index.js")),o=s("./app/locale.tsx"),r=s("./app/views/asyncView.tsx"),a=s("./app/views/settings/components/settingsPageHeader.tsx"),l=s("./app/views/settings/project/permissionAlert.tsx"),d=s("../node_modules/react/index.js"),c=s("./app/actionCreators/indicator.tsx"),p=s("./app/components/acl/access.tsx"),h=s("./app/components/button.tsx"),m=s("./app/components/confirm.tsx"),u=s("./app/components/dateTime.tsx"),Z=s("./app/components/links/externalLink.tsx"),y=s("./app/components/panels/index.tsx"),f=s("./app/icons/index.tsx"),x=s("./app/utils/getDynamicText.tsx"),w=s("./app/views/settings/components/forms/booleanField.tsx"),g=s("./app/views/settings/components/forms/field/index.tsx"),b=s("./app/views/settings/components/forms/form.tsx"),v=s("./app/views/settings/components/forms/selectField.tsx"),_=s("./app/views/settings/components/forms/textCopyInput.tsx"),j=s("./app/views/settings/components/forms/textField.tsx"),D=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),S=s("../node_modules/lodash/sortBy.js"),k=s.n(S),C=s("./app/components/acl/feature.tsx"),N=s("./app/components/acl/featureDisabled.tsx"),E=s("./app/styles/space.tsx"),I=s("./app/utils.tsx"),K=s("./app/utils/formatters.tsx"),P=s("./app/views/settings/components/forms/controls/input.tsx"),R=s("./app/views/settings/components/forms/controls/rangeSlider.tsx"),T=s("./app/views/settings/components/forms/formField/index.tsx"),B=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const L=[0,60,300,900,3600,7200,14400,21600,43200,86400];function z({data:e,disabled:t,params:s}){function n(e,t,s){e({...t,count:Number(s.target.value)},s)}function i(t){const{rateLimit:s}=e,{window:n}=null!=s?s:{};if((0,I.ri)(n)){if(t!==n)return L;if(!L.includes(n))return k()([...L,n])}return L}const{keyId:r,orgId:a,projectId:l}=s,d="/projects/".concat(a,"/").concat(l,"/keys/").concat(r,"/"),c=({features:e})=>(0,B.tZ)(N.Z,{alert:y.aU,features:e,featureName:(0,o.t)("Key Rate Limits")});return(0,B.tZ)(b.Z,{saveOnBlur:!0,apiEndpoint:d,apiMethod:"PUT",initialData:e,children:(0,B.tZ)(C.Z,{features:["projects:rate-limits"],hookName:"feature-disabled:rate-limits",renderDisabled:({children:e,...t})=>"function"==typeof e&&e({...t,renderDisabled:c}),children:({hasFeature:e,features:s,organization:r,project:a,renderDisabled:l})=>(0,B.BX)(y.s_,{children:[(0,B.tZ)(y.V9,{children:(0,o.t)("Rate Limits")}),(0,B.BX)(y.N,{children:[(0,B.tZ)(y.aU,{type:"info",icon:(0,B.tZ)(f.Gy,{size:"md"}),children:(0,o.t)("Rate limits provide a flexible way to manage your error\n                    volume. If you have a noisy project or environment you\n                    can configure a rate limit for this key to reduce the\n                    number of errors processed. To manage your transaction\n                    volume, we recommend adjusting your sample rate in your\n                    SDK configuration.")}),!e&&"function"==typeof l&&l({organization:r,project:a,features:s,hasFeature:e,children:null}),(0,B.tZ)(T.Z,{name:"rateLimit",label:(0,o.t)("Rate Limit"),disabled:t||!e,validate:({form:e})=>e&&e.rateLimit&&void 0!==e.rateLimit.count&&void 0!==e.rateLimit.window?[]:[["rateLimit",(0,o.t)("Fill in both fields first")]],formatMessageValue:({count:e,window:t})=>(0,o._N)("[errors] in [timeWindow]",{errors:(0,o.tn)("%s error ","%s errors ",e),timeWindow:0===t?(0,o.t)("no time window"):(0,K._U)(t)}),help:(0,o.t)("Apply a rate limit to this credential to cap the amount of errors accepted during a time window."),inline:!1,children:({onChange:s,onBlur:r,value:a})=>{const l="object"==typeof a?a.window:void 0;return(0,B.BX)(A,{children:[(0,B.tZ)(P.Z,{type:"number",name:"rateLimit.count",min:0,value:"object"==typeof a?a.count:void 0,placeholder:(0,o.t)("Count"),disabled:t||!e,onChange:e=>n(s,a,e),onBlur:e=>n(r,a,e)}),(0,B.tZ)(X,{children:(0,o.t)("event(s) in")}),(0,B.tZ)(R.Z,{name:"rateLimit.window",allowedValues:i(l),value:l,placeholder:(0,o.t)("Window"),formatLabel:e=>{if("number"==typeof e)return 0===e?(0,o.t)("None"):(0,K._U)(e)},disabled:t||!e,onChange:(e,t)=>function(e,t,s,n,i){const o={...s,window:n};e(o,i),t(o,i)}(s,r,a,Number(e),t)})]})}})]})]})})})}z.displayName="KeyRateLimitsForm";const U=z,A=(0,D.Z)("div",{target:"e7j3zl21"})("display:grid;grid-template-columns:2fr 1fr 2fr;align-items:center;gap:",(0,E.Z)(1),";"),X=(0,D.Z)("small",{target:"e7j3zl20"})("font-size:",(e=>e.theme.fontSizeRelativeSmall),";text-align:center;white-space:nowrap;");var M=s("./app/views/settings/project/projectKeys/projectKeyCredentials.tsx");class V extends d.Component{constructor(...e){super(...e),(0,n.Z)(this,"state",{loading:!1,error:!1}),(0,n.Z)(this,"handleRemove",(async()=>{if(this.state.loading)return;(0,c.E3)((0,o.t)("Revoking keyâ€¦"));const{api:e,onRemove:t,params:s}=this.props,{keyId:n,orgId:i,projectId:r}=s;try{await e.requestPromise("/projects/".concat(i,"/").concat(r,"/keys/").concat(n,"/"),{method:"DELETE"}),t(),(0,c.S9)((0,o.t)("Revoked key"))}catch(e){this.setState({error:!0,loading:!1}),(0,c.Iw)((0,o.t)("Unable to revoke key"))}}))}render(){const{keyId:e,orgId:t,projectId:s}=this.props.params,{data:n}=this.props,i="/projects/".concat(t,"/").concat(s,"/keys/").concat(e,"/"),r=(0,x.Z)({value:n.dsn.cdn,fixed:"__JS_SDK_LOADER_URL__"});return(0,B.tZ)(p.Z,{access:["project:write"],children:({hasAccess:e})=>(0,B.BX)(d.Fragment,{children:[(0,B.tZ)(b.Z,{saveOnBlur:!0,allowUndo:!0,apiEndpoint:i,apiMethod:"PUT",initialData:n,children:(0,B.BX)(y.s_,{children:[(0,B.tZ)(y.V9,{children:(0,o.t)("Details")}),(0,B.BX)(y.N,{children:[(0,B.tZ)(j.Z,{name:"name",label:(0,o.t)("Name"),disabled:!e,required:!1,maxLength:64}),(0,B.tZ)(w.Z,{name:"isActive",label:(0,o.t)("Enabled"),required:!1,disabled:!e,help:"Accept events from this key? This may be used to temporarily suspend a key."}),(0,B.tZ)(g.Z,{label:(0,o.t)("Created"),children:(0,B.tZ)("div",{className:"controls",children:(0,B.tZ)(u.Z,{date:n.dateCreated})})})]})]})}),(0,B.tZ)(U,{params:this.props.params,data:n,disabled:!e}),(0,B.tZ)(b.Z,{saveOnBlur:!0,apiEndpoint:i,apiMethod:"PUT",initialData:n,children:(0,B.BX)(y.s_,{children:[(0,B.tZ)(y.V9,{children:(0,o.t)("JavaScript Loader")}),(0,B.BX)(y.N,{children:[(0,B.tZ)(g.Z,{help:(0,o._N)("Copy this script into your website to setup your JavaScript SDK without any additional configuration. [link]",{link:(0,B.tZ)(Z.Z,{href:"https://docs.sentry.io/platforms/javascript/install/lazy-load-sentry/",children:"What does the script provide?"})}),inline:!1,flexibleControlStateSize:!0,children:(0,B.tZ)(_.Z,{children:"<script src='".concat(r,'\' crossorigin="anonymous"><\/script>')})}),(0,B.tZ)(v.Z,{name:"browserSdkVersion",options:n.browserSdk?n.browserSdk.choices.map((([e,t])=>({value:e,label:t}))):[],placeholder:(0,o.t)("4.x"),allowClear:!1,disabled:!e,help:(0,o.t)("Select the version of the SDK that should be loaded. Note that it can take a few minutes until this change is live.")})]})]})}),(0,B.BX)(y.s_,{children:[(0,B.tZ)(y.V9,{children:(0,o.t)("Credentials")}),(0,B.BX)(y.N,{children:[(0,B.tZ)(y.aU,{type:"info",icon:(0,B.tZ)(f.Gy,{size:"md"}),children:(0,o.t)("Your credentials are coupled to a public and secret key. Different clients will require different credentials, so make sure you check the documentation before plugging things in.")}),(0,B.tZ)(M.Z,{projectId:"".concat(n.projectId),data:n,showPublicKey:!0,showSecretKey:!0,showProjectId:!0})]})]}),(0,B.tZ)(p.Z,{access:["project:admin"],children:(0,B.BX)(y.s_,{children:[(0,B.tZ)(y.V9,{children:(0,o.t)("Revoke Key")}),(0,B.tZ)(y.N,{children:(0,B.tZ)(g.Z,{label:(0,o.t)("Revoke Key"),help:(0,o.t)("Revoking this key will immediately remove and suspend the credentials. This action is irreversible."),children:(0,B.tZ)("div",{children:(0,B.tZ)(m.Z,{priority:"danger",message:(0,o.t)("Are you sure you want to revoke this key? This will immediately remove and suspend the credentials."),onConfirm:this.handleRemove,confirmText:(0,o.t)("Revoke Key"),children:(0,B.tZ)(h.ZP,{priority:"danger",children:(0,o.t)("Revoke Key")})})})})})]})})]})})}}V.displayName="KeySettings";const F=V;var q=s("./app/components/charts/miniBarChart.tsx"),O=s("./app/components/loadingError.tsx"),H=s("./app/components/placeholder.tsx"),Y=s("./app/utils/theme.tsx"),J=s("./app/views/settings/components/emptyMessage.tsx");class W extends d.Component{constructor(...e){super(...e),(0,n.Z)(this,"state",(()=>{const e=Math.floor((new Date).getTime()/1e3);return{since:e-2592e3,until:e,loading:!0,error:!1,series:[],emptyStats:!1}})()),(0,n.Z)(this,"fetchData",(()=>{const{keyId:e,orgId:t,projectId:s}=this.props.params;this.props.api.request("/projects/".concat(t,"/").concat(s,"/keys/").concat(e,"/stats/"),{query:{since:this.state.since,until:this.state.until,resolution:"1d"},success:e=>{let t=!0;const s=[],n=[];e.forEach((e=>{e.total&&(t=!1),s.push({name:1e3*e.ts,value:e.dropped}),n.push({name:1e3*e.ts,value:e.accepted})}));const i=[{seriesName:(0,o.t)("Accepted"),data:n},{seriesName:(0,o.t)("Rate Limited"),data:s}];this.setState({series:i,emptyStats:t,error:!1,loading:!1})},error:()=>{this.setState({error:!0,loading:!1})}})}))}componentDidMount(){this.fetchData()}render(){return this.state.error?(0,B.tZ)(O.Z,{onRetry:this.fetchData}):(0,B.BX)(y.s_,{children:[(0,B.tZ)(y.V9,{children:(0,o.t)("Key usage in the last 30 days (by day)")}),(0,B.tZ)(y.N,{withPadding:!0,children:this.state.loading?(0,B.tZ)(H.Z,{height:"150px"}):this.state.emptyStats?(0,B.tZ)(J.Z,{title:(0,o.t)("Nothing recorded in the last 30 days."),description:(0,o.t)("Total events captured using these credentials.")}):(0,B.tZ)(q.Z,{isGroupedByDate:!0,series:this.state.series,height:150,colors:[Y.ZP.gray200,Y.ZP.red300],stacked:!0,labelYAxisExtents:!0})})]})}}W.displayName="KeyStats";const G=W;class Q extends r.Z{constructor(...e){super(...e),(0,n.Z)(this,"handleRemove",(()=>{const{orgId:e,projectId:t}=this.props.params;i.browserHistory.push("/".concat(e,"/").concat(t,"/settings/keys/"))}))}getTitle(){return(0,o.t)("Key Details")}getEndpoints(){const{keyId:e,orgId:t,projectId:s}=this.props.params;return[["data","/projects/".concat(t,"/").concat(s,"/keys/").concat(e,"/")]]}renderBody(){const{data:e}=this.state,{params:t}=this.props;return(0,B.BX)("div",{"data-test-id":"key-details",children:[(0,B.tZ)(a.Z,{title:(0,o.t)("Key Details")}),(0,B.tZ)(l.Z,{}),(0,B.tZ)(G,{api:this.api,params:t}),(0,B.tZ)(F,{api:this.api,params:t,data:e,onRemove:this.handleRemove})]})}}},"./app/views/settings/project/projectKeys/projectKeyCredentials.tsx":(e,t,s)=>{s.d(t,{Z:()=>y});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),r=s("./app/components/links/externalLink.tsx"),a=s("./app/components/links/link.tsx"),l=s("./app/locale.tsx"),d=s("./app/styles/space.tsx"),c=s("./app/utils/getDynamicText.tsx"),p=s("./app/views/settings/components/forms/field/index.tsx"),h=s("./app/views/settings/components/forms/textCopyInput.tsx"),m=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class u extends o.Component{constructor(...e){super(...e),(0,n.Z)(this,"state",{showDeprecatedDsn:!1}),(0,n.Z)(this,"toggleDeprecatedDsn",(()=>{this.setState((e=>({showDeprecatedDsn:!e.showDeprecatedDsn})))}))}render(){const{showDeprecatedDsn:e}=this.state,{projectId:t,data:s,showDsn:n,showDsnPublic:i,showSecurityEndpoint:d,showMinidump:u,showUnreal:y,showPublicKey:f,showSecretKey:x,showProjectId:w}=this.props;return(0,m.BX)(o.Fragment,{children:[i&&(0,m.BX)(p.Z,{label:(0,l.t)("DSN"),inline:!1,flexibleControlStateSize:!0,help:(0,l._N)("The DSN tells the SDK where to send the events to. [link]",{link:n?(0,m.tZ)(a.Z,{to:"",onClick:this.toggleDeprecatedDsn,children:e?(0,l.t)("Hide deprecated DSN"):(0,l.t)("Show deprecated DSN")}):null}),children:[(0,m.tZ)(h.Z,{children:(0,c.Z)({value:s.dsn.public,fixed:"__DSN__"})}),e&&(0,m.tZ)(Z,{label:null,help:(0,l.t)("Deprecated DSN includes a secret which is no longer required by newer SDK versions. If you are unsure which to use, follow installation instructions for your language."),inline:!1,flexibleControlStateSize:!0,children:(0,m.tZ)(h.Z,{children:(0,c.Z)({value:s.dsn.secret,fixed:"__DSN_DEPRECATED__"})})})]}),!i&&n&&(0,m.tZ)(p.Z,{label:(0,l.t)("DSN (Deprecated)"),help:(0,l.t)("Deprecated DSN includes a secret which is no longer required by newer SDK versions. If you are unsure which to use, follow installation instructions for your language."),inline:!1,flexibleControlStateSize:!0,children:(0,m.tZ)(h.Z,{children:(0,c.Z)({value:s.dsn.secret,fixed:"__DSN_DEPRECATED__"})})}),d&&(0,m.tZ)(p.Z,{label:(0,l.t)("Security Header Endpoint"),help:(0,l.t)("Use your security header endpoint for features like CSP and Expect-CT reports."),inline:!1,flexibleControlStateSize:!0,children:(0,m.tZ)(h.Z,{children:(0,c.Z)({value:s.dsn.security,fixed:"__SECURITY_HEADER_ENDPOINT__"})})}),u&&(0,m.tZ)(p.Z,{label:(0,l.t)("Minidump Endpoint"),help:(0,l._N)("Use this endpoint to upload [link], for example with Electron, Crashpad or Breakpad.",{link:(0,m.tZ)(r.Z,{href:"https://docs.sentry.io/platforms/native/guides/minidumps/",children:"minidump crash reports"})}),inline:!1,flexibleControlStateSize:!0,children:(0,m.tZ)(h.Z,{children:(0,c.Z)({value:s.dsn.minidump,fixed:"__MINIDUMP_ENDPOINT__"})})}),y&&(0,m.tZ)(p.Z,{label:(0,l.t)("Unreal Engine 4 Endpoint"),help:(0,l.t)("Use this endpoint to configure your UE4 Crash Reporter."),inline:!1,flexibleControlStateSize:!0,children:(0,m.tZ)(h.Z,{children:(0,c.Z)({value:s.dsn.unreal||"",fixed:"__UNREAL_ENDPOINT__"})})}),f&&(0,m.tZ)(p.Z,{label:(0,l.t)("Public Key"),inline:!0,flexibleControlStateSize:!0,children:(0,m.tZ)(h.Z,{children:(0,c.Z)({value:s.public,fixed:"__PUBLICKEY__"})})}),x&&(0,m.tZ)(p.Z,{label:(0,l.t)("Secret Key"),inline:!0,flexibleControlStateSize:!0,children:(0,m.tZ)(h.Z,{children:(0,c.Z)({value:s.secret,fixed:"__SECRETKEY__"})})}),w&&(0,m.tZ)(p.Z,{label:(0,l.t)("Project ID"),inline:!0,flexibleControlStateSize:!0,children:(0,m.tZ)(h.Z,{children:(0,c.Z)({value:t,fixed:"__PROJECTID__"})})})]})}}u.displayName="ProjectKeyCredentials",(0,n.Z)(u,"defaultProps",{showDsn:!0,showDsnPublic:!0,showSecurityEndpoint:!0,showMinidump:!0,showUnreal:!0,showPublicKey:!1,showSecretKey:!1,showProjectId:!1});const Z=(0,i.Z)(p.Z,{target:"exezfd10"})("padding:",(0,d.Z)(.5)," 0 0 0;"),y=u}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_project_projectKeys_details_index_tsx.6e42076936c82c5186485507a1cb1cc4.js.map