"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_performance_vitalDetail_index_tsx"],{"./app/views/performance/breadcrumb.tsx":(t,e,r)=>{r.d(e,{Z:()=>g});var n=r("../node_modules/react/index.js"),a=r("./app/components/breadcrumbs.tsx"),i=r("./app/locale.tsx"),s=r("./app/utils/queryString.tsx"),o=r("./app/views/performance/transactionSummary/tabs.tsx"),l=r("./app/views/performance/transactionSummary/transactionEvents/utils.tsx"),c=r("./app/views/performance/transactionSummary/transactionSpans/utils.tsx"),p=r("./app/views/performance/transactionSummary/transactionTags/utils.tsx"),u=r("./app/views/performance/transactionSummary/transactionVitals/utils.tsx"),d=r("./app/views/performance/transactionSummary/utils.tsx"),m=r("./app/views/performance/vitalDetail/utils.tsx"),f=r("./app/views/performance/utils.tsx"),h=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class v extends n.Component{getCrumbs(){const t=[],{organization:e,location:r,transaction:n,vitalName:a,spanSlug:h,eventSlug:v,traceSlug:g,tab:y}=this.props,_={pathname:(0,f.de)(e),query:{...r.query,transaction:void 0}};if(t.push({to:_,label:(0,i.t)("Performance"),preservePageFilters:!0}),a){const n=(0,m.i4)({orgSlug:e.slug,vitalName:"fcp",projectID:(0,s.ro)(r.query.project),query:r.query});t.push({to:n,label:(0,i.t)("Vital Detail"),preservePageFilters:!0})}else if(n){const a={orgSlug:e.slug,transaction:n.name,projectID:n.project,query:r.query};switch(y){case o.Z.Tags:{const e=(0,p.vG)(a);t.push({to:e,label:(0,i.t)("Tags"),preservePageFilters:!0});break}case o.Z.Events:{const e=(0,l.xr)(a);t.push({to:e,label:(0,i.t)("All Events"),preservePageFilters:!0});break}case o.Z.WebVitals:{const e=(0,u.Pl)(a);t.push({to:e,label:(0,i.t)("Web Vitals"),preservePageFilters:!0});break}case o.Z.Spans:{const e=(0,c.hN)(a);t.push({to:e,label:(0,i.t)("Spans"),preservePageFilters:!0});break}case o.Z.TransactionSummary:default:{const e=(0,d.e1)(a);t.push({to:e,label:(0,i.t)("Transaction Summary"),preservePageFilters:!0})}}}return n&&h?t.push({to:"",label:(0,i.t)("Span Details")}):n&&v?t.push({to:"",label:(0,i.t)("Event Details")}):g&&t.push({to:"",label:(0,i.t)("Trace View")}),t}render(){return(0,h.tZ)(a.Z,{crumbs:this.getCrumbs()})}}v.displayName="Breadcrumb";const g=v},"./app/views/performance/data.tsx":(t,e,r)=>{r.d(e,{GY:()=>u,hj:()=>d,V$:()=>m,ze:()=>f,L0:()=>h,g1:()=>v,DW:()=>g,Gm:()=>y,$r:()=>x,C:()=>S,AM:()=>w}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=r("./app/components/gridEditable/index.tsx"),a=r("./app/constants/pageFilters.tsx"),i=r("./app/locale.tsx"),s=r("./app/utils/discover/eventView.tsx"),o=r("./app/utils/queryString.tsx"),l=r("./app/utils/tokenizeSearch.tsx"),c=r("./app/views/performance/landing/utils.tsx"),p=r("./app/views/performance/vitalDetail/utils.tsx");const u="24h",d=["transaction","project","tpm","p50","p95","failure rate","apdex","users","user misery"];let m;function f(t){return[{tooltip:x(t,m.APDEX_NEW),value:"apdex()",label:(0,i.t)("Apdex")},{tooltip:x(t,m.TPM),value:"tpm()",label:(0,i.t)("Transactions Per Minute")},{tooltip:x(t,m.FAILURE_RATE),value:"failure_rate()",label:(0,i.t)("Failure Rate")},{tooltip:x(t,m.P50),value:"p50()",label:(0,i.t)("p50 Duration")},{tooltip:x(t,m.P95),value:"p95()",label:(0,i.t)("p95 Duration")},{tooltip:x(t,m.P99),value:"p99()",label:(0,i.t)("p99 Duration")}]}function h(t){return[{tooltip:x(t,m.LCP),value:"p75(lcp)",label:(0,i.t)("LCP p75"),field:"p75(measurements.lcp)",isLeftDefault:!0,backupOption:{tooltip:x(t,m.FCP),value:"p75(fcp)",label:(0,i.t)("FCP p75"),field:"p75(measurements.fcp)"}},{tooltip:x(t,m.DURATION_DISTRIBUTION),value:"lcp_distribution",label:(0,i.t)("LCP Distribution"),field:"measurements.lcp",isDistribution:!0,isRightDefault:!0,backupOption:{tooltip:x(t,m.DURATION_DISTRIBUTION),value:"fcp_distribution",label:(0,i.t)("FCP Distribution"),field:"measurements.fcp",isDistribution:!0}},{tooltip:x(t,m.TPM),value:"tpm()",label:(0,i.t)("Transactions Per Minute"),field:"tpm()"}]}function v(t){return[{tooltip:x(t,m.P50),value:"p50()",label:(0,i.t)("Duration p50"),field:"p50(transaction.duration)"},{tooltip:x(t,m.P75),value:"p75()",label:(0,i.t)("Duration p75"),field:"p75(transaction.duration)",isLeftDefault:!0},{tooltip:x(t,m.P95),value:"p95()",label:(0,i.t)("Duration p95"),field:"p95(transaction.duration)"},{tooltip:x(t,m.DURATION_DISTRIBUTION),value:"duration_distribution",label:(0,i.t)("Duration Distribution"),field:"transaction.duration",isDistribution:!0,isRightDefault:!0}]}function g(t){return[{tooltip:x(t,m.P50),value:"p50()",label:(0,i.t)("Duration p50"),field:"p50(transaction.duration)"},{tooltip:x(t,m.P75),value:"p75()",label:(0,i.t)("Duration p75"),field:"p75(transaction.duration)",isLeftDefault:!0},{tooltip:x(t,m.P95),value:"p95()",label:(0,i.t)("Duration p95"),field:"p95(transaction.duration)"},{tooltip:x(t,m.P99),value:"p99()",label:(0,i.t)("Duration p99"),field:"p99(transaction.duration)"},{tooltip:x(t,m.TPM),value:"tpm()",label:(0,i.t)("Transactions Per Minute"),field:"tpm()"},{tooltip:x(t,m.FAILURE_RATE),value:"failure_rate()",label:(0,i.t)("Failure Rate"),field:"failure_rate()"},{tooltip:x(t,m.DURATION_DISTRIBUTION),value:"duration_distribution",label:(0,i.t)("Duration Distribution"),field:"transaction.duration",isDistribution:!0,isRightDefault:!0},{tooltip:x(t,m.APDEX),value:"apdex()",label:(0,i.t)("Apdex"),field:"apdex()"}]}function y(t){return[{tooltip:x(t,m.APP_START_COLD),value:"p50(measurements.app_start_cold)",label:(0,i.t)("Cold Start Duration p50"),field:"p50(measurements.app_start_cold)"},{tooltip:x(t,m.APP_START_COLD),value:"p75(measurements.app_start_cold)",label:(0,i.t)("Cold Start Duration p75"),field:"p75(measurements.app_start_cold)",isLeftDefault:!0},{tooltip:x(t,m.APP_START_COLD),value:"p95(measurements.app_start_cold)",label:(0,i.t)("Cold Start Duration p95"),field:"p95(measurements.app_start_cold)"},{tooltip:x(t,m.APP_START_COLD),value:"p99(measurements.app_start_cold)",label:(0,i.t)("Cold Start Duration p99"),field:"p99(measurements.app_start_cold)"},{tooltip:x(t,m.DURATION_DISTRIBUTION),value:"app_start_cold_distribution",label:(0,i.t)("Cold Start Distribution"),field:"measurements.app_start_cold",isDistribution:!0,isRightDefault:!0},{tooltip:x(t,m.APP_START_WARM),value:"p50(measurements.app_start_warm)",label:(0,i.t)("Warm Start Duration p50"),field:"p50(measurements.app_start_warm)"},{tooltip:x(t,m.APP_START_WARM),value:"p75(measurements.app_start_warm)",label:(0,i.t)("Warm Start Duration p75"),field:"p75(measurements.app_start_warm)"},{tooltip:x(t,m.APP_START_WARM),value:"p95(measurements.app_start_warm)",label:(0,i.t)("Warm Start Duration p95"),field:"p95(measurements.app_start_warm)"},{tooltip:x(t,m.APP_START_WARM),value:"p99(measurements.app_start_warm)",label:(0,i.t)("Warm Start Duration p99"),field:"p99(measurements.app_start_warm)"},{tooltip:x(t,m.DURATION_DISTRIBUTION),value:"app_start_warm_distribution",label:(0,i.t)("Warm Start Distribution"),field:"measurements.app_start_warm",isDistribution:!0},{tooltip:x(t,m.TPM),value:"tpm()",label:(0,i.t)("Transactions Per Minute"),field:"tpm()"},{tooltip:x(t,m.FAILURE_RATE),value:"failure_rate()",label:(0,i.t)("Failure Rate"),field:"failure_rate()"}]}!function(t){t.APDEX="apdex",t.TPM="tpm",t.THROUGHPUT="throughput",t.FAILURE_RATE="failureRate",t.P50="p50",t.P75="p75",t.P95="p95",t.P99="p99",t.LCP="lcp",t.FCP="fcp",t.FID="fid",t.CLS="cls",t.USER_MISERY="userMisery",t.STATUS_BREAKDOWN="statusBreakdown",t.DURATION_DISTRIBUTION="durationDistribution",t.USER_MISERY_NEW="userMiseryNew",t.APDEX_NEW="apdexNew",t.APP_START_COLD="appStartCold",t.APP_START_WARM="appStartWarm",t.SLOW_FRAMES="slowFrames",t.FROZEN_FRAMES="frozenFrames",t.STALL_PERCENTAGE="stallPercentage",t.MOST_ISSUES="mostIssues",t.MOST_ERRORS="mostErrors",t.SLOW_HTTP_SPANS="slowHTTPSpans"}(m||(m={}));const _={apdex:()=>(0,i.t)("Apdex is the ratio of both satisfactory and tolerable response times to all response times. To adjust the tolerable threshold, go to performance settings."),tpm:()=>(0,i.t)("TPM is the number of recorded transaction events per minute."),throughput:()=>(0,i.t)("Throughput is the number of recorded transaction events per minute."),failureRate:()=>(0,i.t)("Failure rate is the percentage of recorded transactions that had a known and unsuccessful status."),p50:()=>(0,i.t)("p50 indicates the duration that 50% of transactions are faster than."),p75:()=>(0,i.t)("p75 indicates the duration that 75% of transactions are faster than."),p95:()=>(0,i.t)("p95 indicates the duration that 95% of transactions are faster than."),p99:()=>(0,i.t)("p99 indicates the duration that 99% of transactions are faster than."),lcp:()=>(0,i.t)("Largest contentful paint (LCP) is a web vital meant to represent user load times"),fcp:()=>(0,i.t)("First contentful paint (FCP) is a web vital meant to represent user load times"),fid:()=>(0,i.t)("First input delay (FID) is a web vital representing load for the first user interaction on a page."),cls:()=>(0,i.t)("Cumulative layout shift (CLS) is a web vital measuring unexpected visual shifting a user experiences."),userMisery:t=>(0,i.t)("User Misery is a score that represents the number of unique users who have experienced load times 4x your organization's apdex threshold of %sms.",t.apdexThreshold),statusBreakdown:()=>(0,i.t)("The breakdown of transaction statuses. This may indicate what type of failure it is."),durationDistribution:()=>(0,i.t)("Distribution buckets counts of transactions at specifics times for your current date range"),userMiseryNew:()=>(0,i.t)("User Misery is a score that represents the number of unique users who have experienced load times 4x the project's configured threshold. Adjust project threshold in project performance settings."),apdexNew:()=>(0,i.t)("Apdex is the ratio of both satisfactory and tolerable response times to all response times. To adjust the tolerable threshold, go to project performance settings."),appStartCold:()=>(0,i.t)("Cold start is a measure of the application start up time from scratch."),appStartWarm:()=>(0,i.t)("Warm start is a measure of the application start up time while still in memory."),slowFrames:()=>(0,i.t)("The count of the number of slow frames in the transaction."),frozenFrames:()=>(0,i.t)("The count of the number of frozen frames in the transaction."),mostErrors:()=>(0,i.t)("Transactions with the most associated errors."),mostIssues:()=>(0,i.t)("The most instances of an issue for a related transaction."),slowHTTPSpans:()=>(0,i.t)("The transactions with the slowest spans of a certain type."),stallPercentage:()=>(0,i.t)("The percentage of the transaction duration in which the application is in a stalled state.")};function x(t,e){return _.hasOwnProperty(e)?_[e](t):""}function S(t,e,r,{isTrends:p=!1,isMetricsData:d=!1}={}){const m=function(t,e){const{query:r}=t,a=r.start&&r.end,c={id:void 0,name:(0,i.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","tpm()","p50()","p95()","failure_rate()","apdex()","count_unique(user)","count_miserable(user)","user_misery()"],version:2},p=Array(c.fields.length).fill(n.z7);p[c.fields.length-1]="110",c.widths=p,r.statsPeriod||a||(c.range=u),c.orderby=(0,o.ro)(r.sort,"-tpm");const d=(0,o.ro)(r.query,""),m=new l.MY(d);m.hasFilter("transaction.duration")||e||m.setFilterValues("transaction.duration",["<15m"]),m.freeText.length>0&&(m.setFilterValues("transaction",["*".concat(m.freeText.join(" "),"*")],!1),m.freeText=[]),c.query=m.formatString();const f=s.ZP.fromNewQueryWithLocation(c,t);return e||f.additionalConditions.addFilterValues("event.type",["transaction"]),f}(t,d);if(p)return m;const f=(0,c.Q_)(t,r,m);switch(null==f?void 0:f.field){case c.BY.FRONTEND_PAGELOAD:return function(t,e){const{query:r}=t,a=r.start&&r.end,c={id:void 0,name:(0,i.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","tpm()","p75(measurements.fcp)","p75(measurements.lcp)","p75(measurements.fid)","p75(measurements.cls)","count_unique(user)","count_miserable(user)","user_misery()"],version:2},p=Array(c.fields.length).fill(n.z7);p[c.fields.length-1]="110",c.widths=p,r.statsPeriod||a||(c.range=u),c.orderby=(0,o.ro)(r.sort,"-tpm");const d=(0,o.ro)(r.query,""),m=new l.MY(d);m.hasFilter("transaction.duration")||e||m.setFilterValues("transaction.duration",["<15m"]),m.freeText.length>0&&(m.setFilterValues("transaction",["*".concat(m.freeText.join(" "),"*")],!1),m.freeText=[]),c.query=m.formatString();const f=s.ZP.fromNewQueryWithLocation(c,t);return e||(f.additionalConditions.addFilterValues("event.type",["transaction"]),f.additionalConditions.addFilterValues("transaction.op",["pageload"])),f}(t,d);case c.BY.FRONTEND_OTHER:return function(t,e,r){const{query:a}=t,c=a.start&&a.end,p={id:void 0,name:(0,i.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","transaction.op","tpm()","p50(transaction.duration)","p75(transaction.duration)","p95(transaction.duration)","count_unique(user)","count_miserable(user)","user_misery()"],version:2},d=Array(p.fields.length).fill(n.z7);d[p.fields.length-1]="110",p.widths=d,a.statsPeriod||c||(p.range=u),p.orderby=(0,o.ro)(a.sort,"-tpm");const m=(0,o.ro)(a.query,""),f=new l.MY(m);f.hasFilter("transaction.duration")||r||f.setFilterValues("transaction.duration",["<15m"]),f.freeText.length>0&&(f.setFilterValues("transaction",["*".concat(f.freeText.join(" "),"*")],!1),f.freeText=[]),p.query=f.formatString();const h=s.ZP.fromNewQueryWithLocation(p,t);return r||(h.additionalConditions.addFilterValues("event.type",["transaction"]),e.features.includes("organizations:performance-landing-widgets")||h.additionalConditions.addFilterValues("!transaction.op",["pageload"])),h}(t,e,d);case c.BY.BACKEND:return function(t,e){const{query:r}=t,a=r.start&&r.end,c={id:void 0,name:(0,i.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","transaction.op","http.method","tpm()","p50()","p95()","failure_rate()","apdex()","count_unique(user)","count_miserable(user)","user_misery()"],version:2},p=Array(c.fields.length).fill(n.z7);p[c.fields.length-1]="110",c.widths=p,r.statsPeriod||a||(c.range=u),c.orderby=(0,o.ro)(r.sort,"-tpm");const d=(0,o.ro)(r.query,""),m=new l.MY(d);m.hasFilter("transaction.duration")||e||m.setFilterValues("transaction.duration",["<15m"]),m.freeText.length>0&&(m.setFilterValues("transaction",["*".concat(m.freeText.join(" "),"*")],!1),m.freeText=[]),c.query=m.formatString();const f=s.ZP.fromNewQueryWithLocation(c,t);return e||f.additionalConditions.addFilterValues("event.type",["transaction"]),f}(t,d);case c.BY.MOBILE:return function(t,e,r,c){const{query:p}=t,d=["team_key_transaction","transaction","project","transaction.op","tpm()","p75(measurements.app_start_cold)","p75(measurements.app_start_warm)","p75(measurements.frames_slow_rate)","p75(measurements.frames_frozen_rate)"],m=r.project;if(m.length>0&&m[0]!==a.mP){const t=e.filter((t=>m.includes(parseInt(t.id,10))));t.length>0&&t.every((t=>"react-native"===t.platform))&&(d.pop(),d.pop(),d.push("p75(measurements.stall_percentage)"))}const f=p.start&&p.end,h={id:void 0,name:(0,i.t)("Performance"),query:"event.type:transaction",projects:[],fields:[...d,"count_unique(user)","count_miserable(user)","user_misery()"],version:2},v=Array(h.fields.length).fill(n.z7);v[h.fields.length-1]="110",h.widths=v,p.statsPeriod||f||(h.range=u),h.orderby=(0,o.ro)(p.sort,"-tpm");const g=(0,o.ro)(p.query,""),y=new l.MY(g);y.hasFilter("transaction.duration")||c||y.setFilterValues("transaction.duration",["<15m"]),y.freeText.length>0&&(y.setFilterValues("transaction",["*".concat(y.freeText.join(" "),"*")],!1),y.freeText=[]),h.query=y.formatString();const _=s.ZP.fromNewQueryWithLocation(h,t);return c||_.additionalConditions.addFilterValues("event.type",["transaction"]),_}(t,r,m,d);default:return m}}function w(t,e){const{query:r}=t,n=(0,p.iF)(t),a=r.start&&r.end,c={id:void 0,name:(0,i.t)("Vitals Performance Details"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","count_unique(user)","count()","p50(".concat(n,")"),"p75(".concat(n,")"),"p95(".concat(n,")"),(0,p.Ve)(n),(0,p.q4)(n)],version:2};r.statsPeriod||a||(c.range=u),c.orderby=(0,o.ro)(r.sort,"-count");const d=(0,o.ro)(r.query,""),m=new l.MY(d);m.freeText.length>0&&(m.setFilterValues("transaction",["*".concat(m.freeText.join(" "),"*")],!1),m.freeText=[]),c.query=m.formatString();const f=s.ZP.fromNewQueryWithLocation(c,t);return e||(f.additionalConditions.addFilterValues("event.type",["transaction"]),f.additionalConditions.addFilterValues("has",[n])),f}},"./app/views/performance/landing/utils.tsx":(t,e,r)=>{r.d(e,{Y1:()=>m,V:()=>f,BY:()=>h,Lx:()=>v,NO:()=>g,kP:()=>y,Cf:()=>_,TT:()=>x,Q_:()=>S,NJ:()=>w,Oo:()=>b,hv:()=>T,Gd:()=>P,ZR:()=>Z});var n=r("../node_modules/react-router/es/index.js"),a=r("../node_modules/lodash/omit.js"),i=r.n(a),s=r("./app/locale.tsx"),o=r("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),l=r("./app/utils/formatters.tsx"),c=r("./app/utils/queryString.tsx"),p=r("./app/utils/tokenizeSearch.tsx"),u=r("./app/views/performance/data.tsx"),d=r("./app/views/performance/utils.tsx");const m="left",f="right";let h;!function(t){t.ALL="all",t.FRONTEND_PAGELOAD="frontend_pageload",t.FRONTEND_OTHER="frontend_other",t.BACKEND="backend",t.MOBILE="mobile"}(h||(h={}));const v=[{label:"All Transactions",field:h.ALL},{label:"Frontend (Pageload)",field:h.FRONTEND_PAGELOAD},{label:"Frontend (Other)",field:h.FRONTEND_OTHER},{label:"Backend",field:h.BACKEND},{label:"Mobile",field:h.MOBILE,isShown:t=>t.features.includes("performance-mobile-vitals")}],g=[{label:"All Transactions",field:h.ALL},{label:"Web Vitals",field:h.FRONTEND_PAGELOAD},{label:"Frontend",field:h.FRONTEND_OTHER},{label:"Backend",field:h.BACKEND},{label:"Mobile",field:h.MOBILE,isShown:t=>t.features.includes("performance-mobile-vitals")}];function y(t,e){const{eventView:r,location:a}=e,i=new p.MY(r.query);i.addFilterValues("!transaction",["".concat(t)]),n.browserHistory.push({pathname:a.pathname,query:{...a.query,cursor:void 0,query:i.formatString()}})}function _(t){var e;const r=(0,c.ro)(null==t||null===(e=t.query)||void 0===e?void 0:e.landingDisplay);return v.find((({field:t})=>t===r))}function x(t,e){const r=b(t,e);return v.find((({field:t})=>t===r))||v[0]}function S(t,e,r){return _(t)||x(e,r)}function w(t,e,r,a,s){const l=(0,c.ro)(e.query.query,""),u=new p.MY(l);u.removeFilter("transaction.op");const d={...i()(e.query,["landingDisplay","sort"]),query:u.formatString()};delete d[m],delete d[f];const h=b(r,s),v=S(e,r,s).field,g=h===t?{...d}:{...d,landingDisplay:t};(0,o.Z)("performance_views.landingv3.display_change",{organization:a,change_to_display:t,default_display:h,current_display:v,is_default:h===v}),n.browserHistory.push({pathname:e.pathname,query:g})}function b(t,e){var r;if(!e)return h.ALL;const n=e.project;return null!==(r={[d.iy.ANY]:h.ALL,[d.iy.FRONTEND]:h.FRONTEND_PAGELOAD,[d.iy.BACKEND]:h.BACKEND,[d.iy.MOBILE]:h.MOBILE}[(0,d.Bh)(t,n)])&&void 0!==r?r:h.ALL}const T=t=>({"p75(transaction.duration)":{title:(0,s.t)("Duration (p75)"),tooltip:(0,u.$r)(t,u.V$.P75),formatter:t=>(0,l.g9)(t/1e3,t>=1e3?3:0,!0)},"tpm()":{title:(0,s.t)("Throughput"),tooltip:(0,u.$r)(t,u.V$.THROUGHPUT),formatter:l.Du},"failure_rate()":{title:(0,s.t)("Failure Rate"),tooltip:(0,u.$r)(t,u.V$.FAILURE_RATE),formatter:t=>(0,l.rl)(t,2)},"apdex()":{title:(0,s.t)("Apdex"),tooltip:(0,u.$r)(t,u.V$.APDEX_NEW),formatter:t=>(0,l.$1)(t,4)},"p75(measurements.frames_slow_rate)":{title:(0,s.t)("Slow Frames (p75)"),tooltip:(0,u.$r)(t,u.V$.SLOW_FRAMES),formatter:t=>(0,l.rl)(t,2)},"p75(measurements.frames_frozen_rate)":{title:(0,s.t)("Frozen Frames (p75)"),tooltip:(0,u.$r)(t,u.V$.FROZEN_FRAMES),formatter:t=>(0,l.rl)(t,2)},"p75(measurements.app_start_cold)":{title:(0,s.t)("Cold Start (p75)"),tooltip:(0,u.$r)(t,u.V$.APP_START_COLD),formatter:t=>(0,l.g9)(t/1e3,t>=1e3?3:0,!0)},"p75(measurements.app_start_warm)":{title:(0,s.t)("Warm Start (p75)"),tooltip:(0,u.$r)(t,u.V$.APP_START_WARM),formatter:t=>(0,l.g9)(t/1e3,t>=1e3?3:0,!0)},"p75(measurements.stall_percentage)":{title:(0,s.t)("Stall Percentage (p75)"),tooltip:(0,u.$r)(t,u.V$.STALL_PERCENTAGE),formatter:t=>(0,l.rl)(t,2)}});function P(t,e){const r=t.find((t=>t.isLeftDefault))||t[0],n=t.find((t=>t.isRightDefault))||t[1];return{leftAxis:t.find((t=>t.value===e.query[m]))||r,rightAxis:t.find((t=>t.value===e.query[f]))||n}}function Z(t){return Boolean(t.getFields().find((t=>t.includes("measurements.stall_percentage"))))}},"./app/views/performance/metricsSwitch.tsx":(t,e,r)=>{r.d(e,{BR:()=>m,z5:()=>v,_4:()=>g,j9:()=>h});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js")),i=r("./app/components/acl/feature.tsx"),s=r("./app/components/switchButton.tsx"),o=r("./app/locale.tsx"),l=r("./app/styles/space.tsx"),c=r("./app/utils/localStorage.tsx"),p=r("./app/utils/useOrganization.tsx"),u=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const d="metrics-performance-ui";function m({onSwitch:t}){const e=(0,p.Z)(),{isMetricsData:r,setIsMetricsData:n}=g();return(0,u.tZ)(i.Z,{features:[d],organization:e,children:(0,u.BX)(f,{children:[(0,o.t)("Metrics Data"),(0,u.tZ)(s.Z,{isActive:r,toggle:function(){t(),n(!r)},size:"lg"})]})})}m.displayName="MetricsSwitch";const f=(0,n.Z)("label",{target:"euzi8um0"})("display:flex;align-items:center;justify-content:center;margin-bottom:0;gap:",(0,l.Z)(1),";font-weight:normal;"),h=(0,a.createContext)({isMetricsData:!1,setIsMetricsData:t=>{}});function v({children:t}){const e=(0,p.Z)(),r="metrics.performance:".concat(e.slug),[n,i]=(0,a.useState)("true"===c.Z.getItem(r));return(0,u.tZ)(h.Provider,{value:{isMetricsData:n&&e.features.includes(d),setIsMetricsData:function(t){c.Z.setItem(r,t.toString()),i(t)}},children:t})}function g(){return(0,a.useContext)(h)}v.displayName="MetricsSwitchContextContainer"},"./app/views/performance/transactionSummary/tabs.tsx":(t,e,r)=>{var n;r.d(e,{Z:()=>a}),function(t){t[t.TransactionSummary=0]="TransactionSummary",t[t.WebVitals=1]="WebVitals",t[t.Tags=2]="Tags",t[t.Events=3]="Events",t[t.Spans=4]="Spans"}(n||(n={}));const a=n},"./app/views/performance/transactionSummary/transactionEvents/utils.tsx":(t,e,r)=>{r.d(e,{q3:()=>o,_S:()=>l,xr:()=>c,tb:()=>p,qg:()=>u,Zq:()=>d});var n=r("./app/locale.tsx"),a=r("./app/utils/queryString.tsx"),i=r("./app/views/performance/transactionSummary/filter.tsx"),s=r("./app/views/performance/transactionSummary/utils.tsx");let o;function l(t,e){const{p99:r,p95:a,p75:s,p50:l}=e||{p99:0,p95:0,p75:0,p50:0};return{[o.p50]:{name:o.p50,query:l?[["transaction.duration","<=".concat(l.toFixed(0))]]:void 0,sort:{kind:"desc",field:(0,i.T$)(t)||"transaction.duration"},label:(0,n.t)("p50")},[o.p75]:{name:o.p75,query:s?[["transaction.duration","<=".concat(s.toFixed(0))]]:void 0,sort:{kind:"desc",field:(0,i.T$)(t)||"transaction.duration"},label:(0,n.t)("p75")},[o.p95]:{name:o.p95,query:a?[["transaction.duration","<=".concat(a.toFixed(0))]]:void 0,sort:{kind:"desc",field:(0,i.T$)(t)||"transaction.duration"},label:(0,n.t)("p95")},[o.p99]:{name:o.p99,query:r?[["transaction.duration","<=".concat(r.toFixed(0))]]:void 0,sort:{kind:"desc",field:(0,i.T$)(t)||"transaction.duration"},label:(0,n.t)("p99")},[o.p100]:{name:o.p100,label:(0,n.t)("p100")}}}function c({orgSlug:t,transaction:e,projectID:r,query:n}){return{pathname:"/organizations/".concat(t,"/performance/summary/events/"),query:{transaction:e,project:r,environment:n.environment,statsPeriod:n.statsPeriod,start:n.start,end:n.end,query:n.query}}}function p(t){return e=(0,a.ro)(t.query.showTransactions,o.p100),Object.values(o).includes(e)?e:o.p100;var e}function u(t,e){var r,n;const a=l(e),i=null===(r=a[t].sort)||void 0===r?void 0:r.kind,s=null===(n=a[t].sort)||void 0===n?void 0:n.field,o={showTransactions:t};return i&&s&&(o.sort="".concat("desc"===i?"-":"").concat(s)),o}function d(t){switch(t){case s.K0.OUTLIER:return o.p100;case s.K0.SLOW:return o.p95;default:return}}!function(t){t.p50="p50",t.p75="p75",t.p95="p95",t.p99="p99",t.p100="p100"}(o||(o={}))},"./app/views/performance/transactionSummary/transactionSpans/types.tsx":(t,e,r)=>{let n,a;r.d(e,{p:()=>n,g:()=>a}),function(t){t.P50_EXCLUSIVE_TIME="p50ExclusiveTime",t.P75_EXCLUSIVE_TIME="p75ExclusiveTime",t.P95_EXCLUSIVE_TIME="p95ExclusiveTime",t.P99_EXCLUSIVE_TIME="p99ExclusiveTime"}(n||(n={})),function(t){t.COUNT="count",t.AVG_OCCURRENCE="avgOccurrence",t.SUM_EXCLUSIVE_TIME="sumExclusiveTime"}(a||(a={}))},"./app/views/performance/transactionSummary/transactionSpans/utils.tsx":(t,e,r)=>{r.d(e,{hN:()=>m,bc:()=>f,CS:()=>h,E5:()=>v,TK:()=>_,KK:()=>x,W6:()=>S,xz:()=>w,zW:()=>b,uQ:()=>T}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=r("../node_modules/lodash/pick.js"),a=r.n(n),i=r("./app/constants/index.tsx"),s=r("./app/locale.tsx"),o=r("./app/utils.tsx"),l=r("./app/utils/discover/eventView.tsx"),c=r("./app/utils/discover/fields.tsx"),p=r("./app/utils/queryString.tsx"),u=r("./app/utils/tokenizeSearch.tsx"),d=r("./app/views/performance/transactionSummary/transactionSpans/types.tsx");function m({orgSlug:t,transaction:e,projectID:r,query:n}){return{pathname:function({orgSlug:t}){return"/organizations/".concat(t,"/performance/summary/spans/")}({orgSlug:t}),query:{transaction:e,project:r,environment:n.environment,statsPeriod:n.statsPeriod,start:n.start,end:n.end,query:n.query}}}const f=30,h=a()(i.wh,["1h","24h","7d","14d","30d"]),v=[{prefix:(0,s.t)("Sort By"),label:(0,s.t)("Total Exclusive Time"),field:d.g.SUM_EXCLUSIVE_TIME},{prefix:(0,s.t)("Sort By"),label:(0,s.t)("Average Count"),field:d.g.AVG_OCCURRENCE},{prefix:(0,s.t)("Sort By"),label:(0,s.t)("Total Count"),field:d.g.COUNT},{prefix:(0,s.t)("Sort By"),label:(0,s.t)("p50 Exclusive Time"),field:d.p.P50_EXCLUSIVE_TIME},{prefix:(0,s.t)("Sort By"),label:(0,s.t)("p75 Exclusive Time"),field:d.p.P75_EXCLUSIVE_TIME},{prefix:(0,s.t)("Sort By"),label:(0,s.t)("p95 Exclusive Time"),field:d.p.P95_EXCLUSIVE_TIME},{prefix:(0,s.t)("Sort By"),label:(0,s.t)("p99 Exclusive Time"),field:d.p.P99_EXCLUSIVE_TIME}],g=d.g.SUM_EXCLUSIVE_TIME;function y(t){return v.find((e=>e.field===t))||v.find((t=>t.field===g))}function _(t,e="sort"){var r,n;return y(null!==(r=(0,p.ro)(null==t||null===(n=t.query)||void 0===n?void 0:n[e]))&&void 0!==r?r:g)}function x(t){return y(t.sorts.length?t.sorts[0].field:g)}function S(t){if(!(0,o.ri)(t))return;const e=t.lastIndexOf(":");return e<0?void 0:{op:t.slice(0,e),group:t.slice(e+1)}}function w({location:t,transactionName:e,isMetricsData:r}){const n=(0,p.ro)(t.query.query,""),a=new u.MY(n);r||a.setFilterValues("event.type",["transaction"]),a.setFilterValues("transaction",[e]);const i=l.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:e,fields:[...Object.values(d.g),...Object.values(d.p)],query:a.formatString(),projects:[]},t),s=_(t);return i.withSorts([{field:s.field,kind:"desc"}])}function b(t){const e=t.withColumns([{kind:"function",function:["count","",void 0,void 0]}]),r=new u.MY(t.query);return Object.keys(r.filters).forEach((t=>{(0,c.h1)(t)&&r.removeFilter(t)})),e.query=r.formatString(),e}const T={[d.g.SUM_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.g.AVG_OCCURRENCE]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","equation|count() / count_unique(id)","sumArray(spans_exclusive_time)"],[d.g.COUNT]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P50_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.5)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P75_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P95_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.95)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P99_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.99)","count()","count_unique(id)","sumArray(spans_exclusive_time)"]}},"./app/views/performance/transactionSummary/transactionTags/utils.tsx":(t,e,r)=>{r.d(e,{Zn:()=>i,bZ:()=>s,vG:()=>o,oc:()=>l,oT:()=>c});var n=r("./app/utils/analytics.tsx"),a=r("./app/utils/queryString.tsx");function i(t){return(0,a.ro)(t.query.tagKey)}function s(t){(0,n.ec)({eventKey:"performance_views.tags.interaction",eventName:"Performance Views: Tag Page - Interaction",organization_id:parseInt(t.id,10)})}function o({orgSlug:t,transaction:e,projectID:r,query:n}){return{pathname:function({orgSlug:t}){return"/organizations/".concat(t,"/performance/summary/tags/")}({orgSlug:t}),query:{transaction:e,project:r,environment:n.environment,statsPeriod:n.statsPeriod,start:n.start,end:n.end,query:n.query,tagKey:n.tagKey}}}function l(t){var e,r;let n=null!==(e=(0,a.ro)(null===(r=t.query)||void 0===r?void 0:r.tagSort))&&void 0!==e?e:"-frequency";return["sumdelta"].find((t=>{var e;return null===(e=n)||void 0===e?void 0:e.includes(t)}))&&(n="-frequency"),n}function c(t){const e=Object.keys(t).find((t=>t.includes("histogram")));if(!e)return;const r=e.split("_");return{histogramField:e,bucketSize:parseInt(r[r.length-3],10),offset:parseInt(r[r.length-2],10),multiplier:parseInt(r[r.length-1],10)}}},"./app/views/performance/transactionSummary/transactionVitals/utils.tsx":(t,e,r)=>{r.d(e,{Pl:()=>a,oZ:()=>i,eH:()=>s,L0:()=>o,jb:()=>l});var n=r("./app/utils/performance/histogram/utils.tsx");function a({orgSlug:t,transaction:e,projectID:r,query:n}){return{pathname:function({orgSlug:t}){return"/organizations/".concat(t,"/performance/summary/vitals/")}({orgSlug:t}),query:{transaction:e,project:r,environment:n.environment,statsPeriod:n.statsPeriod,start:n.start,end:n.end,query:n.query}}}function i(t,e){const r=(0,n.te)(t);return!t.length||e>=t[t.length-1].bin+r?null:e<t[0].bin?-1:Math.floor((e-t[0].bin)/r)}function s(t){if(t.length<2)return null;for(let e=0;e<t.length;e++){const r=t[e];for(let n=e+1;n<t.length;n++){const a=t[n];if(r.bin!==a.bin&&r.count!==a.count)return{point1:{x:e,y:Math.min(r.count,a.count)},point2:{x:n,y:Math.max(r.count,a.count)}}}}return{point1:{x:0,y:0},point2:{x:1,y:1}}}function o(t,e){const r=t.convertToPixel({xAxisIndex:0,yAxisIndex:0},[e.point1.x,e.point1.y]);if(isNaN(null==r?void 0:r[0])||isNaN(null==r?void 0:r[1]))return null;const n=t.convertToPixel({xAxisIndex:0,yAxisIndex:0},[e.point2.x,e.point2.y]);return isNaN(null==n?void 0:n[0])||isNaN(null==n?void 0:n[1])?null:{point1:{x:r[0],y:r[1]},point2:{x:n[0],y:n[1]}}}function l(t,e,r){if(e.point1.x===e.point2.x||e.point1.y===e.point2.y||r.point1.x===r.point2.x||r.point1.y===r.point2.y)return null;const n=(t.x-e.point1.x)/(e.point2.x-e.point1.x),a=(t.y-e.point1.y)/(e.point2.y-e.point1.y);return{x:r.point1.x+(r.point2.x-r.point1.x)*n,y:r.point1.y+(r.point2.y-r.point1.y)*a}}},"./app/views/performance/vitalDetail/index.tsx":(t,e,r)=>{r.r(e),r.d(e,{default:()=>Xt});var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.string.trim.js"),r("../node_modules/core-js/modules/es.string.replace.js"),r("../node_modules/react/index.js")),s=r("../node_modules/react-router/es/index.js"),o=r("../node_modules/lodash/isEqual.js"),l=r.n(o),c=r("./app/actionCreators/tags.tsx"),p=r("./app/components/noProjectMessage.tsx"),u=r("./app/components/organizations/pageFilters/container.tsx"),d=r("./app/components/sentryDocumentTitle.tsx"),m=r("./app/locale.tsx"),f=r("./app/styles/organization.tsx"),h=r("./app/utils/discover/fields.tsx"),v=r("./app/utils/performance/contexts/performanceEventViewContext.tsx"),g=r("./app/utils/queryString.tsx"),y=r("./app/utils/withApi.tsx"),_=r("./app/utils/withOrganization.tsx"),x=r("./app/utils/withPageFilters.tsx"),S=r("./app/utils/withProjects.tsx"),w=r("./app/views/performance/data.tsx"),b=r("./app/views/performance/metricsSwitch.tsx"),T=r("./app/views/performance/utils.tsx"),P=r("../node_modules/lodash/omit.js"),Z=r.n(P),D=r("./app/components/acl/feature.tsx"),E=r("./app/components/alert.tsx"),A=r("./app/components/button.tsx"),C=r("./app/components/buttonBar.tsx"),q=r("./app/components/charts/utils.tsx"),j=r("./app/components/createAlertButton.tsx"),I=r("./app/components/events/searchBar.tsx"),N=r("./app/components/layouts/thirds.tsx"),F=r("./app/components/loadingIndicator.tsx"),L=r("./app/components/organizations/pageFilters/parse.tsx"),R=r("./app/components/performance/teamKeyTransactionsManager.tsx"),M=r("./app/icons/index.tsx"),V=r("./app/icons/iconFlag.tsx"),O=r("./app/styles/space.tsx"),k=r("./app/utils.tsx"),B=r("./app/utils/dates.tsx"),z=r("./app/utils/metrics/metricsRequest.tsx"),U=r("./app/utils/teams.tsx"),W=r("./app/utils/tokenizeSearch.tsx"),X=r("./app/views/performance/landing/widgets/transforms/transformMetricsToArea.tsx"),H=r("./app/views/performance/landing/widgets/widgetDefinitions.tsx"),Y=r("./app/views/performance/breadcrumb.tsx"),K=r("./app/views/performance/metricsSearchBar.tsx"),$=r("./app/components/gridEditable/index.tsx"),G=r("./app/components/gridEditable/sortLink.tsx"),Q=r("./app/components/links/link.tsx"),J=r("./app/components/pagination.tsx"),tt=r("./app/components/tag.tsx"),et=r("./app/utils/analytics.tsx"),rt=r("./app/utils/discover/eventView.tsx"),nt=r("./app/utils/discover/fieldRenderers.tsx"),at=r("./app/utils/discover/genericDiscoverQuery.tsx"),it=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function st(t){return(0,it.tZ)(at.ZP,{route:"eventsv2",...t})}st.displayName="VitalsCardsDiscoverQuery";const ot=(0,y.Z)(st);var lt=r("./app/views/eventsV2/table/cellAction.tsx"),ct=r("./app/views/performance/transactionSummary/transactionOverview/charts.tsx"),pt=r("./app/views/performance/transactionSummary/utils.tsx"),ut=r("./app/views/performance/vitalDetail/utils.tsx");const dt=["Transaction","Project","Unique Users","Count"];class mt extends i.Component{constructor(...t){super(...t),(0,n.Z)(this,"state",{widths:[]}),(0,n.Z)(this,"handleCellAction",(t=>(e,r)=>{const{eventView:n,location:a,organization:i}=this.props;(0,et.ec)({eventKey:"performance_views.overview.cellaction",eventName:"Performance Views: Cell Action Clicked",organization_id:parseInt(i.id,10),action:e});const o=new W.MY(n.query);o.removeFilter("event.type"),(0,lt.rh)(o,e,t,r),s.browserHistory.push({pathname:a.pathname,query:{...a.query,cursor:void 0,query:o.formatString()}})})),(0,n.Z)(this,"renderBodyCellWithData",((t,e)=>(r,n)=>this.renderBodyCell(t,r,n,e))),(0,n.Z)(this,"renderHeadCellWithMeta",((t,e)=>(r,n)=>this.renderHeadCell(t,r,((t,e)=>{const r=ut.a7[e];return[...dt,"p50(".concat(r,")"),"p75(".concat(r,")"),"p95(".concat(r,")"),"Status"][t]})(n,e)))),(0,n.Z)(this,"renderPrependCellWithData",((t,e)=>{const{eventView:r}=this.props,n=r.getColumns().find((t=>"team_key_transaction"===t.name));return(r,a)=>{if(n){if(r){const e=(0,it.tZ)(M.GK,{color:"yellow300",isSolid:!0,"data-test-id":"key-transaction-header"},"keyTransaction");return[this.renderHeadCell(null==t?void 0:t.meta,n,e)]}return[this.renderBodyCell(t,n,a,e)]}return[]}})),(0,n.Z)(this,"handleSummaryClick",(()=>{const{organization:t}=this.props;(0,et.ec)({eventKey:"performance_views.overview.navigate.summary",eventName:"Performance Views: Overview view summary",organization_id:parseInt(t.id,10)})})),(0,n.Z)(this,"handleResizeColumn",((t,e)=>{const r=[...this.state.widths];r[t]=e.width?Number(e.width):$.z7,this.setState({widths:r})}))}renderBodyCell(t,e,r,n){const{eventView:a,organization:i,projects:s,location:o,summaryConditions:l}=this.props;if(!t||!t.meta)return r[e.key];const c=t.meta,p=String(e.key);if(p===(0,ut.Ve)(n))return r[(0,h.LY)(p)]?(0,it.tZ)(ft,{children:(0,it.tZ)(gt,{children:(0,m.t)("Poor")})}):r[(0,h.LY)((0,ut.q4)(n))]?(0,it.tZ)(ft,{children:(0,it.tZ)(vt,{children:(0,m.t)("Meh")})}):(0,it.tZ)(ft,{children:(0,it.tZ)(ht,{children:(0,m.t)("Good")})});const u=(0,nt.Js)(p,c)(r,{organization:i,location:o}),d=[lt.eX.ADD,lt.eX.EXCLUDE,lt.eX.SHOW_GREATER_THAN,lt.eX.SHOW_LESS_THAN];if("transaction"===p){const t=function(t,e){const r=(null==t?void 0:t.project)||void 0;if(void 0===typeof r)return;const n=e.find((t=>t.slug===r));return n?n.id:void 0}(r,s),o=a.clone(),c=new W.MY(l);c.addFilterValues("has",["".concat(n)]),o.query=c.formatString();const p=String(r.transaction)||"",f=(0,pt.e1)({orgSlug:i.slug,transaction:p,query:o.generateQueryStringObject(),projectID:t,showTransactions:pt.K0.RECENT,display:ct.D.VITALS});return(0,it.tZ)(lt.ZP,{column:e,dataRow:r,handleCellAction:this.handleCellAction(e),allowActions:d,children:(0,it.tZ)(Q.Z,{to:f,"aria-label":(0,m.t)("See transaction summary of the transaction %s",p),onClick:this.handleSummaryClick,children:u})})}return p.startsWith("team_key_transaction")?u:(0,it.tZ)(lt.ZP,{column:e,dataRow:r,handleCellAction:this.handleCellAction(e),allowActions:d,children:u})}renderHeadCell(t,e,r){const{eventView:n,location:a}=this.props,i=(0,h.qG)(e.name,e.type,t),s={field:e.name,width:e.width},o=n.sortForField(s,t),l=(0,rt.M3)(s,t);return(0,it.tZ)(G.Z,{align:i,title:r||s.field,direction:o?o.kind:void 0,canSort:l,generateSortLink:function(){if(!t)return;const e=n.sortOnField(s,t).generateQueryStringObject();return{...a,query:{...a.query,sort:e.sort}}}})}getSortedEventView(t){const{eventView:e}=this.props,r=(0,h.LY)((0,ut.Ve)(t)),n=(0,h.LY)((0,ut.q4)(t)),a=e.sorts.some((t=>t.field.includes(r)||t.field.includes(n)))?[]:[{field:"team_key_transaction",kind:"desc"},{field:r,kind:"desc"},{field:n,kind:"desc"}];return e.withSorts([...a,...e.sorts])}render(){const{eventView:t,organization:e,location:r}=this.props,{widths:n}=this.state,a=t.clone();a.fields=[...t.fields];const s=a.getColumns().filter((t=>"team_key_transaction"!==t.name)).slice(0,-1).map(((t,e)=>"number"==typeof n[e]?{...t,width:n[e]}:t)),o=(0,ut.iF)(r),l=this.getSortedEventView(o),c=l.getSorts();return(0,it.tZ)("div",{children:(0,it.tZ)(ot,{eventView:l,orgSlug:e.slug,location:r,limit:10,referrer:"api.performance.vital-detail",children:({pageLinks:t,isLoading:e,tableData:n})=>(0,it.BX)(i.Fragment,{children:[(0,it.tZ)($.ZP,{isLoading:e,data:n?n.data:[],columnOrder:s,columnSortBy:c,grid:{onResizeColumn:this.handleResizeColumn,renderHeadCell:this.renderHeadCellWithMeta(null==n?void 0:n.meta,o),renderBodyCell:this.renderBodyCellWithData(n,o),renderPrependColumns:this.renderPrependCellWithData(n,o),prependColumnWidths:["max-content"]},location:r}),(0,it.tZ)(J.Z,{pageLinks:t})]})})})}}mt.displayName="Table";const ft=(0,a.Z)("div",{target:"ebw8yf93"})({name:"1gnrgb9",styles:"text-align:right;justify-self:flex-end;flex-grow:1"}),ht=(0,a.Z)(tt.Z,{target:"ebw8yf92"})("div{background-color:",(t=>t.theme[ut.fL[ut.SP.GOOD]]),";}span{color:",(t=>t.theme.white),";}"),vt=(0,a.Z)(tt.Z,{target:"ebw8yf91"})("div{background-color:",(t=>t.theme[ut.fL[ut.SP.MEH]]),";}span{color:",(t=>t.theme.white),";}"),gt=(0,a.Z)(tt.Z,{target:"ebw8yf90"})("div{background-color:",(t=>t.theme[ut.fL[ut.SP.POOR]]),";}span{color:",(t=>t.theme.white),";}"),yt=mt;var _t=r("./app/views/performance/vitalDetail/vitalChart.tsx"),xt=r("../node_modules/@emotion/react/dist/emotion-element-a8309070.browser.esm.js"),St=r("../node_modules/moment/moment.js"),wt=r.n(St),bt=r("./app/components/charts/chartZoom.tsx"),Tt=r("./app/components/charts/errorPanel.tsx"),Pt=r("./app/components/charts/lineChart.tsx"),Zt=r("./app/components/charts/releaseSeries.tsx"),Dt=r("./app/components/charts/styles.tsx"),Et=r("./app/components/charts/transitionChart.tsx"),At=r("./app/components/charts/transparentLoadingMask.tsx"),Ct=r("./app/components/panels/index.tsx"),qt=r("./app/components/questionTooltip.tsx"),jt=r("./app/utils/getDynamicText.tsx"),It=r("./app/views/performance/trends/utils.tsx");function Nt({reloading:t,loading:e,response:r,errored:n,statsPeriod:a,start:i,end:o,project:l,environment:c,field:p,vital:u,router:d,location:f}){const h=(0,xt.u)(),{utc:v,legend:g,vitalPoor:y,markLines:_,chartOptions:x}=(0,ut.EX)({theme:h,location:f,vital:u,yAxis:p});function S(t){const{selected:e}=t,r=Object.keys(e).filter((t=>!e[t])),n={...f,query:{...f.query,unselectedSeries:r}};s.browserHistory.push(n)}return(0,it.tZ)(Ct.s_,{children:(0,it.BX)(Dt.BO,{children:[(0,it.BX)(Dt.ws,{children:[(0,m.t)("Duration p75"),(0,it.tZ)(qt.Z,{size:"sm",position:"top",title:(0,m.t)("The durations shown should fall under the vital threshold.")})]}),(0,it.tZ)(bt.Z,{router:d,period:a,start:i,end:o,utc:v,children:s=>{if(n)return(0,it.tZ)(Tt.Z,{children:(0,it.tZ)(M.FC,{color:"gray500",size:"lg"})});const u=null==r?void 0:r.groups.map((t=>({seriesName:p,data:r.intervals.map(((e,r)=>({name:wt()(e).valueOf(),value:t.series[p][r]})))}))),d=u&&h.charts.getColorPalette(u.length-2)||[],{smoothedResults:m}=(0,It.vq)(u),f=m?m.map((({seriesName:t,...e},r)=>({seriesName:(0,It.HF)(t)||"p75",...e,color:d[r],lineStyle:{opacity:1,width:2}}))):[],w=(0,ut.vk)(f),b=Math.max(w,y);return x.yAxis.max=1.1*b,(0,it.tZ)(Zt.Z,{start:i,end:o,period:a,utc:v,projects:l,environments:c,children:({releaseSeries:r})=>(0,it.BX)(Et.Z,{loading:e,reloading:t,children:[(0,it.tZ)(At.Z,{visible:t}),(0,jt.Z)({value:(0,it.tZ)(Pt.Z,{...s,...x,legend:g,onLegendSelectChanged:S,series:[..._,...r,...f]}),fixed:"Web Vitals Chart"})]})})}})]})})}Nt.displayName="VitalChartMetrics";const Ft=(0,s.withRouter)(Nt);var Lt=r("./app/views/performance/vitalDetail/vitalInfo.tsx");const Rt=[h.Zl.FCP,h.Zl.LCP,h.Zl.FID,h.Zl.CLS];class Mt extends i.Component{constructor(...t){super(...t),(0,n.Z)(this,"state",{incompatibleAlertNotice:null,error:void 0}),(0,n.Z)(this,"handleSearch",(t=>{const{location:e}=this.props,r=(0,L.fK)({...e.query||{},query:t}),n=Z()(r,"cursor");s.browserHistory.push({pathname:e.pathname,query:n})})),(0,n.Z)(this,"generateTagUrl",((t,e)=>{const{location:r}=this.props,n=(0,k.ZT)(r.query,{key:t,value:e});return{...r,query:n}})),(0,n.Z)(this,"handleIncompatibleQuery",((t,e)=>{const r=t((()=>this.setState({incompatibleAlertNotice:null})));this.setState({incompatibleAlertNotice:r})})),(0,n.Z)(this,"setError",(t=>{this.setState({error:t})}))}renderCreateAlertButton(){const{eventView:t,organization:e,projects:r}=this.props;return(0,it.tZ)(j.K,{eventView:t,organization:e,projects:r,onIncompatibleQuery:this.handleIncompatibleQuery,onSuccess:()=>{},referrer:"performance"})}renderVitalSwitcher(){const{vitalName:t,location:e}=this.props,r=Rt.indexOf(t);if(r<0)return null;const n=0===r,a=r===Rt.length-1,i=t=>()=>{s.browserHistory.push({pathname:e.pathname,query:{...e.query,vitalName:t}})};return(0,it.BX)(C.ZP,{merged:!0,children:[(0,it.tZ)(A.ZP,{icon:(0,it.tZ)(M.g6,{direction:"left",size:"sm"}),"aria-label":(0,m.t)("Previous"),disabled:n,onClick:i(Rt[r-1])}),(0,it.tZ)(A.ZP,{icon:(0,it.tZ)(M.g6,{direction:"right",size:"sm"}),"aria-label":(0,m.t)("Next"),disabled:a,onClick:i(Rt[r+1])})]})}renderError(){const{error:t}=this.state;return t?(0,it.tZ)(E.Z,{type:"error",icon:(0,it.tZ)(V.G,{size:"md"}),children:t}):null}renderContent(t){const{isMetricsData:e,location:r,organization:n,eventView:a,api:s,projects:o}=this.props,{fields:l,start:c,end:p,statsPeriod:u,environment:d,project:m}=a,f=(0,g.ro)(r.query.query,""),h=n.slug,v=c?(0,B.hC)(c):null,y=p?(0,B.hC)(p):null,_=(0,q.ZS)({start:v,end:y,period:u},"high");if(e){const n="p75(".concat(ut.T4[t],")");return(0,it.BX)(i.Fragment,{children:[(0,it.tZ)(zt,{searchSource:"performance_vitals_metrics",orgSlug:h,projectIds:m,query:f,onSearch:this.handleSearch}),(0,it.tZ)(z.Z,{api:s,orgSlug:h,start:c,end:p,statsPeriod:u,project:m,environment:d,field:[n],query:new W.MY(f).formatString(),interval:_,children:a=>{var s;const{loading:o,errored:l,response:f,reloading:g}=a,_=(0,X.g)({location:r,fields:[n],chartSetting:H.s.P75_DURATION_AREA},a);return(0,it.BX)(i.Fragment,{children:[(0,it.tZ)(Ft,{start:v,end:y,statsPeriod:u,project:m,environment:d,loading:o,response:f,errored:l,reloading:g,field:n,vital:t}),(0,it.tZ)(Bt,{children:(0,it.tZ)(Lt.Z,{orgSlug:h,location:r,vital:t,project:m,environment:d,start:c,end:p,statsPeriod:u,isMetricsData:e,isLoading:o,p75AllTransactions:null===(s=_.dataMean)||void 0===s?void 0:s[0].mean})}),(0,it.tZ)("div",{children:"TODO"})]})}})]})}const x=function(t){const e=new W.MY(t);return e.freeText=[],e.formatString()}((0,T.Ov)(r));return(0,it.BX)(i.Fragment,{children:[(0,it.tZ)(kt,{searchSource:"performance_vitals",organization:n,projectIds:m,query:f,fields:l,onSearch:this.handleSearch}),(0,it.tZ)(_t.Z,{organization:n,query:f,project:m,environment:d,start:v,end:y,statsPeriod:u,interval:_}),(0,it.tZ)(Bt,{children:(0,it.tZ)(Lt.Z,{orgSlug:h,location:r,vital:t,project:m,environment:d,start:c,end:p,statsPeriod:u})}),(0,it.tZ)(U.Z,{provideUserTeams:!0,children:({teams:t,initiallyLoaded:e})=>e?(0,it.tZ)(R.z,{organization:n,teams:t,selectedTeams:["myteams"],selectedProjects:m.map(String),children:(0,it.tZ)(yt,{eventView:a,projects:o,organization:n,location:r,setError:this.setError,summaryConditions:x})}):(0,it.tZ)(F.Z,{})})]})}render(){const{location:t,organization:e,vitalName:r}=this.props,{incompatibleAlertNotice:n}=this.state,a=r||h.Zl.LCP;return(0,it.BX)(i.Fragment,{children:[(0,it.BX)(N.h4,{children:[(0,it.BX)(N.oB,{children:[(0,it.tZ)(Y.Z,{organization:e,location:t,vitalName:a}),(0,it.tZ)(N.Dx,{children:ut.jo[a]})]}),(0,it.tZ)(N.kP,{children:(0,it.BX)(C.ZP,{gap:1,children:[(0,it.tZ)(b.BR,{onSwitch:()=>this.handleSearch("")}),(0,it.tZ)(D.Z,{organization:e,features:["incidents"],children:({hasFeature:t})=>t&&this.renderCreateAlertButton()}),this.renderVitalSwitcher()]})})]}),(0,it.BX)(N.uT,{children:[this.renderError(),n&&(0,it.tZ)(N.or,{fullWidth:!0,children:n}),(0,it.BX)(N.or,{fullWidth:!0,children:[(0,it.tZ)(Ot,{children:ut.il[r]}),this.renderContent(a)]})]})]})}}Mt.displayName="VitalDetailContent";const Vt=(0,S.Z)(Mt),Ot=(0,a.Z)("div",{target:"e150wv1u3"})("font-size:",(t=>t.theme.fontSizeMedium),";margin-bottom:",(0,O.Z)(3),";"),kt=(0,a.Z)(I.Z,{target:"e150wv1u2"})("margin-bottom:",(0,O.Z)(2),";"),Bt=(0,a.Z)("div",{target:"e150wv1u1"})("margin-bottom:",(0,O.Z)(3),";"),zt=(0,a.Z)(K.Z,{target:"e150wv1u0"})("margin-bottom:",(0,O.Z)(2),";");class Ut extends i.Component{constructor(...t){super(...t),(0,n.Z)(this,"state",{eventView:(0,w.AM)(this.props.location,!1)})}static getDerivedStateFromProps(t,e){return{...e,eventView:(0,w.AM)(t.location,!1)}}componentDidMount(){const{api:t,organization:e,selection:r}=this.props;(0,c.QK)(t,e.slug,r),(0,T.n4)(r)}componentDidUpdate(t){const{api:e,organization:r,selection:n}=this.props;l()(t.selection.projects,n.projects)&&l()(t.selection.datetime,n.datetime)||((0,c.QK)(e,r.slug,n),(0,T.n4)(n))}getDocumentTitle(){const t=(0,T.JY)(this.props.location);return"string"==typeof t&&String(t).trim().length>0?[String(t).trim(),(0,m.t)("Performance")].join(" - "):[(0,m.t)("Vital Detail"),(0,m.t)("Performance")].join(" - ")}render(){const{organization:t,location:e,router:r,api:n}=this.props,{eventView:a}=this.state;if(!a)return s.browserHistory.replace({pathname:"/organizations/".concat(t.slug,"/performance/"),query:{...e.query}}),null;const i=(0,g.ro)(e.query.vitalName),o=-1===Object.values(h.Zl).indexOf(i)?void 0:i;return(0,it.tZ)(d.Z,{title:this.getDocumentTitle(),orgSlug:t.slug,children:(0,it.tZ)(v.bq,{value:{eventView:this.state.eventView},children:(0,it.tZ)(u.Z,{children:(0,it.tZ)(Wt,{children:(0,it.tZ)(p.Z,{organization:t,children:(0,it.tZ)(b.j9.Consumer,{children:({isMetricsData:i})=>(0,it.tZ)(Vt,{location:e,organization:t,eventView:a,router:r,vitalName:o||h.Zl.LCP,isMetricsData:i,api:n})})})})})})})}}Ut.displayName="VitalDetail";const Wt=(0,a.Z)(f.JH,{target:"ekkkevo0"})({name:"1hcx8jb",styles:"padding:0"}),Xt=(0,y.Z)((0,x.Z)((0,S.Z)((0,_.Z)(Ut))))},"./app/views/performance/vitalDetail/vitalInfo.tsx":(t,e,r)=>{r.d(e,{Z:()=>m}),r("../node_modules/react/index.js");var n=r("./app/utils/metrics/metricsRequest.tsx"),a=r("./app/utils/performance/vitals/vitalsCardsDiscoverQuery.tsx"),i=r("./app/utils/queryString.tsx"),s=r("./app/utils/tokenizeSearch.tsx"),o=r("./app/utils/useApi.tsx"),l=r("./app/views/performance/landing/vitalsCards.tsx"),c=r("./app/views/performance/landing/widgets/widgets/vitalWidgetMetrics.tsx"),p=r("./app/views/performance/vitalDetail/utils.tsx"),u=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d({orgSlug:t,start:e,end:r,statsPeriod:d,project:m,environment:f,vital:h,location:v,isLoading:g,hideBar:y,hideStates:_,hideVitalPercentNames:x,hideDurationDetail:S,p75AllTransactions:w,isMetricsData:b}){const T=(0,o.Z)(),P=Array.isArray(h)?h:[h],Z={vital:h,showBar:!y,showStates:!_,showVitalPercentNames:!x,showDurationDetail:!S};if(b){const a=(0,i.ro)(v.query.query,""),o=P.map((t=>"count(".concat(p.T4[t],")")));return(0,u.tZ)(n.Z,{api:T,orgSlug:t,start:e,end:r,statsPeriod:d,project:m,environment:f,field:o,query:new s.MY(a).formatString(),groupBy:["measurement_rating"],children:({loading:t,response:e})=>{const r=P.reduce(((t,r,n)=>(t[r]=(0,c.b)({field:o[n],response:e}),t)),{});return Array.isArray(h)||(r[h].p75=null!=w?w:0),(0,u.tZ)(l.JO,{...Z,isLoading:g||t,data:r})}})}return(0,u.tZ)(a.Z,{location:v,vitals:P,children:({isLoading:t,vitalsData:e})=>(0,u.tZ)(l.JO,{...Z,isLoading:g||t,data:e})})}d.displayName="VitalInfo";const m=d}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_vitalDetail_index_tsx.2dbcd81d0b72bf610ce500263825ef82.js.map