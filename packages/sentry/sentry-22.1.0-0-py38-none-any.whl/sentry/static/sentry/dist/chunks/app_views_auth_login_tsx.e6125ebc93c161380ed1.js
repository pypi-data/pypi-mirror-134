"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_auth_login_tsx"],{"./app/views/auth/login.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>G,formFooterClass:()=>Y});var r,o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),a=s("./app/components/loadingError.tsx"),l=s("./app/components/loadingIndicator.tsx"),d=s("./app/components/navTabs.tsx"),p=s("./app/locale.tsx"),c=s("./app/styles/space.tsx"),h=s("./app/utils/withApi.tsx"),m=s("../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),u=s("../node_modules/react-router/es/index.js"),g=s("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),Z=s("./app/components/button.tsx"),b=s("./app/components/forms/form.tsx"),f=s("./app/components/forms/passwordField.tsx"),x=s("./app/components/forms/textField.tsx"),v=s("./app/components/links/link.tsx"),y=s("./app/icons/index.tsx"),S=s("./app/stores/configStore.tsx"),L=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const _=({vstsLoginLink:e,githubLoginLink:t,googleLoginLink:s})=>(0,L.BX)(C,{children:[(0,L.tZ)(N,{children:(0,p.t)("External Account Login")}),s&&(0,L.tZ)(Z.ZP,{align:"left",size:"small",icon:(0,L.tZ)(y.vY,{size:"xs"}),href:s,children:(0,p.t)("Sign in with Google")}),t&&(0,L.tZ)(Z.ZP,{align:"left",size:"small",icon:(0,L.tZ)(y.Uv,{size:"xs"}),href:t,children:(0,p.t)("Sign in with GitHub")}),e&&(0,L.tZ)(Z.ZP,{align:"left",size:"small",icon:(0,L.tZ)(y.mT,{size:"xs"}),href:e,children:(0,p.t)("Sign in with Azure DevOps")})]});_.displayName="LoginProviders";class w extends i.Component{constructor(...e){super(...e),(0,o.Z)(this,"state",{errorMessage:null,errors:{}}),(0,o.Z)(this,"handleSubmit",(async(e,t,s)=>{try{const s=await this.props.api.requestPromise("/auth/login/",{method:"POST",data:e});t(e),S.Z.set("user",s.user),u.browserHistory.push({pathname:s.nextUri})}catch(e){if(!e.responseJSON||!e.responseJSON.errors)return void s(e);let t=e.responseJSON.detail;e.responseJSON.errors.__all__&&(t=e.responseJSON.errors.__all__),this.setState({errorMessage:t,errors:e.responseJSON.errors||{}}),s(e)}}))}render(){const{errorMessage:e,errors:t}=this.state,{githubLoginLink:s,vstsLoginLink:o}=this.props.authConfig,n=!(!s&&!o);return(0,L.tZ)(g.ms,{children:({css:i})=>(0,L.BX)(k,{hasLoginProvider:n,children:[(0,L.BX)(b.Z,{submitLabel:(0,p.t)("Continue"),onSubmit:this.handleSubmit,footerClass:i(r||(r=(0,m.Z)(["\n                ","\n              "])),Y),errorMessage:e,extraButton:(0,L.tZ)(P,{to:"/account/recover/",children:(0,p.t)("Lost your password?")}),children:[(0,L.tZ)(x.Z,{name:"username",placeholder:(0,p.t)("username or email"),label:(0,p.t)("Account"),error:t.username,required:!0}),(0,L.tZ)(f.Z,{name:"password",placeholder:(0,p.t)("password"),label:(0,p.t)("Password"),error:t.password,required:!0})]}),n&&(0,L.tZ)(_,{vstsLoginLink:o,githubLoginLink:s})]})})}}w.displayName="LoginForm";const k=(0,n.Z)("div",{target:"e1f436793"})("display:grid;gap:60px;grid-template-columns:",(e=>e.hasLoginProvider?"1fr 0.8fr":"1fr"),";"),N=(0,n.Z)("div",{target:"e1f436792"})({name:"1u5acre",styles:"margin:0;font-size:15px;font-weight:bold;line-height:24px"}),C=(0,n.Z)("div",{target:"e1f436791"})("position:relative;display:grid;grid-auto-rows:max-content;gap:",(0,c.Z)(1.5),";&:before{position:absolute;display:block;content:'';top:0;bottom:0;left:-30px;border-left:1px solid ",(e=>e.theme.border),";}"),P=(0,n.Z)(v.Z,{target:"e1f436790"})("color:",(e=>e.theme.gray300),";&:hover{color:",(e=>e.theme.textColor),";}"),O=w;var q,J=s("./app/components/forms/radioBooleanField.tsx"),j=s("./app/components/links/externalLink.tsx");const M=()=>(0,L.tZ)(J.Z,{name:"subscribe",yesLabel:(0,p.t)("Yes, I would like to receive updates via email"),noLabel:(0,p.t)("No, I'd prefer not to receive these updates"),help:(0,p._N)("We'd love to keep you updated via email with product and feature\n           announcements, promotions, educational materials, and events. Our\n           updates focus on relevant information, and we'll never sell your data\n           to third parties. See our [link] for more details.",{link:(0,L.tZ)("a",{href:"https://sentry.io/privacy/",children:"Privacy Policy"})})});M.displayName="SubscribeField";class z extends i.Component{constructor(...e){super(...e),(0,o.Z)(this,"state",{errorMessage:null,errors:{}}),(0,o.Z)(this,"handleSubmit",(async(e,t,s)=>{const{api:r}=this.props;try{const s=await r.requestPromise("/auth/register/",{method:"POST",data:e});t(e),S.Z.set("user",s.user),u.browserHistory.push({pathname:s.nextUri})}catch(e){if(!e.responseJSON||!e.responseJSON.errors)return void s(e);let t=e.responseJSON.detail;e.responseJSON.errors.__all__&&(t=e.responseJSON.errors.__all__),this.setState({errorMessage:t,errors:e.responseJSON.errors||{}}),s(e)}}))}render(){const{hasNewsletter:e}=this.props.authConfig,{errorMessage:t,errors:s}=this.state;return(0,L.tZ)(g.ms,{children:({css:r})=>(0,L.BX)(b.Z,{initialData:{subscribe:!0},submitLabel:(0,p.t)("Continue"),onSubmit:this.handleSubmit,footerClass:r(q||(q=(0,m.Z)(["\n              ","\n            "])),Y),errorMessage:t,extraButton:(0,L.tZ)(B,{href:"https://sentry.io/privacy/",children:(0,p.t)("Privacy Policy")}),children:[(0,L.tZ)(x.Z,{name:"name",placeholder:(0,p.t)("Jane Bloggs"),label:(0,p.t)("Name"),error:s.name,required:!0}),(0,L.tZ)(x.Z,{name:"username",placeholder:(0,p.t)("you@example.com"),label:(0,p.t)("Email"),error:s.username,required:!0}),(0,L.tZ)(f.Z,{name:"password",placeholder:(0,p.t)("something super secret"),label:(0,p.t)("Password"),error:s.password,required:!0}),e&&(0,L.tZ)(M,{})]})})}}z.displayName="RegisterForm";const B=(0,n.Z)(j.Z,{target:"e138ohel0"})("color:",(e=>e.theme.gray300),";&:hover{color:",(e=>e.theme.textColor),";}"),T=z;class D extends i.Component{constructor(...e){super(...e),(0,o.Z)(this,"state",{errorMessage:null}),(0,o.Z)(this,"handleSubmit",(async(e,t,s)=>{const{api:r}=this.props;try{const s=await r.requestPromise("/auth/sso-locate/",{method:"POST",data:e});t(e),u.browserHistory.push({pathname:s.nextUri})}catch(e){if(!e.responseJSON)return void s(e);const t=e.responseJSON.detail;this.setState({errorMessage:t}),s(e)}}))}render(){const{serverHostname:e}=this.props.authConfig,{errorMessage:t}=this.state;return(0,L.tZ)(b.Z,{className:"form-stacked",submitLabel:(0,p.t)("Continue"),onSubmit:this.handleSubmit,footerClass:"auth-footer",errorMessage:t,children:(0,L.tZ)(x.Z,{name:"organization",placeholder:"acme",label:(0,p.t)("Organization ID"),required:!0,help:(0,p._N)("Your ID is the slug after the hostname. e.g. [example] is [slug].",{slug:(0,L.tZ)("strong",{children:"acme"}),example:(0,L.tZ)(F,{slug:"acme",hostname:e})})})})}}D.displayName="SsoForm";const F=({hostname:e,slug:t})=>(0,L.BX)("code",{children:[e,"/",(0,L.tZ)("strong",{children:t})]});F.displayName="SlugExample";const A={login:O,register:T,sso:D};class X extends i.Component{constructor(...e){super(...e),(0,o.Z)(this,"state",{loading:!0,error:null,activeTab:"login",authConfig:null}),(0,o.Z)(this,"handleSetTab",((e,t)=>{this.setState({activeTab:e}),t.preventDefault()})),(0,o.Z)(this,"fetchData",(async()=>{const{api:e}=this.props;try{const t=await e.requestPromise("/auth/config/"),{vsts_login_link:s,github_login_link:r,google_login_link:o,...n}=t,i={...n,vstsLoginLink:s,githubLoginLink:r,googleLoginLink:o};this.setState({authConfig:i})}catch(e){this.setState({error:!0})}this.setState({loading:!1})}))}componentDidMount(){this.fetchData()}get hasAuthProviders(){if(null===this.state.authConfig)return!1;const{githubLoginLink:e,googleLoginLink:t,vstsLoginLink:s}=this.state.authConfig;return!!(e||s||t)}render(){const{api:e}=this.props,{loading:t,error:s,activeTab:r,authConfig:o}=this.state,n=A[r],a=[["login",(0,p.t)("Login")],["sso",(0,p.t)("Single Sign-On")],["register",(0,p.t)("Register"),!(null!=o&&o.canRegister)]];return(0,L.BX)(i.Fragment,{children:[(0,L.BX)(I,{children:[(0,L.tZ)(U,{children:(0,p.t)("Sign in to continue")}),(0,L.tZ)(E,{children:a.map((([e,t,s])=>!s&&(0,L.tZ)("li",{className:r===e?"active":"",children:(0,L.tZ)("a",{href:"#",onClick:t=>this.handleSetTab(e,t),children:t})},e)))})]}),t&&(0,L.tZ)(l.Z,{}),s&&(0,L.tZ)(H,{message:(0,p.t)("Unable to load authentication configuration"),onRetry:this.fetchData}),!t&&null!==o&&!s&&(0,L.tZ)(R,{hasAuthProviders:this.hasAuthProviders,children:(0,L.tZ)(n,{api:e,authConfig:o})})]})}}X.displayName="Login";const H=(0,n.Z)(a.Z,{target:"e1omfq4b4"})("margin:",(0,c.Z)(2),";"),I=(0,n.Z)("div",{target:"e1omfq4b3"})("border-bottom:1px solid ",(e=>e.theme.border),";padding:20px 40px 0;"),U=(0,n.Z)("h3",{target:"e1omfq4b2"})({name:"cqisp1",styles:"font-size:24px;margin:0 0 20px 0"}),E=(0,n.Z)(d.Z,{target:"e1omfq4b1"})({name:"ti75j2",styles:"margin:0"}),R=(0,n.Z)("div",{target:"e1omfq4b0"})("padding:35px;width:",(e=>e.hasAuthProviders?"600px":"490px"),";"),Y="\n  display: grid;\n  grid-template-columns: max-content 1fr;\n  gap: ".concat((0,c.Z)(1),";\n  align-items: center;\n  justify-items: end;\n  border-top: none;\n  margin-bottom: 0;\n  padding: 0;\n"),G=(0,h.Z)(X)}}]);
//# sourceMappingURL=../sourcemaps/app_views_auth_login_tsx.ed903f76d39addd9ec40b0814b412894.js.map