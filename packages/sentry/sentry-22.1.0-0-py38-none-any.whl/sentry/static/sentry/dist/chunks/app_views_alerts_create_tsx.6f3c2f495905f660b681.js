"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_alerts_create_tsx"],{"./app/views/alerts/create.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>C});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/react/index.js")),i=s("../node_modules/react-router/es/index.js"),n=s("./app/components/layouts/thirds.tsx"),l=s("./app/components/loadingIndicator.tsx"),d=s("./app/components/sentryDocumentTitle.tsx"),c=s("./app/locale.tsx"),p=s("./app/styles/space.tsx"),u=s("./app/utils/analytics.tsx"),m=s("./app/utils/discover/eventView.tsx"),g=s("./app/utils/guid.tsx"),v=s("./app/utils/teams.tsx"),h=s("./app/views/alerts/builder/builderBreadCrumbs.tsx"),w=s("./app/views/alerts/incidentRules/constants.tsx"),x=s("./app/views/alerts/incidentRules/ruleForm/index.tsx"),j=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function y(e){var t;const{project:s,eventView:r,wizardTemplate:a,sessionId:o,userTeamIds:i,...n}=e,l=r?(0,w.H9)(r):a?(0,w.Q6)(a):(0,w.ep)(),d=new Set(s.teams.map((({id:e})=>e))),c=null!==(t=i.find((e=>d.has(e))))&&void 0!==t?t:null;return l.owner=c&&"team:".concat(c),(0,j.tZ)(x.Z,{onSubmitSuccess:function(){const{router:t,project:s}=e,{orgId:r}=e.params;u.oF.endTransaction({name:"saveAlertRule"}),t.push({pathname:"/organizations/".concat(r,"/alerts/rules/"),query:{project:s.id}})},rule:{...l,projects:[s.slug]},sessionId:o,project:s,userTeamIds:i,...n})}y.displayName="IncidentRulesCreate";const Z=y;var b=s("./app/views/alerts/issueRuleEditor/index.tsx"),_=s("./app/views/alerts/wizard/options.tsx"),I=s("./app/views/alerts/wizard/utils.tsx");class T extends o.Component{constructor(...e){super(...e),(0,r.Z)(this,"state",this.getInitialState()),(0,r.Z)(this,"sessionId",(0,g.E)())}getInitialState(){var e;const{organization:t,location:s,project:r}=this.props,{createFromDiscover:a,createFromWizard:o,aggregate:n,dataset:l,eventTypes:d}=null!==(e=null==s?void 0:s.query)&&void 0!==e?e:{};let c="issue";return a?c="metric":o?c=n&&l&&d?"metric":"issue":i.browserHistory.replace("/organizations/".concat(t.slug,"/alerts/").concat(r.slug,"/wizard")),{alertType:c}}componentDidMount(){const{organization:e,project:t}=this.props;(0,u.ec)({eventKey:"new_alert_rule.viewed",eventName:"New Alert Rule: Viewed",organization_id:e.id,project_id:t.id,session_id:this.sessionId,alert_type:this.state.alertType})}render(){var e;const{hasMetricAlerts:t,organization:s,project:r,params:{projectId:a},location:i,routes:p}=this.props,{alertType:u}=this.state,{aggregate:g,dataset:w,eventTypes:x,createFromWizard:y,createFromDiscover:T}=null!==(e=null==i?void 0:i.query)&&void 0!==e?e:{},C={aggregate:g,dataset:w,eventTypes:x},F=T?m.ZP.fromLocation(i):void 0;let R;y&&"metric"===u&&(R=C?(0,I.k)(C):"issues");const q=(0,c.t)("New Alert Rule");return(0,j.BX)(o.Fragment,{children:[(0,j.tZ)(d.Z,{title:q,projectSlug:a}),(0,j.tZ)(n.h4,{children:(0,j.BX)(S,{children:[(0,j.tZ)(h.Z,{orgSlug:s.slug,alertName:(0,c.t)("Set Conditions"),title:R?(0,c.t)("Select Alert"):q,projectSlug:a,routes:p,location:i,canChangeProject:!0}),(0,j.tZ)(n.Dx,{children:R?"".concat((0,c.t)("Set Conditions for")," ").concat(_.gb[R]):q})]})}),(0,j.tZ)(z,{children:(0,j.tZ)(f,{fullWidth:!0,children:(0,j.tZ)(v.Z,{provideUserTeams:!0,children:({teams:e,initiallyLoaded:s})=>s?(0,j.BX)(o.Fragment,{children:[(!t||"issue"===u)&&(0,j.tZ)(b.Z,{...this.props,project:r,userTeamIds:e.map((({id:e})=>e))}),t&&"metric"===u&&(0,j.tZ)(Z,{...this.props,eventView:F,wizardTemplate:C,sessionId:this.sessionId,project:r,isCustomMetric:"custom"===R,userTeamIds:e.map((({id:e})=>e))})]}):(0,j.tZ)(l.Z,{})})})})]})}}T.displayName="Create";const z=(0,a.Z)(n.uT,{target:"ew02uqt2"})("margin-bottom:-",(0,p.Z)(3),";"),f=(0,a.Z)(n.or,{target:"ew02uqt1"})({name:"1rxb0gn",styles:"max-width:1000px"}),S=(0,a.Z)(n.oB,{target:"ew02uqt0"})({name:"1h8nup8",styles:"overflow:visible"}),C=T}}]);
//# sourceMappingURL=../sourcemaps/app_views_alerts_create_tsx.a7c025c83320f3438473c932041a1247.js.map