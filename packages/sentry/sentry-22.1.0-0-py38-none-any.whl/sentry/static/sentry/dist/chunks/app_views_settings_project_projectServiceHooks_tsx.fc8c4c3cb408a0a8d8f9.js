"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_project_projectServiceHooks_tsx"],{"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>r}),s("../node_modules/react/index.js");var o=s("./app/components/asyncComponent.tsx"),n=s("./app/components/sentryDocumentTitle.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class r extends o.Z{getTitle(){return""}render(){return(0,i.tZ)(n.Z,{title:this.getTitle(),children:this.renderComponent()})}}r.displayName="AsyncView"},"./app/views/settings/project/projectServiceHooks.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>w});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),i=s("./app/actionCreators/indicator.tsx"),r=s("./app/components/button.tsx"),c=s("./app/components/links/link.tsx"),a=s("./app/components/panels/index.tsx"),p=s("./app/components/switchButton.tsx"),d=s("./app/components/truncate.tsx"),l=s("./app/icons/index.tsx"),h=s("./app/locale.tsx"),m=s("./app/utils/withOrganization.tsx"),u=s("./app/views/asyncView.tsx"),g=s("./app/views/settings/components/emptyMessage.tsx"),v=s("./app/views/settings/components/forms/field/index.tsx"),x=s("./app/views/settings/components/settingsPageHeader.tsx"),j=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function Z({orgId:e,projectId:t,hook:s,onToggleActive:o}){return(0,j.tZ)(v.Z,{label:(0,j.tZ)(c.Z,{"data-test-id":"project-service-hook",to:"/settings/".concat(e,"/projects/").concat(t,"/hooks/").concat(s.id,"/"),children:(0,j.tZ)(d.Z,{value:s.url})}),help:(0,j.tZ)("small",{children:s.events&&0!==s.events.length?s.events.join(", "):(0,j.tZ)("em",{children:(0,h.t)("no events configured")})}),children:(0,j.tZ)(p.Z,{isActive:"active"===s.status,size:"lg",toggle:o})})}Z.displayName="ServiceHookRow";class k extends u.Z{constructor(...e){super(...e),(0,o.Z)(this,"onToggleActive",(e=>{const{orgId:t,projectId:s}=this.props.params,{hookList:o}=this.state;o&&((0,i.E3)((0,h.t)("Saving changesâ€¦")),this.api.request("/projects/".concat(t,"/").concat(s,"/hooks/").concat(e.id,"/"),{method:"PUT",data:{isActive:"active"!==e.status},success:e=>{(0,i.B8)(),this.setState({hookList:o.map((t=>t.id===e.id?{...t,...e}:t))})},error:()=>{(0,i.Iw)((0,h.t)("Unable to remove application. Please try again."))}}))}))}getEndpoints(){const{orgId:e,projectId:t}=this.props.params;return[["hookList","/projects/".concat(e,"/").concat(t,"/hooks/")]]}renderEmpty(){return(0,j.tZ)(g.Z,{children:(0,h.t)("There are no service hooks associated with this project.")})}renderResults(){var e;const{orgId:t,projectId:s}=this.props.params;return(0,j.BX)(n.Fragment,{children:[(0,j.tZ)(a.V9,{children:(0,h.t)("Service Hook")},"header"),(0,j.BX)(a.N,{children:[(0,j.tZ)(a.aU,{type:"info",icon:(0,j.tZ)(l.Gy,{size:"md"}),children:(0,h.t)("Service Hooks are an early adopter preview feature and will change in the future.")}),null===(e=this.state.hookList)||void 0===e?void 0:e.map((e=>(0,j.tZ)(Z,{orgId:t,projectId:s,hook:e,onToggleActive:this.onToggleActive.bind(this,e)},e.id)))]},"body")]})}renderBody(){const{hookList:e}=this.state,t=e&&e.length>0?this.renderResults():this.renderEmpty(),{orgId:s,projectId:o}=this.props.params,i=new Set(this.props.organization.access);return(0,j.BX)(n.Fragment,{children:[(0,j.tZ)(x.Z,{title:(0,h.t)("Service Hooks"),action:i.has("project:write")?(0,j.tZ)(r.ZP,{"data-test-id":"new-service-hook",to:"/settings/".concat(s,"/projects/").concat(o,"/hooks/new/"),size:"small",priority:"primary",icon:(0,j.tZ)(l.N_,{size:"xs",isCircled:!0}),children:(0,h.t)("Create New Hook")}):null}),(0,j.tZ)(a.s_,{children:t})]})}}const w=(0,m.Z)(k)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_project_projectServiceHooks_tsx.afa4f652a2080f6584449ed393692f9b.js.map