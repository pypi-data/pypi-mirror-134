(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_organizationDeveloperSettings_index_tsx"],{"./app/components/alertLink.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/react/index.js"),s("../node_modules/lodash/omit.js")),i=s.n(o),r=s("./app/components/links/externalLink.tsx"),a=s("./app/components/links/link.tsx"),l=s("./app/icons/index.tsx"),p=s("./app/styles/space.tsx"),c=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d({size:e="normal",priority:t="warning",icon:s,children:n,onClick:o,withoutMarginBottom:i=!1,openInNewTab:r=!1,to:a,href:p,"data-test-id":d}){return(0,c.BX)(h,{"data-test-id":d,to:a,href:p,onClick:o,size:e,priority:t,withoutMarginBottom:i,openInNewTab:r,children:[s&&(0,c.tZ)(m,{children:s}),(0,c.tZ)(Z,{children:n}),(0,c.tZ)(g,{children:(0,c.tZ)(l.g6,{direction:"right"})})]})}d.displayName="AlertLink";const u=d,h=(0,n.Z)((({openInNewTab:e,to:t,href:s,...n})=>{const o=i()(n,["withoutMarginBottom","priority","size"]);return s?(0,c.tZ)(r.Z,{...o,href:s,openInNewTab:e}):(0,c.tZ)(a.Z,{...o,to:t||""})}),{target:"ear9tuy3"})("display:flex;background-color:",(e=>e.theme.alert[e.priority].backgroundLight),";color:",(e=>e.theme.textColor),";border:1px dashed ",(e=>e.theme.alert[e.priority].border),";padding:",(e=>"small"===e.size?"".concat((0,p.Z)(1)," ").concat((0,p.Z)(1.5)):(0,p.Z)(2)),";margin-bottom:",(e=>e.withoutMarginBottom?0:(0,p.Z)(3)),";border-radius:0.25em;transition:0.2s border-color;&.focus-visible{outline:none;box-shadow:",(e=>e.theme.alert[e.priority].border),"7f 0 0 0 2px;}"),m=(0,n.Z)("span",{target:"ear9tuy2"})("display:flex;margin:",(0,p.Z)(.5)," ",(0,p.Z)(1.5)," ",(0,p.Z)(.5)," 0;"),g=(0,n.Z)(m,{target:"ear9tuy1"})("margin:",(0,p.Z)(.5)," 0;"),Z=(0,n.Z)("div",{target:"ear9tuy0"})({name:"19lh9qo",styles:"line-height:1.5;flex-grow:1"})},"./app/components/confirmDelete.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var n=s("../node_modules/react/index.js"),o=s("./app/components/alert.tsx"),i=s("./app/components/confirm.tsx"),r=s("./app/locale.tsx"),a=s("./app/views/settings/components/forms/controls/input.tsx"),l=s("./app/views/settings/components/forms/field/index.tsx"),p=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const c=({message:e,confirmInput:t,...s})=>(0,p.tZ)(i.Z,{...s,bypass:!1,disableConfirmButton:!0,renderMessage:({disableConfirmButton:s})=>(0,p.BX)(n.Fragment,{children:[(0,p.tZ)(o.Z,{type:"error",children:e}),(0,p.tZ)(l.Z,{flexibleControlStateSize:!0,inline:!1,label:(0,r.t)("Please enter %s to confirm the deletion",(0,p.tZ)("code",{children:t})),children:(0,p.tZ)(a.Z,{type:"text",placeholder:t,onChange:e=>s(e.target.value!==t)})})]})});c.displayName="ConfirmDelete";const d=c},"./app/components/sentryAppIcon.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r}),s("../node_modules/react/index.js");var n=s("./app/components/avatar/sentryAppAvatar.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=({sentryApp:e,size:t})=>(0,o.tZ)(n.Z,{sentryApp:e,size:t,isColor:!0});i.displayName="SentryAppIcon";const r=i},"./app/utils/routeTitle.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n=function(e,t,s=!0,n){const o="".concat(e," - ").concat(t),i=n?"".concat(o," - ").concat(n):o;return s?"".concat(i," - Sentry"):i}},"./app/views/asyncView.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r}),s("../node_modules/react/index.js");var n=s("./app/components/asyncComponent.tsx"),o=s("./app/components/sentryDocumentTitle.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class r extends n.Z{getTitle(){return""}render(){return(0,i.tZ)(o.Z,{title:this.getTitle(),children:this.renderComponent()})}}r.displayName="AsyncView"},"./app/views/settings/organizationDeveloperSettings/index.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Y});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./app/actionCreators/indicator.tsx")),i=s("./app/locale.tsx"),r=s("./app/components/acl/access.tsx"),a=s("./app/components/alertLink.tsx"),l=s("./app/components/button.tsx"),p=s("./app/components/panels/index.tsx"),c=s("./app/icons/index.tsx"),d=s("./app/utils/routeTitle.tsx"),u=s("./app/utils/withOrganization.tsx"),h=s("./app/views/asyncView.tsx"),m=s("./app/views/settings/components/emptyMessage.tsx"),g=s("./app/views/settings/components/settingsPageHeader.tsx"),Z=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),b=s("../node_modules/react/index.js"),x=s("./app/actionCreators/modal.tsx"),y=s("./app/components/links/link.tsx"),f=(s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/lodash/intersection.js")),w=s.n(f),v=s("./app/constants/index.tsx"),_=s("./app/styles/space.tsx"),j=s("./app/views/settings/components/forms/form.tsx"),k=s("./app/views/settings/components/forms/jsonForm.tsx"),z=s("./app/views/settings/components/forms/model.tsx"),I=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class S extends z.Z{getTransformedData(){const e=this.getData();return{questionnaire:Array.from(this.fieldDescriptor.values()).map((t=>({question:t.meta||t.label,answer:e[t.name]})))}}}class P extends b.Component{constructor(...e){super(...e),(0,n.Z)(this,"form",new S),(0,n.Z)(this,"handleSubmitSuccess",(()=>{(0,o.S9)((0,i.t)("Request to publish %s successful.",this.props.app.slug)),this.props.closeModal()})),(0,n.Z)(this,"handleSubmitError",(e=>{var t;(0,o.Iw)((0,i._N)("Request to publish [app] fails. [detail]",{app:this.props.app.slug,detail:null==e||null===(t=e.responseJSON)||void 0===t?void 0:t.detail}))}))}get formFields(){const{app:e}=this.props,t=(e=>{const t=[];for(const s of v.yh){let n;for(const t in s.choices){const o=s.choices[t],i=w()(o.scopes,e);i.length>0&&i.length===o.scopes.length&&(!n||i.length>n.scopes.length)&&(n=o)}if(n){const e=n.label.replace("Read & Write","Write");t.push("".concat(s.resource," ").concat(e))}}return t})(e.scopes),s="Please justify why you are requesting each of the following permissions: ",n="".concat(s).concat(t.join(", "),"."),o=(0,I.BX)(b.Fragment,{children:[(0,I.tZ)(B,{children:s}),t.map(((e,t)=>(0,I.BX)(b.Fragment,{children:[t>0&&", "," ",(0,I.tZ)(C,{children:e})]},e))),"."]}),i=[{type:"textarea",required:!0,label:"What does your integration do? Please be as detailed as possible.",autosize:!0,rows:1,inline:!1,name:"question0"},{type:"textarea",required:!0,label:"What value does it offer customers?",autosize:!0,rows:1,inline:!1,name:"question1"},{type:"textarea",required:!0,label:"Do you operate the web service your integration communicates with?",autosize:!0,rows:1,inline:!1,name:"question2"}];return t.length>0&&i.push({type:"textarea",required:!0,label:o,autosize:!0,rows:1,inline:!1,meta:n,name:"question3"}),i}render(){const{app:e,Header:t,Body:s}=this.props,n="/sentry-apps/".concat(e.slug,"/publish-request/"),o=[{title:(0,i.t)("Questions to answer"),fields:this.formFields}];return(0,I.BX)(b.Fragment,{children:[(0,I.tZ)(t,{children:(0,i.t)("Publish Request Questionnaire")}),(0,I.BX)(s,{children:[(0,I.tZ)(A,{children:(0,i.t)("Please fill out this questionnaire in order to get your integration evaluated for publication.\n              Once your integration has been approved, users outside of your organization will be able to install it.")}),(0,I.tZ)(j.Z,{allowUndo:!0,apiMethod:"POST",apiEndpoint:n,onSubmitSuccess:this.handleSubmitSuccess,onSubmitError:this.handleSubmitError,model:this.form,submitLabel:(0,i.t)("Request Publication"),onCancel:()=>this.props.closeModal(),children:(0,I.tZ)(k.Z,{forms:o})})]})]})}}P.displayName="SentryAppPublishRequestModal";const A=(0,Z.Z)("div",{target:"e14x9wf02"})("margin:",(0,_.Z)(1.5)," 0px;font-size:18px;"),B=(0,Z.Z)("span",{target:"e14x9wf01"})({name:"1gt2cgk",styles:"line-height:24px"}),C=(0,Z.Z)("code",{target:"e14x9wf00"})({name:"1gt2cgk",styles:"line-height:24px"});var q=s("./app/components/sentryAppIcon.tsx"),D=s("./app/components/confirmDelete.tsx");const N=({org:e,app:t,showPublish:s,showDelete:n,onPublish:o,onDelete:r,disablePublishReason:a,disableDeleteReason:l})=>{const p=(0,I.tZ)(M,{size:"small",icon:(0,I.tZ)(c.BW,{}),to:"/settings/".concat(e.slug,"/developer-settings/").concat(t.slug,"/dashboard/"),children:(0,i.t)("Dashboard")}),d=s?(0,I.tZ)(M,{disabled:!!a,title:a,icon:(0,I.tZ)(c.XK,{}),size:"small",onClick:o,children:(0,i.t)("Publish")}):null,u=(0,i.t)("Deleting ".concat(t.slug," will also delete any and all of its installations.          This is a permanent action. Do you wish to continue?")),h=n?l?(0,I.tZ)(M,{disabled:!0,title:l,size:"small",icon:(0,I.tZ)(c.Fz,{}),label:"Delete"}):r&&(0,I.tZ)(D.Z,{message:u,confirmInput:t.slug,priority:"danger",onConfirm:()=>r(t),children:(0,I.tZ)(M,{size:"small",icon:(0,I.tZ)(c.Fz,{}),label:"Delete"})}):null;return(0,I.BX)(R,{children:[p,d,h]})};N.displayName="ActionButtons";const R=(0,Z.Z)("div",{target:"eg64e9n1"})("flex-direction:row;display:flex;&>*{margin-left:",(0,_.Z)(.5),";}"),M=(0,Z.Z)(l.ZP,{target:"eg64e9n0"})("color:",(e=>e.theme.subText),";"),T=N,X=({organization:e,app:t,onClickRemove:s,onClickPublish:n})=>{const o="internal"===t.status;return(0,I.tZ)(r.Z,{access:["org:admin"],children:({hasAccess:r})=>{let a="",l="";return"published"===t.status?(a=(0,i.t)("Published integrations cannot be re-published."),l=(0,i.t)("Published integrations cannot be removed.")):r||(a=(0,i.t)("Organization owner permissions are required for this action."),l=(0,i.t)("Organization owner permissions are required for this action.")),(0,I.tZ)(T,{org:e,app:t,showPublish:!o,showDelete:!0,onPublish:n,onDelete:s,disablePublishReason:a,disableDeleteReason:l})}})};X.displayName="SentryApplicationRowButtons";const L=X;class E extends b.PureComponent{constructor(...e){super(...e),(0,n.Z)(this,"handlePublish",(()=>{const{app:e}=this.props;(0,x.openModal)((t=>(0,I.tZ)(P,{app:e,...t})))}))}get isInternal(){return"internal"===this.props.app.status}hideStatus(){return this.isInternal}renderStatus(){const{app:e}=this.props;return this.hideStatus()?null:(0,I.tZ)(K,{status:e.status})}render(){const{app:e,organization:t,onRemoveApp:s}=this.props;return(0,I.tZ)(W,{"data-test-id":e.slug,children:(0,I.BX)(V,{children:[(0,I.tZ)(q.Z,{sentryApp:e,size:36}),(0,I.BX)(H,{children:[(0,I.tZ)(Q,{hideStatus:this.hideStatus(),children:(0,I.tZ)(y.Z,{to:"/settings/".concat(t.slug,"/developer-settings/").concat(e.slug,"/"),children:e.name})}),(0,I.tZ)(U,{children:this.renderStatus()})]}),(0,I.tZ)(F,{children:(0,I.tZ)(L,{organization:t,app:e,onClickRemove:s,onClickPublish:this.handlePublish})})]})})}}E.displayName="SentryApplicationRow";const O=(0,Z.Z)("div",{target:"e1go2kpk8"})({name:"zjik7",styles:"display:flex"}),F=(0,Z.Z)("div",{target:"e1go2kpk7"})(""),W=(0,Z.Z)(p.Lv,{target:"e1go2kpk6"})({name:"ehbzc8",styles:"flex-direction:column;padding:5px"}),V=(0,Z.Z)(O,{target:"e1go2kpk5"})({name:"1yplio6",styles:"justify-content:center;padding:10px"}),H=(0,Z.Z)("div",{target:"e1go2kpk4"})({name:"3mxc9l",styles:"padding-left:15px;padding-right:15px;flex:1"}),U=(0,Z.Z)(O,{target:"e1go2kpk3"})({name:"p4xtjg",styles:"align-items:center;margin-top:6px;font-size:0.8em"}),Q=(0,Z.Z)("div",{target:"e1go2kpk2"})("margin-top:",(e=>e.hideStatus?"10px":"0px"),";"),J=(0,Z.Z)(O,{target:"e1go2kpk1"})({name:"1h3rtzg",styles:"align-items:center"}),K=(0,Z.Z)((({status:e,...t})=>(0,I.tZ)(J,{children:(0,I.tZ)("div",{...t,children:(0,i.t)("".concat(e))})})),{target:"e1go2kpk0"})("color:",(e=>"published"===e.status?e.theme.success:e.theme.gray300),";font-weight:light;margin-right:",(0,_.Z)(.75),";");class G extends h.Z{constructor(...e){super(...e),(0,n.Z)(this,"removeApp",(e=>{const t=this.state.applications.filter((t=>t.slug!==e.slug));(function(e,t){(0,o.E3)();const s=e.requestPromise("/sentry-apps/".concat(t.slug,"/"),{method:"DELETE"});return s.then((()=>{(0,o.S9)((0,i.t)("%s successfully removed.",t.slug))}),(()=>{(0,o.B8)(),(0,o.Iw)((0,i.t)("Unable to remove %s integration",t.slug))})),s})(this.api,e).then((()=>{this.setState({applications:t})}),(()=>{}))})),(0,n.Z)(this,"renderApplicationRow",(e=>{const{organization:t}=this.props;return(0,I.tZ)(E,{app:e,organization:t,onRemoveApp:this.removeApp},e.uuid)}))}getTitle(){const{orgId:e}=this.props.params;return(0,d.Z)((0,i.t)("Developer Settings"),e,!1)}getEndpoints(){const{orgId:e}=this.props.params;return[["applications","/organizations/".concat(e,"/sentry-apps/")]]}renderInternalIntegrations(){const{orgId:e}=this.props.params,{organization:t}=this.props,s=this.state.applications.filter((e=>"internal"===e.status)),n=0===s.length,o=(0,i.t)("Manager or Owner permissions required to add an internal integration."),a=(0,I.tZ)(r.Z,{organization:t,access:["org:write"],children:({hasAccess:t})=>(0,I.tZ)(l.ZP,{priority:"primary",disabled:!t,title:t?void 0:o,size:"small",to:"/settings/".concat(e,"/developer-settings/new-internal/"),icon:(0,I.tZ)(c.N_,{size:"xs",isCircled:!0}),children:(0,i.t)("New Internal Integration")})});return(0,I.BX)(p.s_,{children:[(0,I.BX)(p.V9,{hasButtons:!0,children:[(0,i.t)("Internal Integrations"),a]}),(0,I.tZ)(p.N,{children:n?(0,I.tZ)(m.Z,{children:(0,i.t)("No internal integrations have been created yet.")}):s.map(this.renderApplicationRow)})]})}renderExernalIntegrations(){const{orgId:e}=this.props.params,{organization:t}=this.props,s=this.state.applications.filter((e=>"internal"!==e.status)),n=0===s.length,o=(0,i.t)("Manager or Owner permissions required to add a public integration."),a=(0,I.tZ)(r.Z,{organization:t,access:["org:write"],children:({hasAccess:t})=>(0,I.tZ)(l.ZP,{priority:"primary",disabled:!t,title:t?void 0:o,size:"small",to:"/settings/".concat(e,"/developer-settings/new-public/"),icon:(0,I.tZ)(c.N_,{size:"xs",isCircled:!0}),children:(0,i.t)("New Public Integration")})});return(0,I.BX)(p.s_,{children:[(0,I.BX)(p.V9,{hasButtons:!0,children:[(0,i.t)("Public Integrations"),a]}),(0,I.tZ)(p.N,{children:n?(0,I.tZ)(m.Z,{children:(0,i.t)("No public integrations have been created yet.")}):s.map(this.renderApplicationRow)})]})}renderBody(){return(0,I.BX)("div",{children:[(0,I.tZ)(g.Z,{title:(0,i.t)("Developer Settings")}),(0,I.tZ)(a.Z,{href:"https://docs.sentry.io/product/integrations/integration-platform/",children:(0,i.t)("Have questions about the Integration Platform? Learn more about it in our docs.")}),this.renderExernalIntegrations(),this.renderInternalIntegrations()]})}}const Y=(0,u.Z)(G)},"../node_modules/lodash/_baseIntersection.js":(e,t,s)=>{var n=s("../node_modules/lodash/_SetCache.js"),o=s("../node_modules/lodash/_arrayIncludes.js"),i=s("../node_modules/lodash/_arrayIncludesWith.js"),r=s("../node_modules/lodash/_arrayMap.js"),a=s("../node_modules/lodash/_baseUnary.js"),l=s("../node_modules/lodash/_cacheHas.js"),p=Math.min;e.exports=function(e,t,s){for(var c=s?i:o,d=e[0].length,u=e.length,h=u,m=Array(u),g=1/0,Z=[];h--;){var b=e[h];h&&t&&(b=r(b,a(t))),g=p(b.length,g),m[h]=!s&&(t||d>=120&&b.length>=120)?new n(h&&b):void 0}b=e[0];var x=-1,y=m[0];e:for(;++x<d&&Z.length<g;){var f=b[x],w=t?t(f):f;if(f=s||0!==f?f:0,!(y?l(y,w):c(Z,w,s))){for(h=u;--h;){var v=m[h];if(!(v?l(v,w):c(e[h],w,s)))continue e}y&&y.push(w),Z.push(f)}}return Z}},"../node_modules/lodash/_castArrayLikeObject.js":(e,t,s)=>{var n=s("../node_modules/lodash/isArrayLikeObject.js");e.exports=function(e){return n(e)?e:[]}},"../node_modules/lodash/intersection.js":(e,t,s)=>{var n=s("../node_modules/lodash/_arrayMap.js"),o=s("../node_modules/lodash/_baseIntersection.js"),i=s("../node_modules/lodash/_baseRest.js"),r=s("../node_modules/lodash/_castArrayLikeObject.js"),a=i((function(e){var t=n(e,r);return t.length&&t[0]===e[0]?o(t):[]}));e.exports=a}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_organizationDeveloperSettings_index_tsx.e4c68f5ee932b410af1f0a865877518a.js.map