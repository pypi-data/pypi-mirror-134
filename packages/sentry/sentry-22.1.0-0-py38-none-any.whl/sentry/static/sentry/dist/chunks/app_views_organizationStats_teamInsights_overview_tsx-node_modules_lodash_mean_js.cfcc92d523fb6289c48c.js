(self.webpackChunk=self.webpackChunk||[]).push([["app_views_organizationStats_teamInsights_overview_tsx-node_modules_lodash_mean_js","node_modules_lodash_mean_js"],{"./app/components/charts/sessionsRequest.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js")),o=r("../node_modules/lodash/isEqual.js"),i=r.n(o),a=r("../node_modules/lodash/omitBy.js"),d=r.n(a),l=r("./app/actionCreators/indicator.tsx"),c=r("./app/locale.tsx"),u=r("./app/utils/sessions.tsx");const p=["api","children","organization"],g=e=>d()(e,((e,t)=>p.includes(t)));class m extends n.Component{constructor(...e){super(...e),(0,s.Z)(this,"state",{reloading:!1,errored:!1,response:null}),(0,s.Z)(this,"fetchData",(async()=>{const{api:e,isDisabled:t,shouldFilterSessionsInTimeWindow:r}=this.props;if(!t){this.setState((e=>({reloading:null!==e.response,errored:!1})));try{const t=await e.requestPromise(this.path,{query:this.baseQueryParams});this.setState({reloading:!1,response:r?(0,u.U5)(t,this.baseQueryParams.start,this.baseQueryParams.end):t})}catch(e){var s,n;(0,l.Iw)(null!==(s=null===(n=e.responseJSON)||void 0===n?void 0:n.detail)&&void 0!==s?s:(0,c.t)("Error loading health data")),this.setState({reloading:!1,errored:!0})}}}))}componentDidMount(){this.fetchData()}componentDidUpdate(e){i()(g(e),g(this.props))||this.fetchData()}get path(){const{organization:e}=this.props;return"/organizations/".concat(e.slug,"/sessions/")}get baseQueryParams(){const{project:e,environment:t,field:r,statsPeriod:s,start:n,end:o,query:i,groupBy:a,interval:d,organization:l}=this.props;return{project:e,environment:t,field:r,statsPeriod:s,query:i,groupBy:a,start:n,end:o,interval:d||(0,u.Xz)({start:n,end:o,period:s},{highFidelity:l.features.includes("minute-resolution-sessions")})}}render(){const{reloading:e,errored:t,response:r}=this.state,{children:s}=this.props;return s({loading:null===r,reloading:e,errored:t,response:r})}}m.displayName="SessionsRequest";const h=m},"./app/components/pageTimeRangeSelector.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js")),o=r("./app/components/organizations/timeRangeSelector/index.tsx"),i=r("./app/components/panels/index.tsx"),a=r("./app/constants/index.tsx"),d=r("./app/locale.tsx"),l=r("./app/styles/space.tsx"),c=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function u({className:e,...t}){const[r,s]=(0,n.useState)(!1);return(0,c.tZ)(p,{className:e,isCalendarOpen:r,children:(0,c.tZ)(o.Z,{label:(0,c.tZ)(g,{children:(0,d.t)("Date Range:")}),onToggleSelector:e=>s(e),relativeOptions:a.wh,...t},"period:".concat(t.relative,"-start:").concat(t.start,"-end:").concat(t.end,"-utc:").concat(t.utc,"-defaultPeriod:").concat(t.defaultPeriod))})}u.displayName="PageTimeRangeSelector";const p=(0,s.Z)(i.s_,{target:"e1hsuxgy1"})("display:flex;justify-content:center;align-items:center;height:42px;background:",(e=>e.theme.background),";border:1px solid ",(e=>e.theme.border),";border-radius:",(e=>e.isCalendarOpen?"".concat(e.theme.borderRadius," ").concat(e.theme.borderRadius," 0 0"):e.theme.borderRadius),";padding:0;margin:0;font-size:",(e=>e.theme.fontSizeMedium),";color:",(e=>e.theme.textColor),";>div{width:100%;align-self:stretch;}>div>div:first-child{padding:0 ",(0,l.Z)(2),";}>div>div:last-child{box-sizing:content-box;font-size:1em;}"),g=(0,s.Z)("span",{target:"e1hsuxgy0"})("text-align:left;font-weight:600;color:",(e=>e.theme.textColor),";>span:last-child{font-weight:400;}"),m=u},"./app/utils/discover/discoverQuery.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>d}),r("../node_modules/react/index.js");var s=r("./app/utils/withApi.tsx"),n=r("./app/utils/discover/genericDiscoverQuery.tsx"),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e,t){return e.transactionName!==t.transactionName||e.transactionThreshold!==t.transactionThreshold||e.transactionThresholdMetric!==t.transactionThresholdMetric}function a(e){return(0,o.tZ)(n.ZP,{route:"eventsv2",shouldRefetchData:i,...e})}a.displayName="DiscoverQuery";const d=(0,s.Z)(a)},"./app/views/organizationStats/header.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=r("./app/components/button.tsx"),o=r("./app/components/featureBadge.tsx"),i=r("./app/components/layouts/thirds.tsx"),a=r("./app/components/links/link.tsx"),d=r("./app/locale.tsx"),l=r("./app/styles/space.tsx"),c=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function u({organization:e,activeTab:t}){return(0,c.BX)(i.h4,{children:[(0,c.tZ)(i.oB,{children:(0,c.tZ)(g,{children:(0,d.t)("Stats")})}),(0,c.tZ)(i.kP,{children:"team"===t&&(0,c.tZ)(n.ZP,{title:(0,d.t)("Send us feedback via email"),size:"small",href:"mailto:workflow-feedback@sentry.io?subject=Team Stats Feedback",children:(0,d.t)("Give Feedback")})}),(0,c.BX)(i.mL,{underlined:!0,children:[(0,c.tZ)("li",{className:"".concat("stats"===t?"active":""),children:(0,c.tZ)(a.Z,{to:"/organizations/".concat(e.slug,"/stats/"),children:(0,d.t)("Usage Stats")})}),(0,c.tZ)("li",{className:"".concat("team"===t?"active":""),children:(0,c.BX)(a.Z,{to:"/organizations/".concat(e.slug,"/stats/team/"),children:[(0,d.t)("Team Stats"),(0,c.tZ)(o.Z,{type:"beta"})]})})]})]})}u.displayName="StatsHeader";const p=u,g=(0,s.Z)(i.Dx,{target:"e8yr0f60"})("margin-top:",(0,l.Z)(.5),";")},"./app/views/organizationStats/teamInsights/overview.tsx":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Pt});var s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=r("../node_modules/react/index.js"),o=r("../node_modules/@emotion/react/dist/emotion-element-a8309070.browser.esm.js"),i=r("../node_modules/lodash/pick.js"),a=r.n(i),d=r("../node_modules/moment/moment.js"),l=r.n(d),c=r("./app/components/forms/teamSelector.tsx"),u=r("./app/components/layouts/thirds.tsx"),p=r("./app/components/loadingIndicator.tsx"),g=r("./app/components/noProjectMessage.tsx"),m=r("./app/components/organizations/pageFilters/parse.tsx"),h=r("./app/components/pageTimeRangeSelector.tsx"),Z=r("./app/locale.tsx"),v=r("./app/styles/space.tsx"),f=r("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),y=r("./app/utils/isActiveSuperuser.tsx"),b=r("./app/utils/localStorage.tsx"),x=r("./app/utils/useOrganization.tsx"),w=r("./app/utils/useTeams.tsx"),j=r("./app/views/organizationStats/header.tsx"),S=(r("../node_modules/core-js/modules/es.symbol.description.js"),r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"));function z({title:e,description:t,children:r}){return(0,S.BX)(B,{children:[(0,S.BX)(T,{children:[(0,S.tZ)(D,{children:e}),(0,S.tZ)(_,{children:t})]}),(0,S.tZ)(M,{children:r})]})}z.displayName="DescriptionCard";const k=z,B=(0,s.Z)("div",{target:"eyf29hd4"})("border:1px solid ",(e=>e.theme.border),";border-radius:",(e=>e.theme.borderRadius),";display:flex;margin-bottom:",(0,v.Z)(3),";flex-direction:column;@media (min-width: ",(e=>e.theme.breakpoints[1]),"){flex-direction:row;}"),T=(0,s.Z)("div",{target:"eyf29hd3"})("padding:",(0,v.Z)(2)," ",(0,v.Z)(2),";border-bottom:1px solid ",(e=>e.theme.border),";@media (min-width: ",(e=>e.theme.breakpoints[1]),"){max-width:250px;border-right:1px solid ",(e=>e.theme.border),";border-bottom:0;}"),D=(0,s.Z)("div",{target:"eyf29hd2"})("font-size:",(e=>e.theme.fontSizeLarge),";margin:0 0 ",(0,v.Z)(.5),";"),_=(0,s.Z)("div",{target:"eyf29hd1"})("color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeMedium),";"),M=(0,s.Z)("div",{target:"eyf29hd0"})({name:"1ff36h2",styles:"flex-grow:1"});var q=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),N=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js")),C=r("../node_modules/lodash/round.js"),R=r.n(C),A=r("./app/components/asyncComponent.tsx"),I=r("./app/components/button.tsx"),L=r("./app/components/charts/barChart.tsx"),P=r("./app/components/links/link.tsx"),X=r("./app/components/panels/panelTable.tsx"),E=r("./app/icons/index.tsx"),O=r("./app/utils/formatters.tsx"),U=r("./app/components/idBadge/index.tsx");const F=(0,s.Z)("div",{target:"e1l696dj1"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),G=(0,s.Z)(U.Z,{target:"e1l696dj0"})({name:"ozd7xs",styles:"flex-shrink:0"});var K=r("../node_modules/lodash/chunk.js"),Q=r.n(K);function H(e){const t=e.sort(((e,t)=>new Date(e.name).getTime()-new Date(t.name).getTime()));return Q()(t,7).map((e=>({name:e[0].name,value:e.reduce(((e,t)=>e+t.value),0)})))}function W(e){return Object.entries(e).map((([e,t])=>({value:t,name:new Date(e).getTime()})))}function V(e){return[...e.filter((e=>Math.round(e.trend)<0)),...e.filter((e=>Math.round(e.trend)>0)),...e.filter((e=>0===Math.round(e.trend)))]}const J=e=>({splitNumber:e,type:"category",min:0,axisLabel:{showMaxLabel:!0,showMinLabel:!0,formatter:e=>l()(new Date(Number(e))).format("MMM D")}});class Y extends A.Z{constructor(...e){super(...e),(0,q.Z)(this,"shouldRenderBadRequests",!0)}getDefaultState(){return{...super.getDefaultState(),alertsTriggered:null,alertsTriggeredRules:null}}getEndpoints(){const{organization:e,start:t,end:r,period:s,utc:n,teamSlug:o}=this.props,i={start:t,end:r,period:s,utc:n};return[["alertsTriggered","/teams/".concat(e.slug,"/").concat(o,"/alerts-triggered/"),{query:{...(0,m.fK)(i)}}],["alertsTriggeredRules","/teams/".concat(e.slug,"/").concat(o,"/alerts-triggered-index/"),{query:{...(0,m.fK)(i)}}]]}componentDidUpdate(e){const{start:t,end:r,period:s,utc:n,teamSlug:o}=this.props;e.start===t&&e.end===r&&e.period===s&&e.utc===n&&e.teamSlug===o||this.remountComponent()}renderTrend(e){const{weeklyAvg:t,totalThisWeek:r}=e,s=r-t;return 0===t?"—":(0,S.BX)(ne,{color:s<=0?"green300":"red300",children:[(0,O.rl)(Math.abs(s/t),0),(0,S.tZ)(se,{direction:s<=0?"down":"up",size:"xs"})]})}renderLoading(){return(0,S.tZ)(ee,{children:(0,S.tZ)(p.Z,{})})}renderBody(){const{organization:e,period:t,projects:r}=this.props,{alertsTriggered:s,alertsTriggeredRules:o}=this.state,i=H(W(null!=s?s:{}));return(0,S.BX)(n.Fragment,{children:[(0,S.tZ)(ee,{children:(0,S.tZ)(L.Z,{style:{height:190},isGroupedByDate:!0,useShortDate:!0,period:"7d",legend:{right:0,top:0},yAxis:{minInterval:1},xAxis:J(i.length),series:[{seriesName:(0,Z.t)("Alerts Triggered"),data:i,silent:!0,barCategoryGap:"5%"}]})}),(0,S.tZ)(te,{isEmpty:!s||!o||0===o.length,emptyMessage:(0,Z.t)("No alerts triggered for this team’s projects"),emptyAction:(0,S.BX)(oe,{children:[(0,S.tZ)(I.ZP,{priority:"primary",size:"small",to:"/organizations/".concat(e.slug,"/alerts/rules/"),children:(0,Z.t)("Create Alert")}),(0,S.tZ)(I.ZP,{size:"small",external:!0,to:"https://docs.sentry.io/product/alerts/create-alerts/",children:(0,Z.t)("Learn more")})]}),headers:[(0,Z.t)("Alert Rule"),(0,Z.t)("Project"),(0,S.tZ)(re,{children:(0,Z._N)("Last [period] Average",{period:t})},"last"),(0,S.tZ)(re,{children:(0,Z.t)("This Week")},"curr"),(0,S.tZ)(re,{children:(0,Z.t)("Difference")},"diff")],children:null==o?void 0:o.map((t=>{const s=r.find((e=>e.slug===t.projects[0]));return(0,S.BX)(n.Fragment,{children:[(0,S.tZ)("div",{children:(0,S.tZ)(P.Z,{to:"/organizations/".concat(e.slug,"/alerts/rules/details/").concat(t.id,"/"),children:t.name})}),(0,S.tZ)(F,{children:s&&(0,S.tZ)(G,{avatarSize:18,project:s})}),(0,S.tZ)(re,{children:R()(t.weeklyAvg,2)}),(0,S.tZ)(re,{children:t.totalThisWeek}),(0,S.tZ)(re,{children:this.renderTrend(t)})]},t.id)}))})]})}}const $=Y,ee=(0,s.Z)("div",{target:"e1w90l1w5"})("padding:",(0,v.Z)(2)," ",(0,v.Z)(2)," 0 ",(0,v.Z)(2),";border-bottom:1px solid ",(e=>e.theme.border),";"),te=(0,s.Z)(X.Z,{target:"e1w90l1w4"})("grid-template-columns:1fr 0.5fr 0.2fr 0.2fr 0.2fr;font-size:",(e=>e.theme.fontSizeMedium),";white-space:nowrap;margin-bottom:0;border:0;box-shadow:unset;&>div{padding:",(0,v.Z)(1)," ",(0,v.Z)(2),";}",(e=>e.isEmpty&&(0,N.iv)("&>div:last-child{padding:48px ",(0,v.Z)(2),";}","")),";"),re=(0,s.Z)("div",{target:"e1w90l1w3"})({name:"mnwtso",styles:"text-align:right;font-variant-numeric:tabular-nums"}),se=(0,s.Z)(E.CC,{target:"e1w90l1w2"})("margin:0 ",(0,v.Z)(.5),";"),ne=(0,s.Z)("div",{target:"e1w90l1w1"})("color:",(e=>e.theme[e.color]),";"),oe=(0,s.Z)("div",{target:"e1w90l1w0"})("&>a{margin-right:",(0,v.Z)(.5),";margin-left:",(0,v.Z)(.5),";}");var ie=r("./app/components/count.tsx"),ae=r("./app/components/idBadge/projectBadge.tsx"),de=r("./app/components/placeholder.tsx"),le=r("./app/components/timeSince.tsx"),ce=r("./app/styles/overflowEllipsis.tsx"),ue=r("./app/utils/events.tsx");function pe(e){if("> 1 year"===e)return l()().subtract(1,"y").subtract(1,"d").valueOf();const[t,r,s]=e.split(" ");return l()().subtract(r,s).valueOf()}const ge={"< 1 hour":(0,Z.t)("1 hour"),"< 4 hour":(0,Z.t)("4 hours"),"< 12 hour":(0,Z.t)("12 hours"),"< 1 day":(0,Z.t)("1 day"),"< 1 week":(0,Z.t)("1 week"),"< 4 week":(0,Z.t)("1 month"),"< 24 week":(0,Z.t)("6 months"),"< 1 year":(0,Z.t)("1 year"),"> 1 year":(0,Z.t)("> 1 year")};class me extends A.Z{constructor(...e){super(...e),(0,q.Z)(this,"shouldRenderBadRequests",!0)}getDefaultState(){return{...super.getDefaultState(),oldestIssues:null,unresolvedIssueAge:null}}getEndpoints(){const{organization:e,teamSlug:t}=this.props;return[["oldestIssues","/teams/".concat(e.slug,"/").concat(t,"/issues/old/"),{query:{limit:7}}],["unresolvedIssueAge","/teams/".concat(e.slug,"/").concat(t,"/unresolved-issue-age/")]]}componentDidUpdate(e){const{teamSlug:t}=this.props;e.teamSlug!==t&&this.remountComponent()}renderLoading(){return this.renderBody()}renderBody(){const{organization:e}=this.props,{unresolvedIssueAge:t,oldestIssues:r,loading:s}=this.state,o=Object.entries(null!=t?t:{}).map((([e,t])=>({name:e,value:t}))).sort(((e,t)=>pe(t.name)-pe(e.name)));return(0,S.BX)("div",{children:[(0,S.BX)(Ze,{children:[s&&(0,S.tZ)(de.Z,{height:"200px"}),!s&&(0,S.tZ)(L.Z,{style:{height:190},legend:{right:3,top:0},yAxis:{minInterval:1},xAxis:{splitNumber:o.length,type:"category",min:0,axisLabel:{showMaxLabel:!0,showMinLabel:!0,formatter:e=>{var t;return null!==(t=ge[e])&&void 0!==t?t:e}}},series:[{seriesName:(0,Z.t)("Unresolved Issues"),silent:!0,data:o,barCategoryGap:"5%"}]})]}),(0,S.tZ)(ve,{isEmpty:!r||0===r.length,emptyMessage:(0,Z.t)("No unresolved issues for this team’s projects"),headers:[(0,Z.t)("Oldest Issues"),(0,S.tZ)(fe,{children:(0,Z.t)("Events")},"events"),(0,S.tZ)(fe,{children:(0,Z.t)("Users")},"users"),(0,S.BX)(fe,{children:[(0,Z.t)("Age")," ",(0,S.tZ)(E.CC,{direction:"down",size:"12px",color:"gray300"})]},"age")],isLoading:s,children:null==r?void 0:r.map((t=>{const{title:r}=(0,ue.YQ)(t,null==e?void 0:e.features,!1);return(0,S.BX)(n.Fragment,{children:[(0,S.BX)(ye,{children:[(0,S.tZ)(xe,{disableLink:!0,hideName:!0,avatarSize:18,project:t.project}),(0,S.tZ)(be,{children:(0,S.tZ)(P.Z,{to:{pathname:"/organizations/".concat(e.slug,"/issues/").concat(t.id,"/")},children:r})})]}),(0,S.tZ)(fe,{children:(0,S.tZ)(ie.Z,{value:t.count})}),(0,S.tZ)(fe,{children:(0,S.tZ)(ie.Z,{value:t.userCount})}),(0,S.tZ)(fe,{children:(0,S.tZ)(le.Z,{date:t.firstSeen})})]},t.id)}))})]})}}const he=me,Ze=(0,s.Z)("div",{target:"e131frq15"})("padding:",(0,v.Z)(2)," ",(0,v.Z)(2)," 0 ",(0,v.Z)(2),";border-bottom:1px solid ",(e=>e.theme.border),";"),ve=(0,s.Z)(X.Z,{target:"e131frq14"})("grid-template-columns:1fr 0.15fr 0.15fr 0.25fr;white-space:nowrap;margin-bottom:0;border:0;font-size:",(e=>e.theme.fontSizeMedium),";box-shadow:unset;>*{padding:",(0,v.Z)(1)," ",(0,v.Z)(2),";}",(e=>e.isEmpty&&(0,N.iv)("&>div:last-child{padding:48px ",(0,v.Z)(2),";}","")),";"),fe=(0,s.Z)("span",{target:"e131frq13"})({name:"19mh0x6",styles:"display:flex;align-items:center;justify-content:flex-end"}),ye=(0,s.Z)("div",{target:"e131frq12"})(ce.Z,";display:flex;align-items:center;"),be=(0,s.Z)("div",{target:"e131frq11"})(ce.Z,";"),xe=(0,s.Z)(ae.Z,{target:"e131frq10"})("display:inline-flex;align-items:center;margin-right:",(0,v.Z)(1),";*>img{box-shadow:none;}");var we=r("../node_modules/lodash/isEqual.js"),je=r.n(we),Se=r("./app/stores/projectsStore.tsx");const ze=["deleted","ignored","resolved","unignored","regressed","new","total"];class ke extends A.Z{constructor(...e){super(...e),(0,q.Z)(this,"shouldRenderBadRequests",!0)}getDefaultState(){return{...super.getDefaultState(),issuesBreakdown:null}}getEndpoints(){const{organization:e,start:t,end:r,period:s,utc:n,teamSlug:o,statuses:i}=this.props,a={start:t,end:r,period:s,utc:n};return[["issuesBreakdown","/teams/".concat(e.slug,"/").concat(o,"/issue-breakdown/"),{query:{...(0,m.fK)(a),statuses:i}}]]}componentDidUpdate(e){const{start:t,end:r,period:s,utc:n,teamSlug:o,projects:i}=this.props;e.start===t&&e.end===r&&e.period===s&&e.utc===n&&e.teamSlug===o&&je()(e.projects,i)||this.remountComponent()}renderLoading(){return this.renderBody()}renderBody(){var e,t,r;const{loading:s}=this.state,o=null!==(e=this.state.issuesBreakdown)&&void 0!==e?e:{},{projects:i,statuses:a}=this.props,d={},l={};for(const[e,t]of Object.entries(o))for(const[r,s]of Object.entries(t)){l[e]||(l[e]={deleted:0,ignored:0,resolved:0,unignored:0,regressed:0,new:0,total:0});for(const t of ze)l[e][t]+=s[t];d[e]||(d[e]={}),void 0===d[e][r]?d[e][r]=s.total:d[e][r]+=s.total}const c=Object.entries(l).map((([e,{total:t}])=>({projectId:e,total:t}))).sort(((e,t)=>t.total-e.total)),u=Object.keys(d).map(((e,t)=>{var r,s;return{seriesName:null!==(r=null===(s=Se.Z.getById(e))||void 0===s?void 0:s.slug)&&void 0!==r?r:e,data:H(W(d[e])),animationDuration:500,animationDelay:500*t,silent:!0,barCategoryGap:"5%"}}));return(0,S.BX)(n.Fragment,{children:[(0,S.BX)(De,{children:[s&&(0,S.tZ)(de.Z,{height:"200px"}),!s&&(0,S.tZ)(L.Z,{style:{height:200},stacked:!0,isGroupedByDate:!0,useShortDate:!0,legend:{right:0,top:0},xAxis:J(null!==(t=null===(r=u[0])||void 0===r?void 0:r.data.length)&&void 0!==t?t:0),yAxis:{minInterval:1},series:u})]}),(0,S.tZ)(_e,{numActions:a.length,headers:[(0,Z.t)("Project"),...a.map((e=>(0,S.tZ)(Me,{children:(0,Z.t)(e)},e))),(0,S.BX)(Me,{children:[(0,Z.t)("total")," ",(0,S.tZ)(E.CC,{direction:"down",size:"12px",color:"gray300"})]},"total")],isLoading:s,children:c.map((({projectId:e})=>{const t=i.find((t=>t.id===e));return(0,S.BX)(n.Fragment,{children:[(0,S.tZ)(F,{children:t&&(0,S.tZ)(G,{avatarSize:18,project:t})}),a.map((t=>(0,S.tZ)(Me,{children:l[e][t]},t))),(0,S.tZ)(Me,{children:l[e].total})]},e)}))})]})}}const Be=ke,Te=(0,s.Z)("div",{target:"e1kdpoq3"})("padding:",(0,v.Z)(2)," ",(0,v.Z)(2)," 0 ",(0,v.Z)(2),";"),De=(0,s.Z)(Te,{target:"e1kdpoq2"})("border-bottom:1px solid ",(e=>e.theme.border),";"),_e=(0,s.Z)(X.Z,{target:"e1kdpoq1"})("grid-template-columns:1fr ",(e=>" 0.2fr".repeat(e.numActions))," 0.2fr;font-size:",(e=>e.theme.fontSizeMedium),";white-space:nowrap;margin-bottom:0;border:0;box-shadow:unset;&>div{padding:",(0,v.Z)(1)," ",(0,v.Z)(2),";}"),Me=(0,s.Z)("div",{target:"e1kdpoq0"})({name:"mnwtso",styles:"text-align:right;font-variant-numeric:tabular-nums"});class qe extends A.Z{constructor(...e){super(...e),(0,q.Z)(this,"shouldRenderBadRequests",!0)}getDefaultState(){return{...super.getDefaultState(),issuesBreakdown:null}}getEndpoints(){const{organization:e,start:t,end:r,period:s,utc:n,teamSlug:o}=this.props,i={start:t,end:r,period:s,utc:n};return[["issuesBreakdown","/teams/".concat(e.slug,"/").concat(o,"/issue-breakdown/"),{query:{...(0,m.fK)(i)}}]]}componentDidUpdate(e){const{start:t,end:r,period:s,utc:n,teamSlug:o,projects:i}=this.props;e.start===t&&e.end===r&&e.period===s&&e.utc===n&&e.teamSlug===o&&je()(e.projects,i)||this.remountComponent()}renderLoading(){return this.renderBody()}renderBody(){const{issuesBreakdown:e,loading:t}=this.state,{projects:r}=this.props,s={},o={},i={};if(e)for(const[t,r]of Object.entries(e))for(const[e,{reviewed:n,total:a}]of Object.entries(r)){i[t]||(i[t]={reviewed:0,total:0}),i[t].reviewed+=n,i[t].total+=a,void 0===s[e]?s[e]=n:s[e]+=n;const r=a-n;void 0===o[e]?o[e]=r:o[e]+=r}const a=H(W(s)),d=H(W(o));return(0,S.BX)(n.Fragment,{children:[(0,S.BX)(Ce,{children:[t&&(0,S.tZ)(de.Z,{height:"200px"}),!t&&(0,S.tZ)(L.Z,{style:{height:200},stacked:!0,isGroupedByDate:!0,useShortDate:!0,legend:{right:0,top:0},xAxis:J(a.length),yAxis:{minInterval:1},series:[{seriesName:(0,Z.t)("Reviewed"),data:a,silent:!0,animationDuration:500,animationDelay:0,barCategoryGap:"5%"},{seriesName:(0,Z.t)("Not Reviewed"),data:d,silent:!0,animationDuration:500,animationDelay:500,barCategoryGap:"5%"}]})]}),(0,S.tZ)(Re,{isEmpty:0===r.length,emptyMessage:(0,Z.t)("No projects assigned to this team"),headers:[(0,Z.t)("Project"),(0,S.tZ)(Ae,{children:(0,Z.t)("For Review")},"forReview"),(0,S.tZ)(Ae,{children:(0,Z.t)("Reviewed")},"reviewed"),(0,S.tZ)(Ae,{children:(0,Z.t)("% Reviewed")},"change")],isLoading:t,children:r.map((e=>{var t;const{total:r,reviewed:s}=null!==(t=i[e.id])&&void 0!==t?t:{};return(0,S.BX)(n.Fragment,{children:[(0,S.tZ)(F,{children:(0,S.tZ)(G,{avatarSize:18,project:e})}),(0,S.tZ)(Ae,{children:r}),(0,S.tZ)(Ae,{children:s}),(0,S.tZ)(Ae,{children:0===r?"—":(0,O.rl)(s/r)})]},e.id)}))})]})}}const Ne=qe,Ce=(0,s.Z)("div",{target:"e1tnpmhr2"})("padding:",(0,v.Z)(2)," ",(0,v.Z)(2)," 0 ",(0,v.Z)(2),";border-bottom:1px solid ",(e=>e.theme.border),";"),Re=(0,s.Z)(X.Z,{target:"e1tnpmhr1"})("grid-template-columns:1fr 0.2fr 0.2fr 0.2fr;font-size:",(e=>e.theme.fontSizeMedium),";white-space:nowrap;margin-bottom:0;border:0;box-shadow:unset;&>div{padding:",(0,v.Z)(1)," ",(0,v.Z)(2),";}",(e=>e.isEmpty&&(0,N.iv)("&>div:last-child{padding:48px ",(0,v.Z)(2),";}","")),";"),Ae=(0,s.Z)("div",{target:"e1tnpmhr0"})({name:"mnwtso",styles:"text-align:right;font-variant-numeric:tabular-nums"});var Ie=r("./app/components/loadingError.tsx"),Le=r("./app/utils/discover/discoverQuery.tsx"),Pe=r("./app/utils/discover/eventView.tsx"),Xe=r("./app/utils/discover/fieldRenderers.tsx"),Ee=r("./app/views/performance/transactionSummary/utils.tsx");function Oe({organization:e,location:t,projects:r,periodTableData:s,weekTableData:o,isLoading:i,period:a,error:d}){var l;const[c,u]=(0,n.useState)(!1),p=(null==s?void 0:s.meta)&&(0,Xe.Js)("user_misery",s.meta),g=V((null!==(l=null==s?void 0:s.data)&&void 0!==l?l:[]).map((e=>{const t=null==o?void 0:o.data.find((t=>t.project===e.project&&t.transaction===e.transaction)),r=t?100*(e.user_misery-t.user_misery):null;return{...e,trend:r}})).filter((e=>null!==e.trend)).sort(((e,t)=>Math.abs(t.trend)-Math.abs(e.trend))));return d?(0,S.tZ)(Ie.Z,{}):(0,S.BX)(n.Fragment,{children:[(0,S.tZ)(Ge,{isEmpty:0===r.length||0===(null==s?void 0:s.data.length),emptyMessage:(0,Z.t)("No key transactions starred by this team"),emptyAction:(0,S.tZ)(I.ZP,{size:"small",external:!0,href:"https://docs.sentry.io/product/performance/transaction-summary/#starring-key-transactions",children:(0,Z.t)("Learn More")}),headers:[(0,S.BX)(Ke,{children:[(0,S.tZ)(He,{isSolid:!0,color:"yellow300"})," ",(0,Z.t)("Key transaction")]},"transaction"),(0,Z.t)("Project"),(0,Z._N)("Last [period]",{period:a}),(0,Z.t)("Last 7 Days"),(0,S.tZ)(Ve,{children:(0,Z.t)("Change")},"change")],isLoading:i,children:g.map(((s,i)=>{const a=r.find((({slug:e})=>s.project===e)),{trend:d,project:l,transaction:u}=s,g=null==o?void 0:o.data.find((e=>e.project===l&&e.transaction===u));if(!g||null===d)return null;const m=null==p?void 0:p(s,{organization:e,location:t}),h=g&&(null==p?void 0:p(g,{organization:e,location:t})),v=Math.round(Math.abs(d));return i>=5&&!c?null:(0,S.BX)(n.Fragment,{children:[(0,S.BX)(Qe,{children:[(0,S.tZ)("div",{children:(0,S.tZ)(He,{isSolid:!0,color:"yellow300"})}),(0,S.tZ)(We,{children:(0,S.tZ)(P.Z,{to:(0,Ee.e1)({orgSlug:e.slug,transaction:s.transaction,projectID:null==a?void 0:a.id,query:{query:"transaction.duration:<15m"}}),children:s.transaction})})]}),(0,S.tZ)(Ke,{children:(0,S.tZ)(F,{children:a&&(0,S.tZ)(G,{avatarSize:18,project:a})})}),(0,S.tZ)(Ke,{children:m}),(0,S.tZ)(Ke,{children:null!=h?h:"—"}),(0,S.tZ)(Je,{children:0===v?(0,S.BX)(Ye,{children:["0% ",(0,Z.t)("change")]}):(0,S.BX)($e,{color:d>=0?"green300":"red300",children:["".concat(v,"% "),d>=0?(0,Z.t)("better"):(0,Z.t)("worse")]})})]},i)}))}),g.length>=5&&!c&&!i&&(0,S.BX)(et,{onClick:function(){u(!0)},children:[(0,S.BX)(rt,{children:[(0,S.tZ)(tt,{color:"gray300"}),(0,Z._N)("Show [count] More",{count:g.length-1-5})]}),(0,S.tZ)(E.g6,{color:"gray300",direction:"down"})]})]})}function Ue({organization:e,teamId:t,projects:r,location:s,period:n,start:o,end:i}){if(0===r.length)return(0,S.tZ)(Oe,{isLoading:!1,organization:e,location:s,projects:[],period:n,periodTableData:{data:[]},weekTableData:{data:[]}});const a={id:void 0,query:"transaction.duration:<15m team_key_transaction:true",projects:[],version:2,orderby:"-tpm",teams:[Number(t)],fields:["transaction","project","tpm()","count_unique(user)","count_miserable(user)","user_misery()"]},d=Pe.ZP.fromSavedQuery({...a,name:"periodMisery",range:n,start:o,end:i}),l=Pe.ZP.fromSavedQuery({...a,name:"weekMisery",range:"7d"});return(0,S.tZ)(Le.Z,{eventView:d,orgSlug:e.slug,location:s,children:({isLoading:t,tableData:o,error:i})=>(0,S.tZ)(Le.Z,{eventView:l,orgSlug:e.slug,location:s,children:({isLoading:a,tableData:d,error:l})=>(0,S.tZ)(Oe,{isLoading:t||a,organization:e,location:s,projects:r,period:n,periodTableData:o,weekTableData:d,error:null!=i?i:l})})})}Oe.displayName="TeamMisery",Ue.displayName="TeamMiseryWrapper";const Fe=Ue,Ge=(0,s.Z)(X.Z,{target:"e1uglq211"})("grid-template-columns:1.25fr 0.5fr 112px 112px 0.25fr;font-size:",(e=>e.theme.fontSizeMedium),";white-space:nowrap;margin-bottom:0;border:0;box-shadow:unset;&>div{padding:",(0,v.Z)(1)," ",(0,v.Z)(2),";}",(e=>e.isEmpty&&(0,N.iv)("&>div:last-child{padding:48px ",(0,v.Z)(2),";}","")),";"),Ke=(0,s.Z)("div",{target:"e1uglq210"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),Qe=(0,s.Z)("div",{target:"e1uglq29"})(ce.Z,";display:flex;align-items:center;"),He=(0,s.Z)(E.GK,{target:"e1uglq28"})("display:block;margin-right:",(0,v.Z)(1),";margin-bottom:",(0,v.Z)(.5),";"),We=(0,s.Z)("div",{target:"e1uglq27"})(ce.Z,";"),Ve=(0,s.Z)("span",{target:"e1uglq26"})({name:"2qga7i",styles:"text-align:right"}),Je=(0,s.Z)("div",{target:"e1uglq25"})({name:"4os8x4",styles:"display:flex;align-items:center;justify-content:flex-end;text-align:right"}),Ye=(0,s.Z)("div",{target:"e1uglq24"})("color:",(e=>e.theme.subText),";"),$e=(0,s.Z)("div",{target:"e1uglq23"})("color:",(e=>e.theme[e.color]),";"),et=(0,s.Z)("div",{target:"e1uglq22"})("display:flex;align-items:center;padding:",(0,v.Z)(1)," ",(0,v.Z)(2),";font-size:",(e=>e.theme.fontSizeMedium),";color:",(e=>e.theme.subText),";cursor:pointer;border-top:1px solid ",(e=>e.theme.border),";"),tt=(0,s.Z)(E.Zd,{target:"e1uglq21"})("margin-right:",(0,v.Z)(1),";"),rt=(0,s.Z)("div",{target:"e1uglq20"})({name:"18keaja",styles:"display:flex;align-items:center;flex-grow:1"});var st=r("./app/components/charts/components/markLine.tsx"),nt=r("./app/components/charts/utils.tsx");class ot extends A.Z{constructor(...e){super(...e),(0,q.Z)(this,"shouldRenderBadRequests",!0)}getDefaultState(){return{...super.getDefaultState(),weekReleases:null,periodReleases:null}}getEndpoints(){const{organization:e,start:t,end:r,period:s,utc:n,teamSlug:o}=this.props,i={start:t,end:r,period:s,utc:n};return[["periodReleases","/teams/".concat(e.slug,"/").concat(o,"/release-count/"),{query:{...(0,m.fK)(i)}}],["weekReleases","/teams/".concat(e.slug,"/").concat(o,"/release-count/"),{query:{statsPeriod:"7d"}}]]}componentDidUpdate(e){const{teamSlug:t,start:r,end:s,period:n,utc:o}=this.props;e.start===r&&e.end===s&&e.period===n&&e.utc===o&&je()(e.teamSlug,t)||this.remountComponent()}getReleaseCount(e,t){const{periodReleases:r,weekReleases:s}=this.state,n="week"===t?null==s?void 0:s.last_week_totals:null==r?void 0:r.project_avgs;return null!=n&&n[e]?Math.ceil(null==n?void 0:n[e]):0}getTrend(e){const t=this.getReleaseCount(e,"period"),r=this.getReleaseCount(e,"week");return null===t||null===r?null:r-t}renderLoading(){return this.renderBody()}renderReleaseCount(e,t){const{loading:r}=this.state;if(r)return(0,S.tZ)("div",{children:(0,S.tZ)(de.Z,{width:"80px",height:"25px"})});const s=this.getReleaseCount(Number(e),t);return null===s?"—":s}renderTrend(e){const{loading:t}=this.state;if(t)return(0,S.tZ)("div",{children:(0,S.tZ)(de.Z,{width:"80px",height:"25px"})});const r=this.getTrend(Number(e));return null===r?"—":(0,S.BX)(pt,{color:r>=0?"green300":"red300",children:["".concat(R()(Math.abs(r),3)),(0,S.tZ)(ut,{direction:r>=0?"up":"down",size:"xs"})]})}renderBody(){var e,t;const{projects:r,period:s,theme:o,organization:i}=this.props,{periodReleases:a}=this.state,d=V(r.map((e=>{var t;return{project:e,trend:null!==(t=this.getTrend(Number(e.id)))&&void 0!==t?t:0}})).sort(((e,t)=>Math.abs(t.trend)-Math.abs(e.trend)))),c=H(Object.entries(null!==(e=null==a?void 0:a.release_counts)&&void 0!==e?e:{}).map((([e,t])=>({value:Math.ceil(t),name:new Date(e).getTime()})))),u=Object.values(null!==(t=null==a?void 0:a.project_avgs)&&void 0!==t?t:{}),p=u.reduce(((e,t)=>e+t),0),g=Math.ceil(p/u.length);return(0,S.BX)("div",{children:[(0,S.tZ)(at,{children:(0,S.tZ)(L.Z,{style:{height:190},isGroupedByDate:!0,useShortDate:!0,period:"7d",legend:{right:3,top:0},yAxis:{minInterval:1},xAxis:J(c.length),series:[{seriesName:(0,Z.t)("This Period"),silent:!0,data:c,markLine:(0,st.Z)({silent:!0,lineStyle:{color:o.gray200,type:"dashed",width:1},data:[{yAxis:g}],label:{show:!1}}),barCategoryGap:"5%"}],tooltip:{formatter:e=>{const[t]=Array.isArray(e)?e:[e],r="MMM D",n=l()(t.data[0]).format(r),o=l()(t.data[0]).add(7,"days").format(r);return['<div class="tooltip-series">','<div><span class="tooltip-label">'.concat(t.marker," <strong>").concat(t.seriesName,"</strong></span> ").concat(t.data[1],"</div>"),'<div><span class="tooltip-label"><strong>Last '.concat(s," Average</strong></span> ").concat(g,"</div>"),"</div>",'<div class="tooltip-date">'.concat(n," - ").concat(o,"</div>"),(0,nt.U8)()].join("")}}})}),(0,S.tZ)(dt,{isEmpty:0===r.length,emptyMessage:(0,Z.t)("No releases were setup for this team’s projects"),emptyAction:(0,S.tZ)(I.ZP,{size:"small",external:!0,href:"https://docs.sentry.io/product/releases/setup/",children:(0,Z.t)("Learn More")}),headers:[(0,Z.t)("Releases Per Project"),(0,S.tZ)(lt,{children:(0,Z._N)("Last [period] Average",{period:s})},"last"),(0,S.tZ)(lt,{children:(0,Z.t)("Last 7 Days")},"curr"),(0,S.tZ)(lt,{children:(0,Z.t)("Difference")},"diff")],children:d.map((({project:e})=>(0,S.BX)(n.Fragment,{children:[(0,S.tZ)(F,{children:(0,S.tZ)(G,{avatarSize:18,project:e,to:{pathname:"/organizations/".concat(i.slug,"/releases/"),query:{project:e.id}}})}),(0,S.tZ)(ct,{children:this.renderReleaseCount(e.id,"period")}),(0,S.tZ)(ct,{children:(0,S.tZ)(P.Z,{to:{pathname:"/organizations/".concat(i.slug,"/releases/"),query:{project:e.id,statsPeriod:"7d"}},children:this.renderReleaseCount(e.id,"week")})}),(0,S.tZ)(ct,{children:this.renderTrend(e.id)})]},e.id)))})]})}}const it=(0,o.b)(ot),at=(0,s.Z)("div",{target:"e1az29pq5"})("padding:",(0,v.Z)(2)," ",(0,v.Z)(2)," 0 ",(0,v.Z)(2),";border-bottom:1px solid ",(e=>e.theme.border),";"),dt=(0,s.Z)(X.Z,{target:"e1az29pq4"})("grid-template-columns:1fr 0.2fr 0.2fr 0.2fr;white-space:nowrap;margin-bottom:0;border:0;font-size:",(e=>e.theme.fontSizeMedium),";box-shadow:unset;&>div{padding:",(0,v.Z)(1)," ",(0,v.Z)(2),";}",(e=>e.isEmpty&&(0,N.iv)("&>div:last-child{padding:48px ",(0,v.Z)(2),";}","")),";"),lt=(0,s.Z)("span",{target:"e1az29pq3"})({name:"2qga7i",styles:"text-align:right"}),ct=(0,s.Z)("div",{target:"e1az29pq2"})({name:"4os8x4",styles:"display:flex;align-items:center;justify-content:flex-end;text-align:right"}),ut=(0,s.Z)(E.CC,{target:"e1az29pq1"})("margin:0 ",(0,v.Z)(.5),";"),pt=(0,s.Z)("div",{target:"e1az29pq0"})("color:",(e=>e.theme[e.color]),";");class gt extends A.Z{constructor(...e){super(...e),(0,q.Z)(this,"shouldRenderBadRequests",!0)}getDefaultState(){return{...super.getDefaultState(),resolutionTime:null}}getEndpoints(){const{organization:e,start:t,end:r,period:s,utc:n,teamSlug:o}=this.props,i={start:t,end:r,period:s,utc:n};return[["resolutionTime","/teams/".concat(e.slug,"/").concat(o,"/time-to-resolution/"),{query:{...(0,m.fK)(i)}}]]}renderLoading(){return(0,S.tZ)(ht,{children:(0,S.tZ)(p.Z,{})})}renderBody(){const{resolutionTime:e}=this.state,t=H(Object.entries(null!=e?e:{}).map((([e,{avg:t}])=>({value:t,name:new Date(e).getTime()}))));return(0,S.tZ)(ht,{children:(0,S.tZ)(L.Z,{style:{height:190},isGroupedByDate:!0,useShortDate:!0,period:"7d",tooltip:{valueFormatter:e=>(0,O.g9)(e,1)},yAxis:{minInterval:86400,axisLabel:{formatter:e=>0===e?"":(0,O.g9)(e,0,!0,!0)}},legend:{right:0,top:0},xAxis:J(t.length),series:[{seriesName:(0,Z.t)("Time to Resolution"),data:t,silent:!0,barCategoryGap:"5%"}]})})}}const mt=gt,ht=(0,s.Z)("div",{target:"e1s8s0fe0"})("padding:",(0,v.Z)(2)," ",(0,v.Z)(2)," 0 ",(0,v.Z)(2),";");var Zt=r("./app/components/charts/miniBarChart.tsx"),vt=r("./app/components/charts/sessionsRequest.tsx"),ft=r("./app/types/index.tsx"),yt=r("./app/utils/sessions.tsx"),bt=r("./app/views/releases/utils/index.tsx");class xt extends A.Z{constructor(...e){super(...e),(0,q.Z)(this,"shouldRenderBadRequests",!0)}getDefaultState(){return{...super.getDefaultState(),weekSessions:null,periodSessions:null}}getEndpoints(){const{organization:e,start:t,end:r,period:s,utc:n,projects:o}=this.props,i=o.filter((e=>e.hasSessions));if(0===i.length)return[];const a={start:t,end:r,period:s,utc:n},d={environment:[],project:i.map((e=>e.id)),field:"sum(session)",groupBy:["session.status","project"],interval:"1d"};return[["periodSessions","/organizations/".concat(e.slug,"/sessions/"),{query:{...d,...(0,m.fK)(a)}}],["weekSessions","/organizations/".concat(e.slug,"/sessions/"),{query:{...d,statsPeriod:"7d"}}]]}componentDidUpdate(e){const{projects:t,start:r,end:s,period:n,utc:o}=this.props;e.start===r&&e.end===s&&e.period===n&&e.utc===o&&je()(e.projects,t)||this.remountComponent()}getScore(e,t){const{periodSessions:r,weekSessions:s}=this.state,n="week"===t?s:r,o=null==n?void 0:n.groups.filter((t=>t.by.project===e));return(0,yt.Pn)(o,ft.r2.SESSIONS)}getTrend(e){const t=this.getScore(e,"period"),r=this.getScore(e,"week");return null===t||null===r?null:r-t}getMiniBarChartSeries(e,t){const r=(0,yt.wt)(t.groups.filter((t=>t.by.project===Number(e.id))),ft.r2.SESSIONS,t.intervals),s=(0,yt.iy)(ft.r2.SESSIONS,t.groups.find((t=>t.by.project===Number(e.id)&&t.by["session.status"]===ft.$y.HEALTHY)),t.intervals),n=Array(r.length/7).fill(0);s.forEach(((e,t)=>n[Math.floor(t/7)]+=e.value));const o=Array(r.length/7).fill(0);r.forEach(((e,t)=>o[Math.floor(t/7)]+=e));const i=n.map(((e,t)=>({name:s[7*t].name,value:o[t]?(0,O.$1)(e/o[t]*100,2):0})));return[{seriesName:(0,Z.t)("Crash Free Sessions"),data:i}]}renderLoading(){return this.renderBody()}renderScore(e,t){const{loading:r}=this.state;if(r)return(0,S.tZ)("div",{children:(0,S.tZ)(de.Z,{width:"80px",height:"25px"})});const s=this.getScore(Number(e),t);return null===s?"—":(0,bt.zB)(s)}renderTrend(e){const{loading:t}=this.state;if(t)return(0,S.tZ)("div",{children:(0,S.tZ)(de.Z,{width:"80px",height:"25px"})});const r=this.getTrend(Number(e));return null===r?"—":(0,S.BX)(Bt,{color:r>=0?"green300":"red300",children:["".concat(R()(Math.abs(r),3),"%"),(0,S.tZ)(kt,{direction:r>=0?"up":"down",size:"xs"})]})}renderBody(){const{organization:e,projects:t,period:r}=this.props,s=V(t.map((e=>{var t;return{project:e,trend:null!==(t=this.getTrend(Number(e.id)))&&void 0!==t?t:0}})).sort(((e,t)=>Math.abs(t.trend)-Math.abs(e.trend))));return(0,S.tZ)(vt.Z,{api:this.api,project:t.map((({id:e})=>Number(e))),organization:e,interval:"1d",groupBy:["session.status","project"],field:[ft.r2.SESSIONS],statsPeriod:r,children:({response:e,loading:o})=>(0,S.tZ)(jt,{isEmpty:0===t.length,emptyMessage:(0,Z.t)("No projects with release health enabled"),emptyAction:(0,S.tZ)(I.ZP,{size:"small",external:!0,href:"https://docs.sentry.io/platforms/dotnet/guides/nlog/configuration/releases/#release-health",children:(0,Z.t)("Learn More")}),headers:[(0,Z.t)("Project"),(0,S.tZ)(St,{children:(0,Z._N)("Last [period]",{period:r})},"last"),(0,S.tZ)(St,{children:(0,Z._N)("[period] Avg",{period:r})},"avg"),(0,S.tZ)(St,{children:(0,Z.t)("Last 7 Days")},"curr"),(0,S.tZ)(St,{children:(0,Z.t)("Difference")},"diff")],children:s.map((({project:t})=>(0,S.BX)(n.Fragment,{children:[(0,S.tZ)(F,{children:(0,S.tZ)(G,{avatarSize:18,project:t})}),(0,S.tZ)("div",{children:e&&!o&&(0,S.tZ)(Zt.Z,{isGroupedByDate:!0,showTimeInTooltip:!0,series:this.getMiniBarChartSeries(t,e),height:25})}),(0,S.tZ)(zt,{children:this.renderScore(t.id,"period")}),(0,S.tZ)(zt,{children:this.renderScore(t.id,"week")}),(0,S.tZ)(zt,{children:this.renderTrend(t.id)})]},t.id)))})})}}const wt=xt,jt=(0,s.Z)(X.Z,{target:"e182a5844"})("grid-template-columns:1fr 0.2fr 0.2fr 0.2fr 0.2fr;font-size:",(e=>e.theme.fontSizeMedium),";white-space:nowrap;margin-bottom:0;border:0;box-shadow:unset;overflow:visible;&>div{padding:",(0,v.Z)(1)," ",(0,v.Z)(2),";}",(e=>e.isEmpty&&(0,N.iv)("&>div:last-child{padding:48px ",(0,v.Z)(2),";}","")),";"),St=(0,s.Z)("span",{target:"e182a5843"})({name:"2qga7i",styles:"text-align:right"}),zt=(0,s.Z)("div",{target:"e182a5842"})({name:"4os8x4",styles:"display:flex;align-items:center;justify-content:flex-end;text-align:right"}),kt=(0,s.Z)(E.CC,{target:"e182a5841"})("margin:0 ",(0,v.Z)(.5),";"),Bt=(0,s.Z)("div",{target:"e182a5840"})("color:",(e=>e.theme[e.color]),";");r("../node_modules/core-js/modules/es.array.unscopables.flat-map.js");class Tt extends A.Z{constructor(...e){super(...e),(0,q.Z)(this,"shouldRenderBadRequests",!0)}getDefaultState(){return{...super.getDefaultState(),weekIssues:null,periodIssues:null}}getEndpoints(){const{organization:e,start:t,end:r,period:s,utc:n,teamSlug:o}=this.props,i={start:t,end:r,period:s,utc:n};return[["periodIssues","/teams/".concat(e.slug,"/").concat(o,"/all-unresolved-issues/"),{query:{...(0,m.fK)(i)}}],["weekIssues","/teams/".concat(e.slug,"/").concat(o,"/all-unresolved-issues/"),{query:{statsPeriod:"7d"}}]]}componentDidUpdate(e){const{teamSlug:t,start:r,end:s,period:n,utc:o}=this.props;e.start===r&&e.end===s&&e.period===n&&e.utc===o&&je()(e.teamSlug,t)||this.remountComponent()}getTotalUnresolved(e,t){var r;const{periodIssues:s,weekIssues:n}=this.state,o="week"===t?n:s,i=Object.values(null!==(r=null==o?void 0:o[e])&&void 0!==r?r:{}),a=i.reduce(((e,t)=>e+t.unresolved),0);return Math.round(a/i.length)}renderLoading(){return this.renderBody()}renderBody(){var e;const{projects:t,period:r}=this.props,{loading:s}=this.state,o=null!==(e=this.state.periodIssues)&&void 0!==e?e:{},i={};for(const e of Object.keys(o)){const t=this.getTotalUnresolved(Number(e),"period"),r=this.getTotalUnresolved(Number(e),"week"),s=Math.abs((r-t)/t);i[e]={projectId:e,periodAvg:t,weekAvg:r,percentChange:Number.isNaN(s)?0:s}}const a=V(t.map((e=>{var t,r;return{project:e,trend:null!==(t=null===(r=i[e.id])||void 0===r?void 0:r.percentChange)&&void 0!==t?t:0}})).sort(((e,t)=>Math.abs(t.trend)-Math.abs(e.trend)))),d=H(W(Object.values(o).flatMap((e=>Object.entries(e).map((([e,{unresolved:t}])=>[e,t])))).reduce(((e,[t,r])=>(void 0===e[t]&&(e[t]=0),e[t]+=r,e)),{}))).map((e=>({...e,value:Math.round(e.value/7)})));return(0,S.BX)("div",{children:[(0,S.BX)(_t,{children:[s&&(0,S.tZ)(de.Z,{height:"200px"}),!s&&(0,S.tZ)(L.Z,{style:{height:190},isGroupedByDate:!0,useShortDate:!0,period:"7d",legend:{right:3,top:0},yAxis:{minInterval:1},xAxis:J(d.length),series:[{seriesName:(0,Z.t)("Unresolved Issues"),silent:!0,data:d,barCategoryGap:"5%"}]})]}),(0,S.tZ)(Mt,{isEmpty:0===t.length,isLoading:s,headers:[(0,Z.t)("Projects"),(0,S.tZ)(qt,{children:(0,Z._N)("Last [period] Average",{period:r})},"last"),(0,S.tZ)(qt,{children:(0,Z.t)("Last 7 Days")},"curr"),(0,S.tZ)(qt,{children:(0,Z.t)("Change")},"diff")],children:a.map((({project:e})=>{var t;const r=null!==(t=i[e.id])&&void 0!==t?t:{};return(0,S.BX)(n.Fragment,{children:[(0,S.tZ)(F,{children:(0,S.tZ)(G,{avatarSize:18,project:e})}),(0,S.tZ)(Nt,{children:r.periodAvg}),(0,S.tZ)(Nt,{children:r.weekAvg}),(0,S.tZ)(Nt,{children:(0,S.BX)(Rt,{color:r.percentChange>=0?"green300":"red300",children:[(0,O.rl)(Number.isNaN(r.percentChange)?0:r.percentChange,0),(0,S.tZ)(Ct,{direction:r.percentChange>=0?"down":"up",size:"xs"})]})})]},e.id)}))})]})}}const Dt=Tt,_t=(0,s.Z)("div",{target:"eahkfcz5"})("padding:",(0,v.Z)(2)," ",(0,v.Z)(2)," 0 ",(0,v.Z)(2),";border-bottom:1px solid ",(e=>e.theme.border),";"),Mt=(0,s.Z)(X.Z,{target:"eahkfcz4"})("grid-template-columns:1fr 0.2fr 0.2fr 0.2fr;white-space:nowrap;margin-bottom:0;border:0;font-size:",(e=>e.theme.fontSizeMedium),";box-shadow:unset;&>div{padding:",(0,v.Z)(1)," ",(0,v.Z)(2),";}"),qt=(0,s.Z)("span",{target:"eahkfcz3"})({name:"2qga7i",styles:"text-align:right"}),Nt=(0,s.Z)("div",{target:"eahkfcz2"})({name:"4os8x4",styles:"display:flex;align-items:center;justify-content:flex-end;text-align:right"}),Ct=(0,s.Z)(E.CC,{target:"eahkfcz1"})("margin:0 ",(0,v.Z)(.5),";"),Rt=(0,s.Z)("div",{target:"eahkfcz0"})("color:",(e=>e.theme[e.color]),";"),At="8w",It=["pageStatsPeriod","pageStart","pageEnd","pageUtc","dataCategory","transform","sort","query","cursor","team"];function Lt({location:e,router:t}){var r,s,i,d,c;const h=(0,y.M)(),z=(0,x.Z)(),{teams:B,initiallyLoaded:T}=(0,w.Z)({provideUserTeams:!0}),D=(0,o.u)(),_=null!==(r=null==e?void 0:e.query)&&void 0!==r?r:{},M="teamInsightsSelectedTeamId:".concat(z.slug);let q=null!==(s=_.team)&&void 0!==s?s:b.Z.getItem(M);q&&!B.find((e=>e.id===q))&&(q=null);const N=null!==(i=q)&&void 0!==i?i:null===(d=B[0])||void 0===d?void 0:d.id,C=B.find((e=>e.id===N)),R=null!==(c=null==C?void 0:C.projects)&&void 0!==c?c:[];function A(r){const s=a()(r,It),n={...e,query:{..._,...s}};return t.push(n),n}(0,n.useEffect)((()=>{(0,f.Z)("team_insights.viewed",{organization:z})}),[]);const{period:I,start:L,end:P,utc:X}=function(){const{start:e,end:t,statsPeriod:r,utc:s}=(0,m.fK)(_,{allowEmptyPeriod:!0,allowAbsoluteDatetime:!0,allowAbsolutePageDatetime:!0});if(!r&&!e&&!t)return{period:At};if(r)return{period:r};const n="true"===s;return e&&t?n?{start:l().utc(e).format(),end:l().utc(t).format(),utc:n}:{start:l()(e).utc().format(),end:l()(t).utc().format(),utc:n}:{period:At}}();if(0===B.length)return(0,S.tZ)(g.Z,{organization:z,superuserNeedsToBeProjectMember:!0});const E=z.features.includes("team-insights-v2");return(0,S.BX)(n.Fragment,{children:[(0,S.tZ)(j.Z,{organization:z,activeTab:"team"}),(0,S.BX)(Xt,{children:[!T&&(0,S.tZ)(p.Z,{}),T&&(0,S.BX)(u.or,{fullWidth:!0,children:[(0,S.BX)(Et,{children:[(0,S.tZ)(Ot,{name:"select-team",inFieldLabel:(0,Z.t)("Team: "),value:null==C?void 0:C.slug,onChange:e=>{return t=e.actor.id,b.Z.setItem(M,t),void A({team:t});var t},teamFilter:h?void 0:e=>e.isMember,styles:{singleValue(e){const t={display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:D.fontSizeMedium,":before":{...e[":before"],color:D.textColor,marginRight:(0,v.Z)(1.5),marginLeft:(0,v.Z)(.5)}};return{...e,...t}},input:(e,t)=>({...e,display:"grid",gridTemplateColumns:"max-content 1fr",alignItems:"center",gridGap:(0,v.Z)(1),":before":{backgroundColor:t.theme.backgroundSecondary,height:24,width:38,borderRadius:3,content:'""',display:"block"}})}}),(0,S.tZ)(Ut,{organization:z,relative:null!=I?I:"",start:null!=L?L:null,end:null!=P?P:null,utc:null!=X?X:null,onUpdate:function(e){const{start:t,end:r,relative:s,utc:n}=e;if(t&&r){const e=n?l().utc:l();return A({pageStatsPeriod:void 0,pageStart:e(t).format(),pageEnd:e(r).format(),pageUtc:null!=n?n:void 0})}return A({pageStatsPeriod:s||void 0,pageStart:void 0,pageEnd:void 0,pageUtc:void 0})},showAbsolute:!1,relativeOptions:{"14d":(0,Z.t)("Last 2 weeks"),"4w":(0,Z.t)("Last 4 weeks"),[At]:(0,Z.t)("Last 8 weeks"),"12w":(0,Z.t)("Last 12 weeks")}})]}),(0,S.tZ)(Ft,{children:(0,Z.t)("Project Health")}),(0,S.tZ)(k,{title:(0,Z.t)("Crash Free Sessions"),description:(0,Z.t)("The percentage of healthy, errored, and abnormal sessions that didn’t cause a crash."),children:(0,S.tZ)(wt,{projects:R,organization:z,period:I,start:L,end:P,utc:X})}),(0,S.tZ)(k,{title:(0,Z.t)("User Misery"),description:(0,Z.t)("The number of unique users that experienced load times 4x the project’s configured threshold."),children:(0,S.tZ)(Fe,{organization:z,projects:R,teamId:C.id,period:I,start:null==L?void 0:L.toString(),end:null==P?void 0:P.toString(),location:e})}),(0,S.tZ)(k,{title:(0,Z.t)("Metric Alerts Triggered"),description:(0,Z.t)("Alerts triggered from the Alert Rules your team created."),children:(0,S.tZ)($,{organization:z,projects:R,teamSlug:C.slug,period:I,start:null==L?void 0:L.toString(),end:null==P?void 0:P.toString(),location:e})}),(0,S.tZ)(Ft,{children:(0,Z.t)("Team Activity")}),!E&&(0,S.tZ)(k,{title:(0,Z.t)("Issues Reviewed"),description:(0,Z.t)("Issues triaged by your team taking an action on them such as resolving, ignoring, marking as reviewed, or deleting."),children:(0,S.tZ)(Ne,{organization:z,projects:R,teamSlug:C.slug,period:I,start:null==L?void 0:L.toString(),end:null==P?void 0:P.toString(),location:e})}),E&&(0,S.tZ)(k,{title:(0,Z.t)("New and Returning Issues"),description:(0,Z.t)("The new, regressed, and unignored issues that were assigned to your team."),children:(0,S.tZ)(Be,{organization:z,projects:R,teamSlug:C.slug,period:I,start:null==L?void 0:L.toString(),end:null==P?void 0:P.toString(),location:e,statuses:["new","regressed","unignored"]})}),E&&(0,S.tZ)(k,{title:(0,Z.t)("Issues Triaged"),description:(0,Z.t)("How many new and returning issues were reviewed by your team each week. Reviewing an issue includes marking as reviewed, resolving, assigning to another team, or deleting."),children:(0,S.tZ)(Be,{organization:z,projects:R,teamSlug:C.slug,period:I,start:null==L?void 0:L.toString(),end:null==P?void 0:P.toString(),location:e,statuses:["resolved","ignored","deleted"]})}),E&&(0,S.tZ)(k,{title:(0,Z.t)("Age of Unresolved Issues"),description:(0,Z.t)("How long ago since unresolved issues were first created."),children:(0,S.tZ)(he,{organization:z,teamSlug:C.slug})}),E&&(0,S.tZ)(k,{title:(0,Z.t)("All Unresolved Issues"),description:(0,Z.t)("This includes New and Returning issues in the last 7 days as well as those that haven’t been resolved or ignored in the past."),children:(0,S.tZ)(Dt,{projects:R,organization:z,teamSlug:C.slug,period:I,start:L,end:P,utc:X})}),(0,S.tZ)(k,{title:(0,Z.t)("Time to Resolution"),description:(0,Z.t)("The mean time it took for issues to be resolved by your team."),children:(0,S.tZ)(mt,{organization:z,teamSlug:C.slug,period:I,start:null==L?void 0:L.toString(),end:null==P?void 0:P.toString(),location:e})}),(0,S.tZ)(k,{title:(0,Z.t)("Number of Releases"),description:(0,Z.t)("The releases that were created in your team’s projects."),children:(0,S.tZ)(it,{projects:R,organization:z,teamSlug:C.slug,period:I,start:L,end:P,utc:X})})]})]})]})}Lt.displayName="TeamInsightsOverview";const Pt=Lt,Xt=(0,s.Z)(u.uT,{target:"ese1g3n4"})("margin-bottom:-20px;@media (min-width: ",(e=>e.theme.breakpoints[1]),"){display:block;}"),Et=(0,s.Z)("div",{target:"ese1g3n3"})("display:grid;align-items:center;gap:",(0,v.Z)(2),";margin-bottom:",(0,v.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints[0]),"){grid-template-columns:246px 1fr;}"),Ot=(0,s.Z)(c.Z,{target:"ese1g3n2"})("&>div{box-shadow:",(e=>e.theme.dropShadowLight),";}"),Ut=(0,s.Z)(h.Z,{target:"ese1g3n1"})({name:"j6w5js",styles:"height:40px;div{min-height:unset;}"}),Ft=(0,s.Z)(u.Dx,{target:"ese1g3n0"})("margin-bottom:",(0,v.Z)(1),"!important;")},"../node_modules/lodash/_baseMean.js":(e,t,r)=>{var s=r("../node_modules/lodash/_baseSum.js");e.exports=function(e,t){var r=null==e?0:e.length;return r?s(e,t)/r:NaN}},"../node_modules/lodash/_baseSum.js":e=>{e.exports=function(e,t){for(var r,s=-1,n=e.length;++s<n;){var o=t(e[s]);void 0!==o&&(r=void 0===r?o:r+o)}return r}},"../node_modules/lodash/mean.js":(e,t,r)=>{var s=r("../node_modules/lodash/_baseMean.js"),n=r("../node_modules/lodash/identity.js");e.exports=function(e){return s(e,n)}},"../node_modules/lodash/negate.js":e=>{e.exports=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},"../node_modules/lodash/omitBy.js":(e,t,r)=>{var s=r("../node_modules/lodash/_baseIteratee.js"),n=r("../node_modules/lodash/negate.js"),o=r("../node_modules/lodash/pickBy.js");e.exports=function(e,t){return o(e,n(s(t)))}}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationStats_teamInsights_overview_tsx-node_modules_lodash_mean_js.64f724ae86792b934df5ed7816b60839.js.map