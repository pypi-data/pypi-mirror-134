"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_admin_adminUserEdit_tsx"],{"./app/views/admin/adminUserEdit.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>U});var i=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/react/index.js")),o=s("../node_modules/react-router/es/index.js"),a=s("./app/actionCreators/indicator.tsx"),d=s("./app/actionCreators/modal.tsx"),l=s("./app/components/button.tsx"),p=s("./app/locale.tsx"),m=s("./app/styles/space.tsx"),u=s("./app/views/asyncView.tsx"),c=s("./app/views/settings/components/forms/controls/radioGroup.tsx"),h=s("./app/views/settings/components/forms/form.tsx"),y=s("./app/views/settings/components/forms/jsonForm.tsx"),b=s("./app/views/settings/components/forms/model.tsx"),g=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const v={title:"User details",fields:[{name:"name",type:"string",required:!0,label:(0,p.t)("Name")},{name:"username",type:"string",required:!0,label:(0,p.t)("Username"),help:(0,p.t)("The username is the unique id of the user in the system")},{name:"email",type:"string",required:!0,label:(0,p.t)("Email"),help:(0,p.t)("The users primary email address")},{name:"isActive",type:"boolean",required:!0,label:(0,p.t)("Active"),help:(0,p.t)("Designates whether this user should be treated as active. Unselect this instead of deleting accounts.")},{name:"isStaff",type:"boolean",required:!0,label:(0,p.t)("Admin"),help:(0,p.t)("Designates whether this user can perform administrative functions.")},{name:"isSuperuser",type:"boolean",required:!0,label:(0,p.t)("Superuser"),help:(0,p.t)("Designates whether this user has all permissions without explicitly assigning them.")}]},x={disable:(0,p.t)("Disable User"),delete:(0,p.t)("Permanently Delete User")};class w extends n.Component{constructor(...e){super(...e),(0,i.Z)(this,"state",{deleteType:"disable"}),(0,i.Z)(this,"onRemove",(()=>{this.props.onRemove(this.state.deleteType),this.props.closeModal()}))}render(){const{user:e}=this.props,{deleteType:t}=this.state;return(0,g.BX)(n.Fragment,{children:[(0,g.tZ)(c.Z,{value:t,label:(0,p.t)("Remove user %s",e.email),onChange:e=>this.setState({deleteType:e}),choices:[["disable",(0,p.t)("Disable the account.")],["delete",(0,p.t)("Permanently remove the user and their data.")]]}),(0,g.BX)(f,{children:[(0,g.tZ)(l.ZP,{priority:"danger",onClick:this.onRemove,children:x[t]}),(0,g.tZ)(l.ZP,{onClick:this.props.closeModal,children:(0,p.t)("Cancel")})]})]})}}w.displayName="RemoveUserModal";class Z extends u.Z{constructor(...e){super(...e),(0,i.Z)(this,"removeUser",(e=>"delete"===e?this.deleteUser():this.deactivateUser())),(0,i.Z)(this,"formModel",new b.Z)}get userEndpoint(){const{params:e}=this.props;return"/users/".concat(e.id,"/")}getEndpoints(){return[["user",this.userEndpoint]]}async deleteUser(){var e;await this.api.requestPromise(this.userEndpoint,{method:"DELETE",data:{hardDelete:!0,organizations:[]}}),(0,a.S9)((0,p.t)("%s's account has been deleted.",null===(e=this.state.user)||void 0===e?void 0:e.email)),o.browserHistory.replace("/manage/users/")}async deactivateUser(){const e=await this.api.requestPromise(this.userEndpoint,{method:"PUT",data:{isActive:!1}});this.setState({user:e}),this.formModel.setInitialData(e),(0,a.S9)((0,p.t)("%s's account has been deactivated.",e.email))}renderBody(){const{user:e}=this.state;return null===e?null:(0,g.BX)(n.Fragment,{children:[(0,g.tZ)("h3",{children:(0,p.t)("Users")}),(0,g.tZ)("p",{children:(0,p.t)("Editing user: %s",e.email)}),(0,g.tZ)(h.Z,{model:this.formModel,initialData:e,apiMethod:"PUT",apiEndpoint:this.userEndpoint,requireChanges:!0,onSubmitError:a.Iw,onSubmitSuccess:e=>{this.setState({user:e}),(0,a.S9)("User account updated.")},extraButton:(0,g.tZ)(l.ZP,{type:"button",onClick:()=>(0,d.openModal)((t=>(0,g.tZ)(w,{user:e,onRemove:this.removeUser,...t}))),style:{marginLeft:(0,m.Z)(1)},priority:"danger",children:(0,p.t)("Remove User")}),children:(0,g.tZ)(y.Z,{forms:[v]})})]})}}const f=(0,r.Z)("div",{target:"e1wmf500"})("display:grid;grid-auto-flow:column;gap:",(0,m.Z)(1),";justify-content:end;padding:20px 30px;margin:20px -30px -30px;border-top:1px solid ",(e=>e.theme.border),";"),U=Z},"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>o}),s("../node_modules/react/index.js");var i=s("./app/components/asyncComponent.tsx"),r=s("./app/components/sentryDocumentTitle.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class o extends i.Z{getTitle(){return""}render(){return(0,n.tZ)(r.Z,{title:this.getTitle(),children:this.renderComponent()})}}o.displayName="AsyncView"}}]);
//# sourceMappingURL=../sourcemaps/app_views_admin_adminUserEdit_tsx.af43e7e8c43d8b8f941b9665e4172950.js.map