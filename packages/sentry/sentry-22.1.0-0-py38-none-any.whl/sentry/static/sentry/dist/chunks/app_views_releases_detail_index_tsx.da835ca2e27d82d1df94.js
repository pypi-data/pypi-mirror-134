"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_releases_detail_index_tsx"],{"./app/actionCreators/release.tsx":(e,t,s)=>{s.d(t,{o7:()=>d,dF:()=>p,VE:()=>u,aQ:()=>h});var o=s("../node_modules/@sentry/minimal/esm/index.js"),r=s("../node_modules/@sentry/types/esm/severity.js"),n=s("./app/actionCreators/indicator.tsx"),a=s("./app/actions/releaseActions.tsx"),i=s("./app/locale.tsx"),l=s("./app/stores/releaseStore.tsx"),c=s("./app/types/index.tsx");function d(e,t){const{orgSlug:s,projectSlug:n,releaseVersion:i}=t,c="/projects/".concat(s,"/").concat(n,"/releases/").concat(encodeURIComponent(i),"/");return l.Z.state.releaseLoading[(0,l.p)(n,i)]=!0,a.Z.loadRelease(s,n,i),e.requestPromise(c,{method:"GET"}).then((e=>{a.Z.loadReleaseSuccess(n,i,e)})).catch((e=>{404!==e.status?(a.Z.loadReleaseError(n,i,e),o.$e((t=>{t.setLevel(r.z.Warning),t.setFingerprint(["getRelease-action-creator"]),o.Tb(e)}))):a.Z.loadReleaseSuccess(n,i,null)}))}function p(e,t){const{orgSlug:s,projectSlug:n,releaseVersion:i}=t,c="/organizations/".concat(s,"/releases/").concat(encodeURIComponent(i),"/deploys/");return l.Z.state.deploysLoading[(0,l.p)(n,i)]=!0,a.Z.loadDeploys(s,n,i),e.requestPromise(c,{method:"GET"}).then((e=>{a.Z.loadDeploysSuccess(n,i,e)})).catch((e=>{404!==e.status?(a.Z.loadDeploysError(n,i,e),o.$e((t=>{t.setLevel(r.z.Warning),t.setFingerprint(["getReleaseDeploys-action-creator"]),o.Tb(e)}))):a.Z.loadDeploysSuccess(n,i,null)}))}function u(e,t){const{orgSlug:s,projectSlug:o,releaseVersion:r}=t;return a.Z.loadRelease(s,o,r),(0,n.E3)((0,i.t)("Archiving Release…")),e.requestPromise("/organizations/".concat(s,"/releases/"),{method:"POST",data:{status:c.dE.Archived,projects:[],version:r}}).then((e=>{a.Z.loadReleaseSuccess(o,r,e),(0,n.S9)((0,i.t)("Release was successfully archived."))})).catch((e=>{var t,s;throw a.Z.loadReleaseError(o,r,e),(0,n.Iw)(null!==(t=null===(s=e.responseJSON)||void 0===s?void 0:s.detail)&&void 0!==t?t:(0,i.t)("Release could not be be archived.")),e}))}function h(e,t){const{orgSlug:s,projectSlug:o,releaseVersion:r}=t;return a.Z.loadRelease(s,o,r),(0,n.E3)((0,i.t)("Restoring Release…")),e.requestPromise("/organizations/".concat(s,"/releases/"),{method:"POST",data:{status:c.dE.Active,projects:[],version:r}}).then((e=>{a.Z.loadReleaseSuccess(o,r,e),(0,n.S9)((0,i.t)("Release was successfully restored."))})).catch((e=>{var t,s;throw a.Z.loadReleaseError(o,r,e),(0,n.Iw)(null!==(t=null===(s=e.responseJSON)||void 0===s?void 0:s.detail)&&void 0!==t?t:(0,i.t)("Release could not be be restored.")),e}))}},"./app/actions/releaseActions.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});var o=s("../node_modules/reflux/src/index.js");const r=s.n(o)().createActions(["loadRelease","loadReleaseError","loadReleaseSuccess","loadDeploys","loadDeploysError","loadDeploysSuccess"])},"./app/components/links/listLink.tsx":(e,t,s)=>{s.d(t,{Z:()=>m});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),a=s("../node_modules/react-router/es/index.js"),i=s("../node_modules/classnames/index.js"),l=s.n(i),c=s("../node_modules/lodash/omit.js"),d=s.n(c),p=s("../node_modules/query-string/index.js"),u=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class h extends n.Component{constructor(...e){super(...e),(0,o.Z)(this,"getClassName",(()=>{const e={},{className:t,activeClassName:s}=this.props;return t&&(e[t]=!0),this.isActive()&&s&&(e[s]=!0),l()(e)}))}isActive(){const{isActive:e,to:t,query:s,index:o,router:r}=this.props,n=s?p.parse(s):void 0,a="string"==typeof t?{pathname:t,query:n}:t;return"function"==typeof e?e(a,o):r.isActive(a,o)}render(){const{index:e,children:t,to:s,disabled:o,...r}=this.props,n=d()(r,"activeClassName","css","isActive","index","router","location");return(0,u.tZ)(g,{className:this.getClassName(),disabled:o,children:(0,u.tZ)(a.Link,{...n,onlyActiveOnIndex:e,to:o?"":s,children:t})})}}h.displayName="ListLink",(0,o.Z)(h,"displayName","ListLink"),(0,o.Z)(h,"defaultProps",{activeClassName:"active",index:!1,disabled:!1});const m=(0,a.withRouter)(h),g=(0,r.Z)("li",{shouldForwardProp:e=>"disabled"!==e,target:"er8tqc10"})((e=>e.disabled&&"\n   a {\n    color:".concat(e.theme.disabled," !important;\n    pointer-events: none;\n    :hover {\n      color: ").concat(e.theme.disabled,"  !important;\n    }\n   }\n")),";")},"./app/components/navigationButtonGroup.tsx":(e,t,s)=>{s.d(t,{Z:()=>c});var o=s("./app/components/button.tsx"),r=s("./app/components/buttonBar.tsx"),n=s("./app/icons/index.tsx"),a=s("./app/locale.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=({links:e,hasNext:t=!1,hasPrevious:s=!1,className:l,size:c,onOldestClick:d,onOlderClick:p,onNewerClick:u,onNewestClick:h})=>(0,i.BX)(r.ZP,{className:l,merged:!0,children:[(0,i.tZ)(o.ZP,{size:c,to:e[0],disabled:!s,label:(0,a.t)("Oldest"),icon:(0,i.tZ)(n.sm,{size:"xs"}),onClick:d}),(0,i.tZ)(o.ZP,{size:c,to:e[1],disabled:!s,onClick:p,children:(0,a.t)("Older")}),(0,i.tZ)(o.ZP,{size:c,to:e[2],disabled:!t,onClick:u,children:(0,a.t)("Newer")}),(0,i.tZ)(o.ZP,{size:c,to:e[3],disabled:!t,label:(0,a.t)("Newest"),icon:(0,i.tZ)(n.pi,{size:"xs"}),onClick:h})]});l.displayName="NavigationButtonGroup";const c=l},"./app/components/pickProjectToContinue.tsx":(e,t,s)=>{s.d(t,{Z:()=>c});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.string.replace.js"),s("./app/actionCreators/modal.tsx")),n=s("./app/components/contextPickerModal.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i({noProjectRedirectPath:e,nextPath:t,router:s,projects:o}){const i=t.query;let c=!1,d="".concat(t.pathname,"?project=");if(i){const e=[...Object.entries(i).filter((([e,t])=>"project"!==e)).map((([e,t])=>"".concat(e,"=").concat(t))),"project="].join("&");d="".concat(t.pathname,"?").concat(e)}return 1===o.length?(s.replace(d+o[0].id),null):((0,r.openModal)((e=>(0,a.tZ)(n.Z,{...e,needOrg:!1,needProject:!0,nextPath:"".concat(d,":project"),onFinish:e=>{c=!0,s.replace(e)},projectSlugs:o.map((e=>e.slug))})),{onClose(){c||s.push(e)}}),(0,a.tZ)(l,{}))}i.displayName="PickProjectToContinue";const l=(0,o.Z)("div",{target:"e1sj8doz0"})({name:"4wiox3",styles:"height:100vh;width:100%"}),c=i},"./app/stores/releaseStore.tsx":(e,t,s)=>{s.d(t,{p:()=>i,Z:()=>c}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var o=s("../node_modules/reflux/src/index.js"),r=s.n(o),n=s("./app/actions/organizationActions.tsx"),a=s("./app/actions/releaseActions.tsx");const i=(e,t)=>"".concat(e).concat(t),l={state:{orgSlug:void 0,release:new Map,releaseLoading:new Map,releaseError:new Map,deploys:new Map,deploysLoading:new Map,deploysError:new Map},listenables:a.Z,init(){this.listenTo(n.Z.update,this.updateOrganization),this.reset()},reset(){this.state={orgSlug:void 0,release:new Map,releaseLoading:new Map,releaseError:new Map,deploys:new Map,deploysLoading:new Map,deploysError:new Map},this.trigger(this.state)},updateOrganization(e){this.reset(),this.state.orgSlug=e.slug,this.trigger(this.state)},loadRelease(e,t,s){this.orgSlug&&this.orgSlug===e||(this.reset(),this.orgSlug=e);const o=i(t,s),{releaseLoading:r,releaseError:n,...a}=this.state;this.state={...a,releaseLoading:{...r,[o]:!0},releaseError:{...n,[o]:void 0}},this.trigger(this.state)},loadReleaseError(e,t,s){const o=i(e,t),{releaseLoading:r,releaseError:n,...a}=this.state;this.state={...a,releaseLoading:{...r,[o]:!1},releaseError:{...n,[o]:s}},this.trigger(this.state)},loadReleaseSuccess(e,t,s){const o=i(e,t),{release:r,releaseLoading:n,releaseError:a,...l}=this.state;this.state={...l,release:{...r,[o]:s},releaseLoading:{...n,[o]:!1},releaseError:{...a,[o]:void 0}},this.trigger(this.state)},loadDeploys(e,t,s){this.orgSlug&&this.orgSlug===e||(this.reset(),this.orgSlug=e);const o=i(t,s),{deploysLoading:r,deploysError:n,...a}=this.state;this.state={...a,deploysLoading:{...r,[o]:!0},deploysError:{...n,[o]:void 0}},this.trigger(this.state)},loadDeploysError(e,t,s){const o=i(e,t),{deploysLoading:r,deploysError:n,...a}=this.state;this.state={...a,deploysLoading:{...r,[o]:!1},deploysError:{...n,[o]:s}},this.trigger(this.state)},loadDeploysSuccess(e,t,s){const o=i(e,t),{deploys:r,deploysLoading:n,deploysError:a,...l}=this.state;this.state={...l,deploys:{...r,[o]:s},deploysLoading:{...n,[o]:!1},deploysError:{...a,[o]:void 0}},this.trigger(this.state)},get(e,t){const s=i(e,t);return{release:this.state.release[s],releaseLoading:this.state.releaseLoading[s],releaseError:this.state.releaseError[s],deploys:this.state.deploys[s],deploysLoading:this.state.deploysLoading[s],deploysError:this.state.deploysError[s]}}},c=r().createStore(l)},"./app/utils/routeTitle.tsx":(e,t,s)=>{s.d(t,{Z:()=>o});const o=function(e,t,s=!0,o){const r="".concat(e," - ").concat(t),n=o?"".concat(r," - ").concat(o):r;return s?"".concat(n," - Sentry"):n}},"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>a}),s("../node_modules/react/index.js");var o=s("./app/components/asyncComponent.tsx"),r=s("./app/components/sentryDocumentTitle.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class a extends o.Z{getTitle(){return""}render(){return(0,n.tZ)(r.Z,{title:this.getTitle(),children:this.renderComponent()})}}a.displayName="AsyncView"},"./app/views/releases/detail/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{ReleaseContext:()=>pe,ReleasesDetailContainer:()=>he,default:()=>Ze});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/react/index.js")),a=s("../node_modules/lodash/isEqual.js"),i=s.n(a),l=s("../node_modules/lodash/pick.js"),c=s.n(l),d=s("./app/components/alert.tsx"),p=s("./app/components/asyncComponent.tsx"),u=s("./app/components/loadingIndicator.tsx"),h=s("./app/components/noProjectMessage.tsx"),m=s("./app/components/organizations/pageFilters/container.tsx"),g=s("./app/components/organizations/pageFilters/parse.tsx"),Z=s("./app/components/pickProjectToContinue.tsx"),x=s("./app/constants/pageFilters.tsx"),y=s("./app/icons/index.tsx"),v=s("./app/locale.tsx"),j=s("./app/styles/organization.tsx"),w=s("./app/styles/space.tsx"),b=s("./app/types/index.tsx"),f=s("./app/utils/formatters.tsx"),S=s("./app/utils/routeTitle.tsx"),R=s("./app/utils/sessions.tsx"),C=s("./app/utils/withOrganization.tsx"),z=s("./app/utils/withPageFilters.tsx"),P=s("./app/views/asyncView.tsx"),k=s("./app/views/releases/utils/index.tsx"),E=s("./app/components/badge.tsx"),L=s("./app/components/breadcrumbs.tsx"),_=s("./app/components/clipboard.tsx"),D=s("./app/components/idBadge/index.tsx"),M=s("./app/components/layouts/thirds.tsx"),N=s("./app/components/links/externalLink.tsx"),F=s("./app/components/links/listLink.tsx"),q=s("./app/components/navTabs.tsx"),B=s("./app/components/tooltip.tsx"),T=s("./app/components/version.tsx"),O=s("../node_modules/react-router/es/index.js"),A=s("./app/actionCreators/release.tsx"),U=s("./app/api.tsx"),V=s("./app/components/button.tsx"),I=s("./app/components/buttonBar.tsx"),X=s("./app/components/confirm.tsx"),G=s("./app/components/dropdownLink.tsx"),H=s("./app/components/idBadge/projectBadge.tsx"),J=s("./app/components/menuItem.tsx"),Q=s("./app/components/navigationButtonGroup.tsx"),K=s("./app/components/textOverflow.tsx"),W=s("./app/utils/analytics.tsx"),Y=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function $({location:e,organization:t,projectSlug:s,release:o,releaseMeta:r,refetchData:a}){function i(){const e=r.projects.slice(0,5),t=r.projects.length-e.length;return(0,Y.BX)(n.Fragment,{children:[e.map((e=>(0,Y.tZ)(H.Z,{project:e,avatarSize:18},e.slug))),t>0&&(0,Y.tZ)("span",{children:(0,Y.BX)(B.Z,{title:o.projects.slice(5).map((e=>e.slug)).join(", "),children:["+ ",(0,v.tn)("%s other project","%s other projects",t)]})})]})}function l(e){return(0,Y.tZ)("h4",{children:(0,Y.tZ)(K.Z,{children:e})})}function c(e){return(0,Y.BX)(n.Fragment,{children:[e,(0,Y.tZ)(se,{children:i()}),(0,v.t)("Are you sure you want to do this?")]})}function d(t){return t?{pathname:e.pathname.replace(encodeURIComponent(o.version),t).replace(o.version,t),query:{...e.query,activeRepo:void 0}}:""}function p(e){(0,W.ec)({eventKey:"release_detail.pagination",eventName:"Release Detail: Pagination",organization_id:parseInt(t.id,10),direction:e})}const{nextReleaseVersion:u,prevReleaseVersion:h,firstReleaseVersion:m,lastReleaseVersion:g}=o.currentProjectMeta;return(0,Y.BX)(I.ZP,{gap:1,children:[(0,Y.tZ)(Q.Z,{hasPrevious:!!h,hasNext:!!u,links:[d(m),d(h),d(u),d(g)],onOldestClick:()=>p("oldest"),onOlderClick:()=>p("older"),onNewerClick:()=>p("newer"),onNewestClick:()=>p("newest")}),(0,Y.tZ)(te,{caret:!1,anchorRight:window.innerWidth>992,title:(0,Y.tZ)(ee,{icon:(0,Y.tZ)(y.YR,{}),label:(0,v.t)("Actions")}),children:(0,k.rF)(o)?(0,Y.tZ)(X.Z,{onConfirm:async function(){try{await(0,A.aQ)(new U.KU,{orgSlug:t.slug,projectSlug:s,releaseVersion:o.version}),a()}catch{}},header:l((0,v._N)("Restore Release [release]",{release:(0,f.ko)(o.version)})),message:c((0,v.tn)("You are restoring this release for the following project:","By restoring this release, you are also restoring it for the following projects:",r.projects.length)),cancelText:(0,v.t)("Nevermind"),confirmText:(0,v.t)("Restore"),children:(0,Y.tZ)(J.Z,{children:(0,v.t)("Restore")})}):(0,Y.tZ)(X.Z,{onConfirm:async function(){try{await(0,A.VE)(new U.KU,{orgSlug:t.slug,projectSlug:s,releaseVersion:o.version}),O.browserHistory.push("/organizations/".concat(t.slug,"/releases/"))}catch{}},header:l((0,v._N)("Archive Release [release]",{release:(0,f.ko)(o.version)})),message:c((0,v.tn)("You are archiving this release for the following project:","By archiving this release, you are also archiving it for the following projects:",r.projects.length)),cancelText:(0,v.t)("Nevermind"),confirmText:(0,v.t)("Archive"),children:(0,Y.tZ)(J.Z,{children:(0,v.t)("Archive")})})})]})}$.displayName="ReleaseActions";const ee=(0,r.Z)(V.ZP,{target:"ehxwv692"})({name:"1hdaf3v",styles:"width:40px;height:40px;padding:0"}),te=(0,r.Z)(G.Z,{target:"ehxwv691"})({name:"1lgqri0",styles:"&+.dropdown-menu{top:50px!important;}"}),se=(0,r.Z)("div",{target:"ehxwv690"})("margin:",(0,w.Z)(2)," 0 ",(0,w.Z)(2)," ",(0,w.Z)(2),";display:grid;gap:",(0,w.Z)(.5),";img{border:none!important;box-shadow:none!important;}"),oe=$,re=({location:e,organization:t,release:s,project:o,releaseMeta:r,refetchData:a})=>{const{version:i,url:l}=s,{commitCount:d,commitFilesChanged:p}=r,u="/organizations/".concat(t.slug,"/releases/").concat(encodeURIComponent(i),"/"),h=[{title:(0,v.t)("Overview"),to:""},{title:(0,Y.BX)(n.Fragment,{children:[(0,v.t)("Commits")," ",(0,Y.tZ)(ce,{text:(0,f.Du)(d)})]}),to:"commits/"},{title:(0,Y.BX)(n.Fragment,{children:[(0,v.t)("Files Changed"),(0,Y.tZ)(ce,{text:(0,f.Du)(p)})]}),to:"files-changed/"}];return(0,Y.BX)(M.h4,{children:[(0,Y.BX)(M.oB,{children:[(0,Y.tZ)(L.Z,{crumbs:[{to:"/organizations/".concat(t.slug,"/releases/"),label:(0,v.t)("Releases"),preservePageFilters:!0},{label:(0,v.t)("Release Details")}]}),(0,Y.tZ)(M.Dx,{children:(0,Y.BX)(ne,{children:[(0,Y.tZ)(D.Z,{project:o,avatarSize:28,hideName:!0}),(0,Y.tZ)(ae,{version:i,anchor:!1,truncate:!0}),(0,Y.tZ)(ie,{children:(0,Y.tZ)(_.Z,{value:i,children:(0,Y.tZ)(B.Z,{title:i,containerDisplayMode:"flex",children:(0,Y.tZ)(y.vU,{})})})}),!!l&&(0,Y.tZ)(ie,{children:(0,Y.tZ)(B.Z,{title:l,children:(0,Y.tZ)(N.Z,{href:l,children:(0,Y.tZ)(y.V$,{})})})})]})})]}),(0,Y.tZ)(M.kP,{children:(0,Y.tZ)(oe,{organization:t,projectSlug:o.slug,release:s,releaseMeta:r,refetchData:a,location:e})}),(0,Y.tZ)(n.Fragment,{children:(0,Y.tZ)(le,{children:h.map((t=>{return(0,Y.tZ)(F.Z,{to:(s=t.to,{pathname:u+s,query:c()(e.query,Object.values(x.nF))}),isActive:()=>(()=>{const t=h.filter((e=>e.to.length)).find((t=>e.pathname.endsWith(t.to)));return t?t.to:h[0].to})()===t.to,children:t.title},t.to);var s}))})})]})};re.displayName="ReleaseHeader";const ne=(0,r.Z)("div",{target:"e1l92gzd4"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),ae=(0,r.Z)(T.Z,{target:"e1l92gzd3"})("margin-left:",(0,w.Z)(1),";"),ie=(0,r.Z)("span",{target:"e1l92gzd2"})("transition:color 0.3s ease-in-out;margin-left:",(0,w.Z)(1),";&,a{color:",(e=>e.theme.gray300),";display:flex;&:hover{cursor:pointer;color:",(e=>e.theme.textColor),";}}"),le=(0,r.Z)(q.Z,{target:"e1l92gzd1"})({name:"13jhhqe",styles:"margin-bottom:0;width:100%"}),ce=(0,r.Z)(E.Z,{target:"e1l92gzd0"})("@media (max-width: ",(e=>e.theme.breakpoints[0]),"){display:none;}"),de=re,pe=(0,n.createContext)({});class ue extends P.Z{constructor(...e){super(...e),(0,o.Z)(this,"shouldReload",!0)}getTitle(){const{params:e,organization:t,selection:s}=this.props,{release:o}=this.state,r=null==o?void 0:o.projects.find((e=>e.id===s.projects[0]));return(0,S.Z)((0,v.t)("Release %s",(0,f.ko)(e.release)),t.slug,!1,null==r?void 0:r.slug)}getDefaultState(){return{...super.getDefaultState(),deploys:[],sessions:null}}componentDidUpdate(e,t){const{organization:s,params:o,location:r}=this.props;e.params.release===o.release&&e.organization.slug===s.slug&&i()(this.pickLocationQuery(e.location),this.pickLocationQuery(r))||super.componentDidUpdate(e,t)}getEndpoints(){var e;const{organization:t,location:s,params:o,releaseMeta:r}=this.props,n="/organizations/".concat(t.slug,"/releases/").concat(encodeURIComponent(o.release),"/"),a=[["release",n,{query:{adoptionStages:1,...(0,g.fK)(this.pickLocationQuery(s))}}]];return r.deployCount>0&&a.push(["deploys","".concat(n,"deploys/")]),a.push(["sessions","/organizations/".concat(t.slug,"/sessions/"),{query:{project:s.query.project,environment:null!==(e=s.query.environment)&&void 0!==e?e:[],query:'release:"'.concat(o.release,'"'),field:"sum(session)",statsPeriod:"90d",interval:"1d"}}]),a}pickLocationQuery(e){return c()(e.query,[...Object.values(x.nF),...Object.values(x.V)])}renderError(...e){return Object.values(this.state.errors).find((e=>404===(null==e?void 0:e.status)||403===(null==e?void 0:e.status)))?(0,Y.tZ)(j.JH,{children:(0,Y.tZ)(d.Z,{type:"error",icon:(0,Y.tZ)(y.FC,{}),children:(0,v.t)("This release may not be in your selected project.")})}):super.renderError(...e)}renderLoading(){return(0,Y.tZ)(j.JH,{children:(0,Y.tZ)(u.Z,{})})}renderBody(){const{organization:e,location:t,selection:s,releaseMeta:o}=this.props,{release:r,deploys:n,sessions:a,reloading:i}=this.state,l=null==r?void 0:r.projects.find((e=>e.id===s.projects[0])),c=(0,k.C8)(r);return l&&r?(0,Y.tZ)(h.Z,{organization:e,children:(0,Y.BX)(me,{children:[(0,Y.tZ)(de,{location:t,organization:e,release:r,project:l,releaseMeta:o,refetchData:this.fetchData}),(0,Y.tZ)(pe.Provider,{value:{release:r,project:l,deploys:n,releaseMeta:o,refetchData:this.fetchData,hasHealthData:(0,R.sA)(null==a?void 0:a.groups,b.r2.SESSIONS)>0,releaseBounds:c},children:this.props.children})]})}):i?(0,Y.tZ)(u.Z,{}):null}}class he extends p.Z{constructor(...e){super(...e),(0,o.Z)(this,"shouldReload",!0)}getEndpoints(){const{organization:e,params:t}=this.props;return[["releaseMeta","/organizations/".concat(e.slug,"/releases/").concat(encodeURIComponent(t.release),"/meta/")]]}componentDidMount(){this.removeGlobalDateTimeFromUrl()}componentDidUpdate(e,t){const{organization:s,params:o}=this.props;this.removeGlobalDateTimeFromUrl(),e.params.release===o.release&&e.organization.slug===s.slug||super.componentDidUpdate(e,t)}removeGlobalDateTimeFromUrl(){const{router:e,location:t}=this.props,{start:s,end:o,statsPeriod:r,utc:n,...a}=t.query;(s||o||r||n)&&e.replace({...t,query:a})}renderError(...e){return Object.values(this.state.errors).find((e=>404===(null==e?void 0:e.status)))?(0,Y.tZ)(j.JH,{children:(0,Y.tZ)(d.Z,{type:"error",icon:(0,Y.tZ)(y.FC,{}),children:(0,v.t)("This release could not be found.")})}):super.renderError(...e)}isProjectMissingInUrl(){const e=this.props.location.query.project;return!e||"string"!=typeof e}renderLoading(){return(0,Y.tZ)(j.JH,{children:(0,Y.tZ)(u.Z,{})})}renderProjectsFooterMessage(){return(0,Y.BX)(ge,{children:[(0,Y.tZ)(y.aU,{size:"xs"})," ",(0,v.t)("Only projects with this release are visible.")]})}renderBody(){const{organization:e,params:t,router:s}=this.props,{releaseMeta:o}=this.state;if(!o)return null;const{projects:r}=o;return this.isProjectMissingInUrl()?(0,Y.tZ)(Z.Z,{projects:r.map((({id:e,slug:t})=>({id:String(e),slug:t}))),router:s,nextPath:{pathname:"/organizations/".concat(e.slug,"/releases/").concat(encodeURIComponent(t.release),"/")},noProjectRedirectPath:"/organizations/".concat(e.slug,"/releases/")}):(0,Y.tZ)(m.Z,{lockedMessageSubject:(0,v.t)("release"),shouldForceProject:1===r.length,forceProject:1===r.length?{...r[0],id:String(r[0].id)}:void 0,specificProjectSlugs:r.map((e=>e.slug)),disableMultipleProjectSelection:!0,showProjectSettingsLink:!0,projectsFooterMessage:this.renderProjectsFooterMessage(),showDateSelector:!1,children:(0,Y.tZ)(ue,{...this.props,releaseMeta:o})})}}const me=(0,r.Z)(j.JH,{target:"eii7qn31"})({name:"1hcx8jb",styles:"padding:0"}),ge=(0,r.Z)("div",{target:"eii7qn30"})("display:grid;align-items:center;grid-template-columns:min-content 1fr;gap:",(0,w.Z)(1),";"),Ze=(0,z.Z)((0,C.Z)(he))}}]);
//# sourceMappingURL=../sourcemaps/app_views_releases_detail_index_tsx.68917ce94e06b7160a4463f099391978.js.map