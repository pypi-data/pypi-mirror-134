"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_components_asyncComponent_tsx"],{"./app/components/asyncComponent.tsx":(e,t,s)=>{s.d(t,{Z:()=>A});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),n=s("../node_modules/@sentry/minimal/esm/index.js"),i=s("../node_modules/@sentry/types/esm/severity.js"),a=s("../node_modules/lodash/isEqual.js"),l=s.n(a),d=s("../node_modules/prop-types/index.js"),u=s.n(d),c=s("./app/api.tsx"),p=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),h=s("../node_modules/react-router/es/index.js"),m=s("../node_modules/lodash/debounce.js"),g=s.n(m),y=s("./app/components/loadingIndicator.tsx"),x=s("./app/locale.tsx"),Z=s("./app/views/settings/components/forms/controls/input.tsx"),b=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class f extends o.Component{constructor(...e){super(...e),(0,r.Z)(this,"state",{query:"",busy:!1}),(0,r.Z)(this,"immediateQuery",(async e=>{const{location:t,api:s}=this.props;this.setState({busy:!0});try{const[r,,o]=await s.requestPromise("".concat(this.props.url),{includeAllArgs:!0,method:"GET",query:{...t.query,query:e}});this.state.query===e&&this.props.onSuccess(r,o)}catch{this.props.onError()}this.setState({busy:!1})})),(0,r.Z)(this,"query",g()(this.immediateQuery,this.props.debounceWait)),(0,r.Z)(this,"handleChange",(e=>{this.query(e),this.setState({query:e})})),(0,r.Z)(this,"handleInputChange",(e=>this.handleChange(e.target.value))),(0,r.Z)(this,"handleSearch",(e=>{const{updateRoute:t,onSearchSubmit:s}=this.props;if(e.preventDefault(),t){const{router:e,location:t}=this.props;e.push({pathname:t.pathname,query:{query:this.state.query}})}"function"==typeof s&&s(this.state.query,e)}))}render(){const{placeholder:e,children:t,className:s}=this.props,{busy:r,query:o}=this.state,n=(0,b.BX)(j,{onSubmit:this.handleSearch,children:[(0,b.tZ)(Z.Z,{value:o,onChange:this.handleInputChange,className:s,placeholder:e}),r&&(0,b.tZ)(w,{size:18,hideMessage:!0,mini:!0})]});return void 0===t?n:t({defaultSearchBar:n,busy:r,value:o,handleChange:this.handleChange})}}f.displayName="AsyncComponentSearchInput",(0,r.Z)(f,"defaultProps",{placeholder:(0,x.t)("Search..."),debounceWait:200});const w=(0,p.Z)(y.Z,{target:"eup3waa1"})({name:"1jyfazj",styles:"position:absolute;right:25px;top:50%;transform:translateY(-13px)"}),j=(0,p.Z)("form",{target:"eup3waa0"})({name:"bjn8wh",styles:"position:relative"}),S=(0,h.withRouter)(f);var _=s("./app/components/loadingError.tsx"),v=s("./app/utils/analytics.tsx"),R=s("./app/utils/getRouteStringFromRoutes.tsx"),E=s("./app/components/links/externalLink.tsx"),q=s("./app/components/sentryDocumentTitle.tsx"),k=s("./app/styles/organization.tsx"),C=s("./app/utils/withOrganization.tsx"),D=s("./app/utils/withProject.tsx");const z="Permission Denied";class N extends o.Component{componentDidMount(){const{organization:e,project:t,routes:s}=this.props,r=(0,R.Z)(s);n.$e((s=>{s.setFingerprint([z,r]),s.setExtra("route",r),s.setExtra("orgFeatures",e&&e.features||[]),s.setExtra("orgAccess",e&&e.access||[]),s.setExtra("projectFeatures",t&&t.features||[]),n.Tb(new Error("".concat(z).concat(r?" : ".concat(r):"")))}))}render(){return(0,b.tZ)(q.Z,{title:(0,x.t)("Permission Denied"),children:(0,b.tZ)(k.JH,{children:(0,b.tZ)(_.Z,{message:(0,x._N)("Your role does not have the necessary permissions to access this\n               resource, please read more about [link:organizational roles]",{link:(0,b.tZ)(E.Z,{href:"https://docs.sentry.io/product/accounts/membership/"})})})})})}}N.displayName="PermissionDenied";const T=(0,h.withRouter)((0,C.Z)((0,D.Z)(N)));var P=s("./app/views/routeError.tsx");function F(e,t){return(...s)=>{try{return t(...s)}catch(t){return console.error(t),setTimeout((()=>{throw t})),e.setState({error:t}),null}}}class L extends o.Component{constructor(e,t){super(e,t),(0,r.Z)(this,"reloadOnVisible",!1),(0,r.Z)(this,"shouldReloadOnVisible",!1),(0,r.Z)(this,"shouldReload",!1),(0,r.Z)(this,"shouldRenderBadRequests",!1),(0,r.Z)(this,"disableErrorReport",!0),(0,r.Z)(this,"api",new c.KU),(0,r.Z)(this,"_measurement",void 0),(0,r.Z)(this,"markShouldMeasure",(({remainingRequests:e,error:t}={})=>{this._measurement.hasMeasured||(this._measurement.finished=0===e,this._measurement.error=t||this._measurement.error)})),(0,r.Z)(this,"remountComponent",(()=>{this.shouldReload?this.reloadData():this.setState(this.getDefaultState(),this.fetchData)})),(0,r.Z)(this,"visibilityReloader",(()=>this.shouldReloadOnVisible&&!this.state.loading&&!document.hidden&&this.reloadData())),(0,r.Z)(this,"fetchData",(e=>{const t=this.getEndpoints();t.length?(this.api.clear(),this.setState({loading:!0,error:!1,remainingRequests:t.length,...e}),t.forEach((([e,t,s,r])=>{r=r||{};const o=this.props.location&&this.props.location.query||{};let n=s&&s.query||{};!r.paginate&&!o.cursor||r.disableEntireQuery||(n={...o,...n}),this.api.request(t,{method:"GET",...s,query:n,success:(t,s,r)=>{this.handleRequestSuccess({stateKey:e,data:t,resp:r},!0)},error:o=>{r.allowError&&r.allowError(o)&&(o=null),this.handleError(o,[e,t,s,r])}})}))):this.setState({loading:!1,error:!1})})),this.fetchData=F(this,this.fetchData.bind(this)),this.render=F(this,this.render.bind(this)),this.state=this.getDefaultState(),this._measurement={hasMeasured:!1},e.routes&&e.routes&&v.oF.mark({name:"async-component-".concat((0,R.Z)(e.routes))})}UNSAFE_componentWillMount(){this.api=new c.KU,this.fetchData(),this.reloadOnVisible&&document.addEventListener("visibilitychange",this.visibilityReloader)}componentDidUpdate(e,t){const s=!!t.router,r=void 0!==e.location,o=r?this.props.location:s?this.context.router.location:null,n=r?e.location:s?t.router.location:null;if(o&&n){if(!this._measurement.hasMeasured&&this._measurement.finished&&this.props.routes){const e=(0,R.Z)(this.props.routes);v.oF.measure({name:"app.component.async-component",start:"async-component-".concat(e),data:{route:e,error:this._measurement.error}}),this._measurement.hasMeasured=!0}l()(this.props.params,e.params)&&o.search===n.search&&o.state===n.state||this.remountComponent()}}componentWillUnmount(){this.api.clear(),document.removeEventListener("visibilitychange",this.visibilityReloader)}getDefaultState(){const e=this.getEndpoints(),t={loading:!0,reloading:!1,error:!1,errors:{}};return e.forEach((([e,s])=>{t[e]=null})),t}reloadData(){this.fetchData({reloading:!0})}onRequestSuccess(e){}onRequestError(e,t){}onLoadAllEndpointsSuccess(){}handleRequestSuccess({stateKey:e,data:t,resp:s},r){this.setState((o=>{const n={[e]:t,["".concat(e,"PageLinks")]:null==s?void 0:s.getResponseHeader("Link")};return r&&(n.remainingRequests=o.remainingRequests-1,n.loading=o.remainingRequests>1,n.reloading=o.reloading&&n.loading,this.markShouldMeasure({remainingRequests:n.remainingRequests})),n}),(()=>{0!==this.state.remainingRequests||this.state.error||this.onLoadAllEndpointsSuccess()})),this.onRequestSuccess({stateKey:e,data:t,resp:s})}handleError(e,t){const[s]=t;e&&e.responseText&&n.n_({message:e.responseText,category:"xhr",level:i.z.Error}),this.setState((t=>{const r=t.remainingRequests>1,o={[s]:null,errors:{...t.errors,[s]:e},error:t.error||!!e,remainingRequests:t.remainingRequests-1,loading:r,reloading:t.reloading&&r};return this.markShouldMeasure({remainingRequests:o.remainingRequests,error:!0}),o})),this.onRequestError(e,t)}getEndpoints(){return[]}renderSearchInput({stateKey:e,url:t,...s}){const[r]=this.getEndpoints()||[null],o=e||r&&r[0],n=t||r&&r[1];return(0,b.tZ)(S,{url:n,...s,api:this.api,onSuccess:(e,t)=>{this.handleRequestSuccess({stateKey:o,data:e,resp:t})},onError:()=>{this.renderError(new Error("Error with AsyncComponentSearchInput"))}})}renderLoading(){return(0,b.tZ)(y.Z,{})}renderError(e,t=!1){const{errors:s}=this.state,r=Object.values(s).find((e=>401===(null==e?void 0:e.status))),o=Object.values(s).find((e=>403===(null==e?void 0:e.status))),n=!!Object.values(s).find((e=>0!==(null==e?void 0:e.status)))||t;if(r)return(0,b.tZ)(_.Z,{message:(0,x.t)("You are not authorized to access this resource.")});if(o)return(0,b.tZ)(T,{});if(this.shouldRenderBadRequests){const e=Object.values(s).filter((e=>{var t;return 400===(null==e?void 0:e.status)&&(null==e||null===(t=e.responseJSON)||void 0===t?void 0:t.detail)})).map((e=>e.responseJSON.detail));if(e.length)return(0,b.tZ)(_.Z,{message:[...new Set(e)].join("\n")})}return(0,b.tZ)(P.Z,{error:e,disableLogSentry:!n,disableReport:this.disableErrorReport})}get shouldRenderLoading(){return this.state.loading&&(!this.shouldReload||!this.state.reloading)}renderComponent(){return this.shouldRenderLoading?this.renderLoading():this.state.error?this.renderError(new Error("Unable to load all required endpoints")):this.renderBody()}renderBody(){throw new Error("Not implemented")}render(){return this.renderComponent()}}L.displayName="AsyncComponent",(0,r.Z)(L,"contextTypes",{router:u().object});const A=L},"./app/components/loadingError.tsx":(e,t,s)=>{s.d(t,{Z:()=>m});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=s("../node_modules/react/index.js"),i=s("./app/components/alert.tsx"),a=s("./app/components/button.tsx"),l=s("./app/components/panels/index.tsx"),d=s("./app/icons/index.tsx"),u=s("./app/locale.tsx"),c=s("./app/styles/space.tsx"),p=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class h extends n.Component{shouldComponentUpdate(){return!1}render(){const{message:e,onRetry:t}=this.props;return(0,p.tZ)(g,{type:"error",children:(0,p.BX)(y,{children:[(0,p.tZ)(d.aU,{size:"lg"}),(0,p.tZ)("div",{"data-test-id":"loading-error-message",children:e}),t&&(0,p.tZ)(a.ZP,{onClick:t,type:"button",priority:"default",size:"small",children:(0,u.t)("Retry")})]})})}}h.displayName="LoadingError",(0,r.Z)(h,"defaultProps",{message:(0,u.t)("There was an error loading data.")});const m=h,g=(0,o.Z)(i.Z,{target:"e1aoltpz1"})(l.s_," &{border-radius:0;border-width:1px 0;}"),y=(0,o.Z)("div",{target:"e1aoltpz0"})("display:grid;gap:",(0,c.Z)(1),";grid-template-columns:min-content auto max-content;align-items:center;")},"./app/components/sentryDocumentTitle.tsx":(e,t,s)=>{s.d(t,{Z:()=>a}),s("../node_modules/react/index.js");var r=s("../node_modules/react-document-title/index.js"),o=s.n(r),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i({title:e="",orgSlug:t,projectSlug:s,noSuffix:r,children:i}){const a=t&&s?"".concat(e," - ").concat(t," - ").concat(s):t?"".concat(e," - ").concat(t):s?"".concat(e," - ").concat(s):e,l=r?a:""!==a?"".concat(a," - Sentry"):"Sentry";return(0,n.tZ)(o(),{title:l,children:i})}i.displayName="SentryDocumentTitle";const a=i},"./app/styles/organization.tsx":(e,t,s)=>{s.d(t,{JH:()=>n,mr:()=>i,Gh:()=>a});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("./app/styles/space.tsx");const n=(0,r.Z)("div",{target:"e12cn1y22"})("display:flex;flex-direction:column;flex:1;padding:",(0,o.Z)(2)," ",(0,o.Z)(4)," ",(0,o.Z)(3),";margin-bottom:-20px;@media (max-width: ",(e=>e.theme.breakpoints[0]),"){margin-bottom:0;}"),i=(0,r.Z)("div",{target:"e12cn1y21"})("display:flex;justify-content:space-between;align-items:center;margin-bottom:",(0,o.Z)(2),";min-height:32px;"),a=(0,r.Z)("h4",{target:"e12cn1y20"})("flex:1;font-size:",(e=>e.theme.headerFontSize),";line-height:",(e=>e.theme.headerFontSize),";font-weight:normal;color:",(e=>e.theme.textColor),";margin:0;")},"./app/utils/getRouteStringFromRoutes.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var r=s("../node_modules/lodash/findLastIndex.js"),o=s.n(r);function n(e){if(!Array.isArray(e))return"";const t=e.filter((e=>!!e.path)),s=o()(t,(({path:e})=>e.startsWith("/")));return t.slice(s).filter((({path:e})=>!!e)).map((({path:e})=>e)).join("")}},"./app/utils/withProject.tsx":(e,t,s)=>{s.d(t,{Z:()=>l});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/react/index.js"),n=s("./app/sentryTypes.tsx"),i=s("./app/utils/getDisplayName.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=e=>{var t,s;return s=t=class extends o.Component{render(){const{project:t,...s}=this.props;return(0,a.tZ)(e,{project:null!=t?t:this.context.project,...s})}},(0,r.Z)(t,"displayName","withProject(".concat((0,i.Z)(e),")")),(0,r.Z)(t,"contextTypes",{project:n.Z.Project}),s}},"./app/views/routeError.tsx":(e,t,s)=>{s.d(t,{Z:()=>w});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),i=s("../node_modules/react-router/es/index.js"),a=s("../node_modules/@sentry/minimal/esm/index.js"),l=s("../node_modules/@sentry/browser/esm/sdk.js"),d=s("./app/components/alert.tsx"),u=s("./app/components/list/index.tsx"),c=s("./app/components/list/listItem.tsx"),p=s("./app/icons/index.tsx"),h=s("./app/locale.tsx"),m=s("./app/styles/space.tsx"),g=s("./app/utils/getRouteStringFromRoutes.tsx"),y=s("./app/utils/withOrganization.tsx"),x=s("./app/utils/withProject.tsx"),Z=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class b extends n.Component{constructor(...e){super(...e),(0,r.Z)(this,"_timeout",void 0)}UNSAFE_componentWillMount(){const{error:e}=this.props,{disableLogSentry:t,disableReport:s,organization:r,project:o,routes:n}=this.props;if(t)return;if(!e)return;const i=(0,g.Z)(n),d=e=>(e.setExtra("route",i),e.setExtra("orgFeatures",r&&r.features||[]),e.setExtra("orgAccess",r&&r.access||[]),e.setExtra("projectFeatures",o&&o.features||[]),e);if(i)try{e.message="".concat(e.message,": ").concat(i)}catch(e){a.$e((t=>{d(t),a.Tb(e)}))}this._timeout=window.setTimeout((()=>{a.$e((t=>{d(t),a.Tb(e)})),s||l.jp()}))}componentWillUnmount(){var e;this._timeout&&window.clearTimeout(this._timeout),null===(e=document.querySelector(".sentry-error-embed-wrapper"))||void 0===e||e.remove()}render(){return(0,Z.BX)(d.Z,{icon:(0,Z.tZ)(p.FC,{size:"md"}),type:"error",children:[(0,Z.tZ)(f,{children:(0,Z.tZ)("span",{children:(0,h.t)("Oops! Something went wrong")})}),(0,Z.tZ)("p",{children:(0,h.t)("\n          It looks like you've hit an issue in our client application. Don't worry though!\n          We use Sentry to monitor Sentry and it's likely we're already looking into this!\n          ")}),(0,Z.tZ)("p",{children:(0,h.t)("If you're daring, you may want to try the following:")}),(0,Z.BX)(u.Z,{symbol:"bullet",children:[window&&window.adblockSuspected&&(0,Z.tZ)(c.Z,{children:(0,h.t)("We detected something AdBlock-like. Try disabling it, as it's known to cause issues.")}),(0,Z.tZ)(c.Z,{children:(0,h._N)("Give it a few seconds and [link:reload the page].",{link:(0,Z.tZ)("a",{onClick:()=>{window.location.href=window.location.href}})})}),(0,Z.tZ)(c.Z,{children:(0,h._N)("If all else fails, [link:contact us] with more details.",{link:(0,Z.tZ)("a",{href:"https://github.com/getsentry/sentry/issues/new/choose"})})})]})]})}}b.displayName="RouteError";const f=(0,o.Z)("h3",{target:"e1isf1bc0"})("display:flex;align-items:center;font-size:",(e=>e.theme.headerFontSize),";font-weight:normal;margin-bottom:",(0,m.Z)(1.5),";"),w=(0,i.withRouter)((0,y.Z)((0,x.Z)(b)))}}]);
//# sourceMappingURL=../sourcemaps/app_components_asyncComponent_tsx.2c18eb7708ca85401f6dff374687f5d6.js.map