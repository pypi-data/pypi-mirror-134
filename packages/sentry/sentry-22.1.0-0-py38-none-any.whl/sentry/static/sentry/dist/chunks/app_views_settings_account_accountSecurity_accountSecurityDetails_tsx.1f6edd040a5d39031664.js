"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_account_accountSecurity_accountSecurityDetails_tsx"],{"./app/views/asyncView.tsx":(e,t,n)=>{n.d(t,{Z:()=>a}),n("../node_modules/react/index.js");var s=n("./app/components/asyncComponent.tsx"),o=n("./app/components/sentryDocumentTitle.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class a extends s.Z{getTitle(){return""}render(){return(0,i.tZ)(o.Z,{title:this.getTitle(),children:this.renderComponent()})}}a.displayName="AsyncView"},"./app/views/settings/account/accountSecurity/accountSecurityDetails.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>V});var s=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/core-js/modules/es.symbol.description.js"),n("../node_modules/react/index.js")),a=n("./app/actionCreators/indicator.tsx"),r=n("./app/components/button.tsx"),c=n("./app/components/circleIndicator.tsx"),l=n("./app/components/dateTime.tsx"),d=n("./app/components/tooltip.tsx"),m=n("./app/locale.tsx"),p=n("./app/styles/space.tsx"),u=n("./app/views/asyncView.tsx"),h=n("./app/components/clipboard.tsx"),Z=n("./app/components/confirm.tsx"),g=n("./app/components/panels/index.tsx"),v=n("./app/icons/index.tsx"),y=n("./app/views/settings/components/emptyMessage.tsx"),f=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const x=({className:e,isEnrolled:t,codes:n,onRegenerateBackupCodes:s})=>{if(!t||!n)return null;const o=n.join(" \n");return(0,f.BX)(b,{className:e,children:[(0,f.BX)(g.V9,{hasButtons:!0,children:[(0,m.t)("Unused Codes"),(0,f.BX)(j,{children:[(0,f.tZ)(h.Z,{hideUnsupported:!0,value:o,children:(0,f.tZ)(r.ZP,{size:"small",label:(0,m.t)("copy"),children:(0,f.tZ)(v.vU,{})})}),(0,f.tZ)(r.ZP,{size:"small",onClick:()=>{const e=window.frames.printable;e.document.write(n.join("<br>")),e.print(),e.document.close()},label:(0,m.t)("print"),children:(0,f.tZ)(v.nS,{})}),(0,f.tZ)(r.ZP,{size:"small",download:"sentry-recovery-codes.txt",href:"data:text/plain;charset=utf-8,".concat(o),label:(0,m.t)("download"),children:(0,f.tZ)(v.Dj,{})}),(0,f.tZ)(Z.Z,{onConfirm:s,message:(0,m.t)("Are you sure you want to regenerate recovery codes? Your old codes will no longer work."),children:(0,f.tZ)(r.ZP,{priority:"danger",size:"small",children:(0,m.t)("Regenerate Codes")})})]})]}),(0,f.BX)(g.N,{children:[(0,f.tZ)(g.aU,{type:"warning",children:(0,m.t)("Make sure to save a copy of your recovery codes and store them in a safe place.")}),(0,f.tZ)("div",{children:!!n.length&&n.map((e=>(0,f.tZ)(B,{children:e},e)))}),!n.length&&(0,f.tZ)(y.Z,{children:(0,m.t)("You have no more recovery codes to use")})]}),(0,f.tZ)("iframe",{name:"printable",style:{display:"none"}})]})};x.displayName="RecoveryCodes";const w=x,b=(0,o.Z)(g.s_,{target:"e1nntg9l2"})("margin-top:",(0,p.Z)(4),";"),j=(0,o.Z)("div",{target:"e1nntg9l1"})("display:grid;grid-auto-flow:column;gap:",(0,p.Z)(1),";"),B=(0,o.Z)(g.Lv,{target:"e1nntg9l0"})("font-family:",(e=>e.theme.text.familyMono),";padding:",(0,p.Z)(2),";");var k=n("./app/views/settings/account/accountSecurity/components/removeConfirm.tsx"),C=n("./app/views/settings/account/accountSecurity/components/confirmHeader.tsx"),D=n("./app/views/settings/components/forms/controls/input.tsx"),R=n("./app/views/settings/components/text/textBlock.tsx");const S=e=>{const{className:t,isEnrolled:n,devices:s,id:o,onRemoveU2fDevice:i,onRenameU2fDevice:a}=e;if("u2f"!==o||!n)return null;const c=null==s?void 0:s.length,l=1===c;return(0,f.BX)(g.s_,{className:t,children:[(0,f.tZ)(g.V9,{children:(0,m.t)("Device name")}),(0,f.BX)(g.N,{children:[!c&&(0,f.tZ)(y.Z,{children:(0,m.t)("You have not added any U2F devices")}),c&&(null==s?void 0:s.map(((e,t)=>(0,f.tZ)(_,{device:e,isLastDevice:l,onRenameU2fDevice:a,onRemoveU2fDevice:i},t)))),(0,f.tZ)(F,{children:(0,f.tZ)(r.ZP,{type:"button",to:"/settings/account/security/mfa/u2f/enroll/",size:"small",children:(0,m.t)("Add Another Device")})})]})]})};S.displayName="U2fEnrolledDetails";const _=e=>{const{device:t,isLastDevice:n,onRenameU2fDevice:s,onRemoveU2fDevice:o}=e,[a,c]=(0,i.useState)(t.name),[l,p]=(0,i.useState)(!1);return l?(0,f.BX)(X,{children:[(0,f.BX)(E,{children:[(0,f.tZ)(U,{type:"text",value:a,onChange:e=>{c(e.target.value)}}),(0,f.tZ)(P,{date:t.timestamp})]}),(0,f.tZ)(N,{children:(0,f.tZ)(r.ZP,{priority:"primary",size:"small",onClick:()=>{s(t,a),p(!1)},children:"Rename Device"})}),(0,f.tZ)(N,{children:(0,f.tZ)(r.ZP,{size:"small",title:"Cancel rename",onClick:()=>{c(t.name),p(!1)},children:(0,f.tZ)(v.bM,{size:"xs"})})})]},t.name):(0,f.BX)(X,{children:[(0,f.BX)(E,{children:[(0,f.tZ)(z,{children:t.name}),(0,f.tZ)(P,{date:t.timestamp})]}),(0,f.tZ)(N,{children:(0,f.tZ)(r.ZP,{size:"small",onClick:()=>p(!0),children:(0,m.t)("Rename Device")})}),(0,f.tZ)(N,{children:(0,f.tZ)(Z.Z,{onConfirm:()=>o(t),disabled:n,message:(0,f.BX)(i.Fragment,{children:[(0,f.tZ)(C.Z,{children:(0,m.t)("Do you want to remove U2F device?")}),(0,f.tZ)(R.Z,{children:(0,m.t)('Are you sure you want to remove the U2F device "'.concat(t.name,'"?'))})]}),children:(0,f.tZ)(r.ZP,{size:"small",priority:"danger",children:(0,f.tZ)(d.Z,{disabled:!n,title:(0,m.t)("Can not remove last U2F device"),children:(0,f.tZ)(v.Fz,{size:"xs"})})})})})]},t.name)};_.displayName="Device";const U=(0,o.Z)(D.Z,{target:"eisv0kh7"})("width:50%;margin-right:",(0,p.Z)(2),";"),X=(0,o.Z)(g.Lv,{target:"eisv0kh6"})({name:"1hcx8jb",styles:"padding:0"}),E=(0,o.Z)("div",{target:"eisv0kh5"})("display:flex;align-items:center;justify-content:space-between;flex:1 1;height:72px;padding:",(0,p.Z)(2),";padding-right:0;"),P=(0,o.Z)(l.Z,{target:"eisv0kh4"})("font-size:",(e=>e.theme.fontSizeRelativeSmall),";opacity:0.6;"),z=(0,o.Z)("div",{target:"eisv0kh3"})({name:"82a6rk",styles:"flex:1"}),N=(0,o.Z)("div",{target:"eisv0kh2"})("margin:",(0,p.Z)(2),";"),F=(0,o.Z)(g.Lv,{target:"eisv0kh1"})("justify-content:flex-end;padding:",(0,p.Z)(2),";"),I=(0,o.Z)(S,{target:"eisv0kh0"})("margin-top:",(0,p.Z)(4),";");var q=n("./app/views/settings/components/settingsPageHeader.tsx");const A="/users/me/authenticators/";function T({label:e,date:t}){return(0,f.BX)(i.Fragment,{children:[(0,f.tZ)(K,{children:e}),(0,f.tZ)("div",{children:t?(0,f.tZ)(l.Z,{date:t}):(0,m.t)("never")})]})}T.displayName="AuthenticatorDate";class L extends u.Z{constructor(...e){super(...e),(0,s.Z)(this,"handleRemove",(async e=>{const{authenticator:t}=this.state;if(!t||!t.authId)return;const n=e?"".concat(e.key_handle,"/"):"",s=e?e.name:(0,m.t)("Authenticator");this.setState({loading:!0});try{await this.api.requestPromise("".concat(A).concat(t.authId,"/").concat(n),{method:"DELETE"}),this.props.router.push("/settings/account/security"),(0,a.S9)((0,m.t)("%s has been removed",s))}catch{this.setState({loading:!1}),(0,a.Iw)((0,m.t)("Error removing %s",s))}})),(0,s.Z)(this,"handleRename",(async(e,t)=>{const{authenticator:n}=this.state;if(null==n||!n.authId)return;const s=e?"".concat(e.key_handle,"/"):"";this.setState({loading:!0});const o={name:t};try{await this.api.requestPromise("".concat(A).concat(n.authId,"/").concat(s),{method:"PUT",data:o}),this.props.router.push("/settings/account/security/mfa/".concat(n.authId)),(0,a.S9)((0,m.t)("Device was renamed"))}catch{this.setState({loading:!1}),(0,a.Iw)((0,m.t)("Error renaming the device"))}}))}getTitle(){return(0,m.t)("Security")}getEndpoints(){const{params:e}=this.props,{authId:t}=e;return[["authenticator","".concat(A).concat(t,"/")]]}renderBody(){const{authenticator:e}=this.state;if(!e)return null;const{deleteDisabled:t,onRegenerateBackupCodes:n}=this.props;return(0,f.BX)(i.Fragment,{children:[(0,f.tZ)(q.Z,{title:(0,f.BX)(i.Fragment,{children:[(0,f.tZ)("span",{children:e.name}),(0,f.tZ)(H,{enabled:e.isEnrolled})]}),action:(0,f.BX)(M,{children:[e.isEnrolled&&e.allowRotationInPlace&&(0,f.tZ)(r.ZP,{to:"/settings/account/security/mfa/".concat(e.id,"/enroll/"),children:(0,m.t)("Rotate Secret Key")}),e.isEnrolled&&e.removeButton&&(0,f.tZ)(d.Z,{title:(0,m.t)("Two-factor authentication is required for at least one organization you're a member of."),disabled:!t,children:(0,f.tZ)(k.Z,{onConfirm:this.handleRemove,disabled:t,children:(0,f.tZ)(r.ZP,{priority:"danger",children:e.removeButton})})})]})}),(0,f.tZ)(R.Z,{children:e.description}),(0,f.BX)(Y,{children:[(0,f.tZ)(T,{label:(0,m.t)("Created at"),date:e.createdAt}),(0,f.tZ)(T,{label:(0,m.t)("Last used"),date:e.lastUsedAt})]}),(0,f.tZ)(I,{isEnrolled:e.isEnrolled,id:e.id,devices:e.devices,onRemoveU2fDevice:this.handleRemove,onRenameU2fDevice:this.handleRename}),e.isEnrolled&&e.phone&&(0,f.BX)(G,{children:[(0,m.t)("Confirmation codes are sent to the following phone number"),":",(0,f.tZ)(J,{children:e.phone})]}),(0,f.tZ)(w,{onRegenerateBackupCodes:n,isEnrolled:e.isEnrolled,codes:e.codes})]})}}const V=L,H=(0,o.Z)(c.Z,{target:"e19qrwsm5"})("margin-left:",(0,p.Z)(1),";"),M=(0,o.Z)("div",{target:"e19qrwsm4"})("display:flex;justify-content:center;align-items:center;>*{margin-left:",(0,p.Z)(1),";}"),Y=(0,o.Z)("div",{target:"e19qrwsm3"})("display:grid;gap:",(0,p.Z)(2),";grid-template-columns:max-content auto;"),K=(0,o.Z)("span",{target:"e19qrwsm2"})({name:"1efi8gv",styles:"font-weight:bold"}),G=(0,o.Z)("div",{target:"e19qrwsm1"})("margin-top:",(0,p.Z)(4),";"),J=(0,o.Z)("span",{target:"e19qrwsm0"})("font-weight:bold;margin-left:",(0,p.Z)(1),";")},"./app/views/settings/account/accountSecurity/components/confirmHeader.tsx":(e,t,n)=>{n.d(t,{Z:()=>s});const s=(0,n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"e1er9gj10"})({name:"73b5fw",styles:"font-size:1.2em;margin-bottom:10px"})},"./app/views/settings/account/accountSecurity/components/removeConfirm.tsx":(e,t,n)=>{n.d(t,{Z:()=>m});var s=n("../node_modules/react/index.js"),o=n("./app/components/confirm.tsx"),i=n("./app/locale.tsx"),a=n("./app/views/settings/account/accountSecurity/components/confirmHeader.tsx"),r=n("./app/views/settings/components/text/textBlock.tsx"),c=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=(0,c.BX)(s.Fragment,{children:[(0,c.tZ)(a.Z,{children:(0,i.t)("Do you want to remove this method?")}),(0,c.tZ)(r.Z,{children:(0,i.t)("Removing the last authentication method will disable two-factor authentication completely.")})]}),d=e=>(0,c.tZ)(o.Z,{...e,message:l});d.displayName="RemoveConfirm";const m=d}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_account_accountSecurity_accountSecurityDetails_tsx.0a9cc4f8520a62bf11c2a3ca9f527ecf.js.map