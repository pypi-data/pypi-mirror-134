"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_alerts_list_row_tsx"],{"./app/views/alerts/details/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{alertDetailsLink:()=>u,default:()=>x}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.string.replace.js");var a=s("../node_modules/react/index.js"),r=s("../node_modules/react-router/es/index.js"),n=s("./app/components/loadingError.tsx"),i=s("./app/components/loadingIndicator.tsx"),o=s("./app/utils/analytics.tsx"),l=s("./app/utils/useApi.tsx"),d=s("./app/views/alerts/types.tsx"),p=s("./app/views/alerts/utils/index.tsx"),c=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const u=(e,t)=>"/organizations/".concat(e.slug,"/alerts/rules/details/").concat(t.alertRule.status===d.Gb.SNAPSHOT&&t.alertRule.originalAlertRuleId?t.alertRule.originalAlertRuleId:t.alertRule.id,"/");function m({organization:e,params:t}){const s=(0,l.Z)(),[d,m]=(0,a.useState)(!1),x=async()=>{m(!1);try{const a=await(0,p.yN)(s,t.orgId,t.alertId);r.browserHistory.replace({pathname:u(e,a),query:{alert:a.identifier}})}catch(e){m(!0)}};return(0,a.useEffect)((()=>{x(),(0,o.ec)({eventKey:"alert_details.viewed",eventName:"Alert Details: Viewed",organization_id:parseInt(e.id,10),alert_id:parseInt(t.alertId,10)})}),[]),d?(0,c.tZ)(n.Z,{onRetry:x}):(0,c.tZ)(i.Z,{})}m.displayName="IncidentDetails";const x=m},"./app/views/alerts/list/row.tsx":(e,t,s)=>{s.d(t,{K:()=>D,Z:()=>C});var a=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),i=s("../node_modules/lodash/memoize.js"),o=s.n(i),l=s("../node_modules/moment/moment.js"),d=s.n(l),p=s("./app/components/avatar/actorAvatar.tsx"),c=s("./app/components/duration.tsx"),u=s("./app/components/errorBoundary.tsx"),m=s("./app/components/idBadge/index.tsx"),x=s("./app/components/links/link.tsx"),h=s("./app/components/tag.tsx"),v=s("./app/components/timeSince.tsx"),g=s("./app/locale.tsx"),Z=s("./app/stores/teamStore.tsx"),w=s("./app/styles/overflowEllipsis.tsx"),_=s("./app/styles/space.tsx"),y=s("./app/utils/dates.tsx"),j=s("./app/utils/getDynamicText.tsx"),b=s("./app/views/alerts/details/index.tsx"),S=s("./app/views/alerts/rules/details/constants.tsx"),f=s("./app/views/alerts/types.tsx"),E=s("./app/views/alerts/utils/index.tsx"),A=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const D=e=>{const{timeWindow:t}=e.alertRule,s=60*t*1e3,a=s*S.U2,r=s*S.UC,n=d().utc(),i=d().utc(e.dateStarted),o=e.dateClosed?d().utc(e.dateClosed):d()(n),l=Math.max(o.diff(i),3*s),p=Math.min(r,Math.max(a,l)),c=d().duration(p/2);return{start:(0,y.v5)(i.subtract(c)),end:(0,y.v5)(d().min(o.add(c),n))}};class R extends n.Component{constructor(...e){super(...e),(0,a.Z)(this,"getProject",o()(((e,t)=>t.find((t=>t.slug===e)))))}get metricPreset(){const{incident:e}=this.props;return e?(0,E.Un)(e):void 0}render(){var e;const{incident:t,projectsLoaded:s,projects:a,organization:r}=this.props,i=t.projects[0],o=d()(t.dateStarted),l=d().duration(d()(t.dateClosed||new Date).diff(o)).as("seconds"),p={pathname:(0,b.alertDetailsLink)(r,t),query:{alert:t.identifier}},m=null===(e=t.alertRule.owner)||void 0===e?void 0:e.split(":")[1];let w="";var _,y;m&&(w=null!==(_=null===(y=Z.Z.getById(m))||void 0===y?void 0:y.name)&&void 0!==_?_:"");const S=m?{type:"team",id:m,name:w}:null;return(0,A.BX)(u.Z,{children:[(0,A.tZ)(H,{"data-test-id":"alert-title",children:(0,A.tZ)(x.Z,{to:p,children:t.title})}),(0,A.tZ)(N,{children:(0,j.Z)({value:(0,A.tZ)(v.Z,{date:t.dateStarted,extraShort:!0}),fixed:"1w ago"})}),(0,A.tZ)(N,{children:t.status===f.vt.CLOSED?(0,A.tZ)(c.Z,{seconds:(0,j.Z)({value:l,fixed:1200})}):(0,A.tZ)(h.Z,{type:"warning",children:(0,g.t)("Still Active")})}),(0,A.tZ)(X,{avatarSize:18,project:s?this.getProject(i,a):{slug:i}}),(0,A.BX)(N,{children:["#",t.id]}),(0,A.tZ)(I,{children:S?(0,A.BX)(n.Fragment,{children:[(0,A.tZ)(k,{actor:S,size:24,hasTooltip:!1})," ",(0,A.tZ)(O,{children:S.name})]}):"-"})]})}}R.displayName="AlertListRow";const H=(0,r.Z)("div",{target:"ehehgaq5"})(w.Z," min-width:130px;"),N=(0,r.Z)("div",{target:"ehehgaq4"})({name:"1s45tu0",styles:"white-space:nowrap;font-variant-numeric:tabular-nums"}),X=(0,r.Z)(m.Z,{target:"ehehgaq3"})({name:"ozd7xs",styles:"flex-shrink:0"}),I=(0,r.Z)("div",{target:"ehehgaq2"})(w.Z," display:flex;align-items:center;"),O=(0,r.Z)("span",{target:"ehehgaq1"})(w.Z,";"),k=(0,r.Z)(p.Z,{target:"ehehgaq0"})("margin-right:",(0,_.Z)(1),";"),C=R},"./app/views/alerts/rules/details/constants.tsx":(e,t,s)=>{s.d(t,{v3:()=>n,e2:()=>i,UC:()=>o,U2:()=>l});var a=s("./app/locale.tsx"),r=s("./app/views/alerts/incidentRules/types.tsx");const n=[{label:(0,a.t)("Last 6 hours"),value:r.XH.SIX_HOURS},{label:(0,a.t)("Last 24 hours"),value:r.XH.ONE_DAY},{label:(0,a.t)("Last 3 days"),value:r.XH.THREE_DAYS},{label:(0,a.t)("Last 7 days"),value:r.XH.SEVEN_DAYS}],i={[r.XH.SIX_HOURS]:6*r.Tb.ONE_HOUR*60*1e3,[r.XH.ONE_DAY]:60*r.Tb.ONE_DAY*1e3,[r.XH.THREE_DAYS]:3*r.Tb.ONE_DAY*60*1e3,[r.XH.SEVEN_DAYS]:7*r.Tb.ONE_DAY*60*1e3},o=1e4,l=150}}]);
//# sourceMappingURL=../sourcemaps/app_views_alerts_list_row_tsx.27b5d01571edcc3cb732dfdae37925f7.js.map