"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_utils_sessions_tsx"],{"./app/utils/sessions.tsx":(e,t,r)=>{r.d(t,{VH:()=>f,sA:()=>S,SU:()=>A,Pn:()=>R,$K:()=>v,wt:()=>y,BN:()=>w,FS:()=>g,Y5:()=>H,mo:()=>C,hD:()=>N,iy:()=>D,Lv:()=>O,Xz:()=>x,U5:()=>T,Cd:()=>b});var s=r("../node_modules/lodash/compact.js"),n=r.n(s),o=r("../node_modules/lodash/mean.js"),a=r.n(o),i=r("../node_modules/moment/moment.js"),l=r.n(i),c=r("./app/components/charts/utils.tsx"),u=r("./app/icons/index.tsx"),d=r("./app/types/index.tsx"),h=r("./app/utils.tsx"),p=r("./app/views/releases/utils/index.tsx"),m=r("./app/views/releases/utils/sessionTerm.tsx"),E=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const f=10;function S(e=[],t){return e.reduce(((e,r)=>e+r.totals[t]),0)}function A(e=[],t,r){return e.reduce(((e,s)=>e+s.series[t][r]),0)}function R(e=[],t){const r=w(e,t,d.$y.CRASHED);return(0,h.ri)(r)?(0,p.Mf)(100-r):null}function v(e=[],t){const r=S(e,t),s=e.filter((e=>!!e.totals[t])).length;return(0,h.ri)(r)&&null!==s&&0!==r?r/s:null}function y(e=[],t,r=[]){const s=Array(r.length).fill(0);return e.map((e=>e.series[t])).forEach((e=>{e.forEach(((e,t)=>s[t]+=e))})),s}function w(e=[],t,r){const s=S(e,t),n=S(e.filter((({by:e})=>e["session.status"]===r)),t);return(0,h.ri)(s)&&0!==s?(0,h.aQ)(null!=n?n:0,null!=s?s:0):null}function g(e=[],t=[],r){return n()(t.map(((t,s)=>{var n,o;const a=e.reduce(((e,t)=>e+t.series[r][s]),0),i=null!==(n=null===(o=e.find((e=>e.by["session.status"]===d.$y.CRASHED)))||void 0===o?void 0:o.series[r][s])&&void 0!==n?n:0,l=(0,h.aQ)(i,a);return 0===a?null:{name:t,value:(0,p.Mf)(100-l)}})))}function H(e=[],t=[],r,s){return n()(t.map(((t,n)=>{var o,a;const i=e.reduce(((e,t)=>e+t.series[r][n]),0),l=null!==(o=null===(a=e.find((e=>e.by["session.status"]===s)))||void 0===a?void 0:a.series[r][n])&&void 0!==o?o:0,c=(0,h.aQ)(l,i);return 0===i?null:{name:t,value:(0,p.r)(c)}})))}function C(e=[],t=[],r,s){return n()(t.map(((t,n)=>{const o=a()(e.map((e=>e.series[r][n])).filter((e=>!!e)));return o?{name:t,value:"function"==typeof s?s(o):o}:null})))}function N(e=[],t=[],r=[],s){return r.map(((r,n)=>{const o=e.reduce(((e,t)=>{var r,o;return e+(null!==(r=null===(o=t.series[s])||void 0===o?void 0:o[n])&&void 0!==r?r:0)}),0),a=t.reduce(((e,t)=>{var r,o;return e+(null!==(r=null===(o=t.series[s])||void 0===o?void 0:o[n])&&void 0!==r?r:0)}),0),i=(0,h.aQ)(o,a);return{name:r,value:Math.round(i)}}))}function D(e,t,r=[]){return r.map(((r,s)=>{var n;return{name:r,value:null!==(n=null==t?void 0:t.series[e][s])&&void 0!==n?n:0}}))}function O(e){const t=e.charts.getColorPalette(14);return{[d.$y.HEALTHY]:{seriesName:m.U1.healthy,data:[],color:e.green300,areaStyle:{color:e.green300,opacity:1},lineStyle:{opacity:0,width:.4}},[d.$y.ERRORED]:{seriesName:m.U1.errored,data:[],color:t[12],areaStyle:{color:t[12],opacity:1},lineStyle:{opacity:0,width:.4}},[d.$y.ABNORMAL]:{seriesName:m.U1.abnormal,data:[],color:t[15],areaStyle:{color:t[15],opacity:1},lineStyle:{opacity:0,width:.4}},[d.$y.CRASHED]:{seriesName:m.U1.crashed,data:[],color:e.red300,areaStyle:{color:e.red300,opacity:1},lineStyle:{opacity:0,width:.4}}}}function x(e,{highFidelity:t}={}){const r=(0,c.Nm)(e);return l()(e.start).isSameOrBefore(l()().subtract(30,"days"))&&(t=!1),r>=c.Zn?"1d":r>=c.B8?"4h":r>=c.aC?"1h":t?r<=f?"10s":r<=30?"1m":"5m":"1h"}function T(e,t,r){if(!t||!r)return e;const s=[],n=e.intervals.filter(((e,n)=>{const o=l().utc(e).isBetween(l().utc(t),l().utc(r),void 0,"[]");return o&&s.push(n),o})),o=e.groups.map((e=>{const t={},r={};return Object.keys(e.series).forEach((n=>{r[n]=0,t[n]=e.series[n].filter(((e,t)=>{const o=s.includes(t);var a;return o&&(r[n]=(null!==(a=r[n])&&void 0!==a?a:0)+e),o})),n.startsWith("p50")&&(r[n]=a()(t[n])),n.startsWith("count_unique")&&(r[n]=e.totals[n])})),{...e,series:t,totals:r}}));return{start:n[0],end:n[n.length-1],query:e.query,intervals:n,groups:o}}function b(e,t="sm"){return e<98?(0,E.tZ)(u.zC,{color:"red300",size:t}):e<99.5?(0,E.tZ)(u.FC,{color:"yellow300",size:t}):(0,E.tZ)(u.DL,{isCircled:!0,color:"green300",size:t})}b.displayName="getCrashFreeIcon"},"./app/views/releases/utils/index.tsx":(e,t,r)=>{r.d(t,{hf:()=>A,G5:()=>R,Mf:()=>v,zB:()=>y,r:()=>w,G$:()=>g,PS:()=>H,eY:()=>C,TB:()=>N,rF:()=>D,C8:()=>O,O7:()=>x,EB:()=>b,Jl:()=>_}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var s=r("../node_modules/lodash/pick.js"),n=r.n(s),o=r("../node_modules/lodash/round.js"),a=r.n(o),i=r("../node_modules/moment/moment.js"),l=r.n(i),c=r("./app/components/links/externalLink.tsx"),u=r("./app/components/organizations/pageFilters/parse.tsx"),d=r("./app/constants/pageFilters.tsx"),h=r("./app/data/platformCategories.tsx"),p=r("./app/locale.tsx"),m=r("./app/types/index.tsx"),E=r("./app/utils/tokenizeSearch.tsx"),f=r("./app/views/issueList/utils.tsx"),S=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const A=95,R=e=>a()(e,e>60?0:3),v=(e,t=A,r=3)=>{const s=a()(e,e>t?r:0);return 100===s&&e<100?Math.floor(e*Math.pow(10,r))/Math.pow(10,r):s},y=(e,t=A,r=3)=>{if(isNaN(e))return"â€•";if(e<1&&e>0)return"<1%";const s=v(e,t,r).toLocaleString();return"".concat(s,"%")},w=(e,t=!0)=>a()(t?Math.abs(e):e,3),g=(e,t=!0)=>"".concat(w(e,t).toLocaleString(),"%"),H=(e,t,r)=>({pathname:"/organizations/".concat(e,"/issues/"),query:{project:t,statsPeriod:void 0,start:void 0,end:void 0,query:new E.MY(["firstRelease:".concat(r)]).formatString(),sort:f.qh.FREQ}}),C=(e,t,r,s={})=>({pathname:"/organizations/".concat(e,"/issues/"),query:{...s,project:t,query:new E.MY(["release:".concat(r),"error.unhandled:true"]).formatString(),sort:f.qh.FREQ}}),N=(e,t,r,s={})=>({pathname:"/organizations/".concat(e,"/issues/"),query:{...s,project:t,query:new E.MY(["release:".concat(r),"error.handled:true"]).formatString(),sort:f.qh.FREQ}}),D=e=>e.status===m.dE.Archived;function O(e){var t;const{lastEvent:r,currentProjectMeta:s,dateCreated:n}=e||{},{sessionsUpperBound:o}=s||{},a=l()(n).startOf("minute").utc().format(),i=l()(null!==(t=l()(o).isAfter(r)?o:r)&&void 0!==t?t:void 0).endOf("minute").utc().format();if(l()(a).isSame(i,"minute"))return{releaseStart:a,releaseEnd:l()(i).add(1,"minutes").utc().format()};const c=l()(a).add("999","days");return c.isBefore(i)?{releaseStart:a,releaseEnd:c.utc().format()}:{releaseStart:a,releaseEnd:i}}function x({location:e,releaseBounds:t}){const r=(0,u.fK)(n()(e.query,[...Object.values(d.nF),...Object.values(d.V),"cursor"]),{allowAbsolutePageDatetime:!0,allowEmptyPeriod:!0});return Object.keys(r).some((e=>[d.nF.START,d.nF.END,d.nF.UTC,d.nF.PERIOD].includes(e)))||(r[d.nF.START]=t.releaseStart,r[d.nF.END]=t.releaseEnd),r}const T=(0,S.tZ)(c.Z,{href:"https://docs.sentry.io/product/releases/health/#adoption-stages"}),b={low_adoption:{name:(0,p.t)("Low Adoption"),tooltipTitle:(0,p._N)("This release has a low percentage of sessions compared to other releases in this project. [link:Learn more]",{link:T}),type:"warning"},adopted:{name:(0,p.t)("Adopted"),tooltipTitle:(0,p._N)("This release has a high percentage of sessions compared to other releases in this project. [link:Learn more]",{link:T}),type:"success"},replaced:{name:(0,p.t)("Replaced"),tooltipTitle:(0,p._N)("This release was previously Adopted, but now has a lower level of sessions compared to other releases in this project. [link:Learn more]",{link:T}),type:"default"}},_=e=>[...h.ai,...h.gv].includes(e)},"./app/views/releases/utils/sessionTerm.tsx":(e,t,r)=>{r.d(t,{_k:()=>n,U1:()=>o,w0:()=>a,RE:()=>c});var s=r("./app/locale.tsx");let n;!function(e){e.CRASHES="crashes",e.CRASHED="crashed",e.ABNORMAL="abnormal",e.CRASH_FREE="crashFree",e.CRASH_FREE_USERS="crash-free-users",e.CRASH_FREE_SESSIONS="crash-free-sessions",e.HEALTHY="healthy",e.ERRORED="errored",e.UNHANDLED="unhandled",e.STABILITY="stability",e.ADOPTION="adoption"}(n||(n={}));const o={[n.CRASHES]:(0,s.t)("Crashes"),[n.CRASHED]:(0,s.t)("Crashed"),[n.ABNORMAL]:(0,s.t)("Abnormal"),[n.CRASH_FREE_USERS]:(0,s.t)("Crash Free Users"),[n.CRASH_FREE_SESSIONS]:(0,s.t)("Crash Free Sessions"),[n.HEALTHY]:(0,s.t)("Healthy"),[n.ERRORED]:(0,s.t)("Errored"),[n.UNHANDLED]:(0,s.t)("Unhandled"),[n.ADOPTION]:(0,s.t)("Adoption"),duration:(0,s.t)("Session Duration"),otherCrashed:(0,s.t)("Other Crashed"),otherAbnormal:(0,s.t)("Other Abnormal"),otherErrored:(0,s.t)("Other Errored"),otherHealthy:(0,s.t)("Other Healthy"),otherCrashFreeUsers:(0,s.t)("Other Crash Free Users"),otherCrashFreeSessions:(0,s.t)("Other Crash Free Sessions"),otherReleases:(0,s.t)("Other Releases")},a={[n.CRASHES]:(0,s.t)("Number of sessions with a crashed state"),[n.CRASH_FREE]:(0,s.t)("Percentage of sessions/users who did not experience a crash."),[n.CRASH_FREE_USERS]:(0,s.t)("Percentage of unique users with non-crashed sessions"),[n.CRASH_FREE_SESSIONS]:(0,s.t)("Percentage of non-crashed sessions"),[n.STABILITY]:(0,s.t)("The percentage of crash free sessions."),[n.ADOPTION]:(0,s.t)("Adoption compares the sessions or users of a release with the total sessions or users for this project in the last 24 hours.")},i={[n.CRASHED]:(0,s.t)("The process was terminated due to an unhandled exception or a request to the server that ended with an error"),[n.CRASH_FREE_SESSIONS]:(0,s.t)("Percentage of non-crashed sessions"),[n.ABNORMAL]:(0,s.t)("An unknown session exit. Like due to loss of power or killed by the operating system"),[n.HEALTHY]:(0,s.t)("A session without errors"),[n.ERRORED]:(0,s.t)("A session with errors"),[n.UNHANDLED]:(0,s.t)("Not handled by user code")},l={crashed:(0,s.t)("The application crashed with a hard crash (eg. segfault)"),[n.ABNORMAL]:(0,s.t)("The application did not properly end the session, for example, due to force-quit"),[n.HEALTHY]:(0,s.t)("The application exited normally and did not observe any errors"),[n.ERRORED]:(0,s.t)("The application exited normally but observed error events while running"),[n.UNHANDLED]:(0,s.t)("The application crashed with a hard crash")};function c(e,t){return function(e){switch("react-native"===e||"java-spring"===e||"apple-ios"===e||"dotnet-aspnetcore"===e?e:null==e?void 0:e.split("-")[0]){case"dotnet":case"java":return{...a,...i};case"java-spring":case"dotnet-aspnetcore":return{...a,...i,[n.CRASHES]:(0,s.t)("A request that resulted in an unhandled exception and hence a Server Error response")};case"android":case"cordova":case"react-native":case"flutter":return{...a,...i,[n.CRASHED]:(0,s.t)("An unhandled exception that resulted in the application crashing")};case"apple":return{...a,...i,[n.CRASHED]:(0,s.t)("An error that resulted in the application crashing")};case"node":case"javascript":return{...a,[n.CRASHED]:(0,s.t)("During the session an unhandled global error/promise rejection occurred."),[n.ABNORMAL]:(0,s.t)("Non applicable for Javascript."),[n.HEALTHY]:(0,s.t)("No errors were captured during session life-time."),[n.ERRORED]:(0,s.t)("During the session at least one handled error occurred."),[n.UNHANDLED]:"An error was captured by the global 'onerror' or 'onunhandledrejection' handler."};case"apple-ios":case"minidump":case"native":return{...a,...l};case"rust":return{...a,...l,[n.CRASHED]:(0,s.t)("The application had an unrecoverable error (a panic)")};default:return{...a,[n.CRASHED]:(0,s.t)("Number of users who experienced an unhandled error"),[n.ABNORMAL]:(0,s.t)("An unknown session exit"),[n.HEALTHY]:i.healthy,[n.ERRORED]:i.errored,[n.UNHANDLED]:i.unhandled}}}(t)[e]}}}]);
//# sourceMappingURL=../sourcemaps/app_utils_sessions_tsx.904e3cc0991e5094e01a8319ba4bd887.js.map