"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_performance_transactionSummary_utils_tsx"],{"./app/components/events/interfaces/spans/utils.tsx":(t,e,n)=>{n.d(e,{IG:()=>S,n0:()=>T,TC:()=>_,hw:()=>g,ro:()=>y,Rr:()=>w,yk:()=>E,PA:()=>C,k9:()=>F,yn:()=>I,h_:()=>x,PC:()=>q,o0:()=>P,is:()=>A,vu:()=>R,rF:()=>D,ct:()=>V}),n("../node_modules/core-js/modules/es.symbol.description.js"),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var a=n("../node_modules/react-router/es/index.js"),s=n("../node_modules/lodash/isNumber.js"),r=n.n(s),i=n("../node_modules/lodash/isString.js"),o=n.n(i),p=n("../node_modules/lodash/set.js"),l=n.n(p),c=n("../node_modules/moment/moment.js"),m=n.n(c),u=n("./app/types/event.tsx"),d=n("./app/types/utils.tsx"),f=n("./app/utils/performance/vitals/constants.tsx");const h=t=>{const{startTimestamp:e,endTimestamp:n}=t;return e>n?{startTimestamp:n,endTimestamp:e}:t};let v;!function(t){t[t.Stable=0]="Stable",t[t.Reversed=1]="Reversed",t[t.Equal=2]="Equal"}(v||(v={}));const S=t=>{const{viewStart:e,viewEnd:n}=t,{startTimestamp:a,endTimestamp:s}=h({startTimestamp:t.traceStartTimestamp,endTimestamp:t.traceEndTimestamp}),r=s-a,i=a+e*r,o=s-(1-n)*r-i;return t=>{if(r<=0)return{type:"TRACE_TIMESTAMPS_EQUAL",isSpanVisibleInView:!0};if(o<=0)return{type:"INVALID_VIEW_WINDOW",isSpanVisibleInView:!0};const{startTimestamp:e,endTimestamp:n}=h(t),a=(t=>{const e=t.startTimestamp,n=t.endTimestamp;return e<n?v.Stable:e===n?v.Equal:v.Reversed})(t),s=(e-i)/o,p=(n-i)/o,l=p>0&&s<1;switch(a){case v.Equal:return{type:"TIMESTAMPS_EQUAL",start:s,width:1,isSpanVisibleInView:p>=0&&s<=1};case v.Reversed:return{type:"TIMESTAMPS_REVERSED",start:s,end:p,isSpanVisibleInView:l};case v.Stable:return{type:"TIMESTAMPS_STABLE",start:s,end:p,isSpanVisibleInView:l};default:return a}}};function T(t){return{trace_id:t.traceID,span_id:t.rootSpanID,parent_span_id:t.parentSpanID,start_timestamp:t.traceStartTimestamp,timestamp:t.traceEndTimestamp,op:t.op,description:t.description,data:{},status:t.rootSpanStatus,hash:t.hash,exclusive_time:t.exclusiveTime}}function _(t){return{start:m().unix(t.start).subtract(12,"hours").utc().format("YYYY-MM-DDTHH:mm:ss.SSS"),end:m().unix(t.end).add(12,"hours").utc().format("YYYY-MM-DDTHH:mm:ss.SSS")}}function g(t){return"type"in t&&"gap"===t.type}function y(t){if("type"in t){if("orphan"===t.type)return!0;if("gap"===t.type)return t.isOrphan}return!1}function w(t,e=""){return g(t)?e:t.span_id}function E(t){if(!g(t))return t.op}function C(t){var e;return null==t||null===(e=t.contexts)||void 0===e?void 0:e.trace}function F(t){var e;const n=t.entries.find((t=>t.type===u.UZ.SPANS)),a=null!==(e=null==n?void 0:n.data)&&void 0!==e?e:[],s=C(t),i=s&&s.trace_id||"",p=s&&s.span_id||"",c=s&&s.op||"transaction",m=s&&s.description,f=s&&s.parent_span_id,h=s&&s.status,v=s&&s.hash,S=s&&s.exclusive_time;if(!n||a.length<=0)return{op:c,childSpans:{},traceStartTimestamp:t.startTimestamp,traceEndTimestamp:t.endTimestamp,traceID:i,rootSpanID:p,rootSpanStatus:h,parentSpanID:f,spans:[],description:m,hash:v,exclusiveTime:S};const T=new Set(a.map((t=>t.span_id)));T.add(p);const _={op:c,childSpans:{},traceStartTimestamp:t.startTimestamp,traceEndTimestamp:t.endTimestamp,traceID:i,rootSpanID:p,rootSpanStatus:h,parentSpanID:f,spans:a,description:m,hash:v,exclusiveTime:S},y=a.reduce(((t,e)=>{var n;let a=e;const s=function(t){return g(t)?"gap-span":t.parent_span_id}(a),i=s&&T.has(s);var c;c=s,o()(c)&&c.length>0&&i||(a.parent_span_id=p,a={type:"orphan",...a}),(0,d.hu)(a.parent_span_id);const m=null!==(n=t.childSpans[a.parent_span_id])&&void 0!==n?n:[];m.push(a),l()(t.childSpans,a.parent_span_id,m),(!t.traceStartTimestamp||a.start_timestamp<t.traceStartTimestamp)&&(t.traceStartTimestamp=a.start_timestamp);const u=r()(a.timestamp);return t.traceEndTimestamp?u&&a.timestamp>t.traceEndTimestamp?(t.traceEndTimestamp=a.timestamp,t):(a.start_timestamp>t.traceEndTimestamp&&(t.traceEndTimestamp=a.start_timestamp),t):u?(t.traceEndTimestamp=a.timestamp,t):(t.traceEndTimestamp=a.start_timestamp,t)}),_);return Object.values(y.childSpans).forEach((t=>{t.sort(b)})),y}function b(t,e){return y(t)&&!y(e)?1:!y(t)&&y(e)||t.start_timestamp<e.start_timestamp?-1:t.start_timestamp===e.start_timestamp?0:1}function I(t){return"number"!=typeof t&&"orphan"===(null==t?void 0:t.type)}function x(t){return I(t)?t.depth:t}function q(t){var e;const n=null===(e=t.sdk)||void 0===e?void 0:e.name;return!!n&&["sentry.javascript.browser","sentry.javascript.react","sentry.javascript.gatsby","sentry.javascript.ember","sentry.javascript.vue","sentry.javascript.angular","sentry.javascript.nextjs"].includes(n.toLowerCase())}const P=["mark","paint"];function j(t){const e=Object.keys(t);return Object.values(f.r).filter((t=>e.includes(t.slug))).some((e=>{const n=t[e.slug];return"number"==typeof n&&"number"==typeof e.poorThreshold&&n>=e.poorThreshold}))}function A(t){if(!t.measurements)return new Map;const e=Object.keys(t.measurements).filter((t=>t.startsWith("mark."))).map((e=>{const n=e.slice("mark.".length),a=t.measurements[n];return{name:e,timestamp:t.measurements[e].value,value:a?a.value:void 0}})),n=new Map;return e.forEach((t=>{const e=t.name.slice("mark.".length),a=t.value;if(n.has(t.timestamp)){const s=n.get(t.timestamp);return s.marks={...s.marks,[e]:a},s.failedThreshold||(s.failedThreshold=j(s.marks)),void n.set(t.timestamp,s)}const s={[e]:a};n.set(t.timestamp,{marks:s,failedThreshold:j(s)})})),n}function R(t,e){const n=e({startTimestamp:t,endTimestamp:t});switch(n.type){case"TRACE_TIMESTAMPS_EQUAL":case"INVALID_VIEW_WINDOW":return{warning:void 0,left:void 0,width:void 0,isSpanVisibleInView:n.isSpanVisibleInView};case"TIMESTAMPS_EQUAL":return{warning:void 0,left:n.start,width:1e-5,isSpanVisibleInView:n.isSpanVisibleInView};case"TIMESTAMPS_REVERSED":case"TIMESTAMPS_STABLE":return{warning:void 0,left:n.start,width:n.end-n.start,isSpanVisibleInView:n.isSpanVisibleInView};default:return n}}function D(t,e,n){return s=>{s.preventDefault();const r=V(t);e(r),a.browserHistory.push({...n,hash:r})}}function V(t){return"#span-".concat(t)}},"./app/utils/performance/quickTrace/utils.tsx":(t,e,n)=>{n.d(e,{hp:()=>m,q2:()=>u,eW:()=>d,R8:()=>h,eF:()=>S,_Z:()=>T,$J:()=>_,S2:()=>g,xB:()=>y,y3:()=>w,Ci:()=>E}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var a=n("../node_modules/lodash/omit.js"),s=n.n(a),r=n("../node_modules/moment-timezone/index.js"),i=n.n(r),o=n("./app/components/events/interfaces/spans/utils.tsx"),p=n("./app/constants/pageFilters.tsx"),l=n("./app/utils/analytics.tsx"),c=n("./app/utils/discover/eventView.tsx");function m(t){return"transaction"===t.type}function u(t,e){return m(e)?t.event_id===e.id:void 0!==t.errors&&t.errors.some((t=>t.event_id===e.id))}function d(t,e){const n=[],a=[],s=[{event:e,path:[]}];for(;s.length;){const e=s.shift();if(u(e.event,t)){for(const t of e.path)n.push(t);a.push(e.event)}else{const t=[...e.path,f(e.event)];for(const n of e.event.children)s.push({event:n,path:t})}}if(!a.length)throw new Error("No relevant path exists!");for(;a.length;){const t=a.shift();for(const e of t.children)a.push(e);n.push(f(t))}return n}function f(t){return s()(t,["children"])}function h(t,e,n){var a,s,r;const{type:i,trace:o}=t;if("empty"===i||null===o)throw new Error("Current event not in trace navigator!");const p="full"===i,c=null!==(a=o.find((t=>u(t,e))))&&void 0!==a?a:null;if(null===c)throw new Error("Current event not in trace navigator!");const m=c.parent_event_id&&null!==(s=o.find((t=>t.event_id===c.parent_event_id)))&&void 0!==s?s:null,d=null!==(r=o.find((t=>t.event_id!==c.event_id&&t.event_id!==(null==m?void 0:m.event_id)&&0===t.generation)))&&void 0!==r?r:null,f=p?[]:null,h=[],S=p?[]:null,T=new Set;return o.forEach((t=>{T.add(t.project_id),(t=>t.parent_event_id===c.event_id)(t)?h.push(t):p&&((t=>null!==c.generation&&null!==t.generation&&t.generation>0&&c.generation-1>t.generation)(t)?null==f||f.push(t):(t=>null!==c.generation&&null!==t.generation&&c.generation+1<t.generation)(t)&&(null==S||S.push(t)))})),p&&T.size>1&&function(t,e){(0,l.ec)({eventKey:"quick_trace.connected_services",eventName:"Quick Trace: Connected Services",organization_id:parseInt(t.id,10),projects:e})}(n,T.size),{root:d,ancestors:null===f?null:v(f),parent:m,current:c,children:v(h),descendants:null===S?null:v(S)}}function v(t){return t.sort(((t,e)=>e["transaction.duration"]-t["transaction.duration"]))}function S({eventView:t,location:e}){return s()(t.getEventsAPIPayload(e),["field","sort","per_page"])}function T({start:t,end:e,statsPeriod:n}){return c.ZP.fromSavedQuery({id:void 0,version:2,name:"",fields:["transaction.duration"],projects:[p.mP],query:"",environment:[],start:t,end:e,range:n})}function _(t){const e=m(t)?t.startTimestamp:i()(t.dateReceived?t.dateReceived:t.dateCreated).valueOf()/1e3,n=m(t)?t.endTimestamp:e;return(0,o.TC)({start:e,end:n})}function g(t,e,n){let a=n;const s=[t];for(;s.length;){const t=s.pop();for(const e of t.children)s.push(e);a=e(a,t)}return a}function y(t,e){return g(t,((t,n)=>(e(n)&&t.push(n),t)),[])}function w(t){return Boolean(t.event_id)}function E(t){return Boolean(t.event_id)}},"./app/utils/performance/urls.ts":(t,e,n)=>{n.d(e,{D:()=>r});var a=n("./app/components/events/interfaces/spans/utils.tsx"),s=n("./app/utils.tsx");function r(t,e,n,r,i){const o={...r||{},transaction:n};(0,s.ri)(o.transaction)||delete o.transaction;const p={pathname:"/organizations/".concat(t,"/performance/").concat(e,"/"),query:o,hash:(0,s.ri)(i)?(0,a.ct)(i):void 0};return(0,s.ri)(p.hash)||delete p.hash,p}},"./app/utils/performance/vitals/constants.tsx":(t,e,n)=>{n.d(e,{r:()=>r,T:()=>i});var a=n("./app/locale.tsx"),s=n("./app/utils/discover/fields.tsx");const r={[s.Zl.FP]:{slug:"fp",name:(0,a.t)("First Paint"),acronym:"FP",description:(0,a.t)("Render time of the first pixel loaded in the viewport (may overlap with FCP)."),poorThreshold:3e3,type:(0,s.Cq)(s.Zl.FP)},[s.Zl.FCP]:{slug:"fcp",name:(0,a.t)("First Contentful Paint"),acronym:"FCP",description:(0,a.t)("Render time of the first image, text or other DOM node in the viewport."),poorThreshold:3e3,type:(0,s.Cq)(s.Zl.FCP)},[s.Zl.LCP]:{slug:"lcp",name:(0,a.t)("Largest Contentful Paint"),acronym:"LCP",description:(0,a.t)("Render time of the largest image, text or other DOM node in the viewport."),poorThreshold:4e3,type:(0,s.Cq)(s.Zl.LCP)},[s.Zl.FID]:{slug:"fid",name:(0,a.t)("First Input Delay"),acronym:"FID",description:(0,a.t)("Response time of the browser to a user interaction (clicking, tapping, etc)."),poorThreshold:300,type:(0,s.Cq)(s.Zl.FID)},[s.Zl.CLS]:{slug:"cls",name:(0,a.t)("Cumulative Layout Shift"),acronym:"CLS",description:(0,a.t)("Sum of layout shift scores that measure the visual stability of the page."),poorThreshold:.25,type:(0,s.Cq)(s.Zl.CLS)},[s.Zl.TTFB]:{slug:"ttfb",name:(0,a.t)("Time to First Byte"),acronym:"TTFB",description:(0,a.t)("The time that it takes for a user's browser to receive the first byte of page content."),poorThreshold:600,type:(0,s.Cq)(s.Zl.TTFB)},[s.Zl.RequestTime]:{slug:"ttfb.requesttime",name:(0,a.t)("Request Time"),acronym:"RT",description:(0,a.t)("Captures the time spent making the request and receiving the first byte of the response."),poorThreshold:600,type:(0,s.Cq)(s.Zl.RequestTime)}},i={[s.$n.AppStartCold]:{slug:"app_start_cold",name:(0,a.t)("App Start Cold"),description:(0,a.t)("Cold start is a measure of the application start up time from scratch."),type:(0,s.Cq)(s.$n.AppStartCold)},[s.$n.AppStartWarm]:{slug:"app_start_warm",name:(0,a.t)("App Start Warm"),description:(0,a.t)("Warm start is a measure of the application start up time while still in memory."),type:(0,s.Cq)(s.$n.AppStartWarm)},[s.$n.FramesTotal]:{slug:"frames_total",name:(0,a.t)("Total Frames"),description:(0,a.t)("Total frames is a count of the number of frames recorded within a transaction."),type:(0,s.Cq)(s.$n.FramesTotal)},[s.$n.FramesSlow]:{slug:"frames_slow",name:(0,a.t)("Slow Frames"),description:(0,a.t)("Slow frames is a count of the number of slow frames recorded within a transaction."),type:(0,s.Cq)(s.$n.FramesSlow)},[s.$n.FramesFrozen]:{slug:"frames_frozen",name:(0,a.t)("Frozen Frames"),description:(0,a.t)("Frozen frames is a count of the number of frozen frames recorded within a transaction."),type:(0,s.Cq)(s.$n.FramesFrozen)},[s.$n.FramesSlowRate]:{slug:"frames_slow_rate",name:(0,a.t)("Slow Frames Rate"),description:(0,a.t)("Slow Frames Rate is the percentage of frames recorded within a transaction that is considered slow."),type:(0,s.Cq)(s.$n.FramesSlowRate)},[s.$n.FramesFrozenRate]:{slug:"frames_frozen_rate",name:(0,a.t)("Frozen Frames Rate"),description:(0,a.t)("Frozen Frames Rate is the percentage of frames recorded within a transaction that is considered frozen."),type:(0,s.Cq)(s.$n.FramesFrozenRate)},[s.$n.StallCount]:{slug:"stall_count",name:(0,a.t)("Stalls"),description:(0,a.t)("Stalls is the number of times the application stalled within a transaction."),type:(0,s.Cq)(s.$n.StallCount)},[s.$n.StallTotalTime]:{slug:"stall_total_time",name:(0,a.t)("Total Stall Time"),description:(0,a.t)("Stall Total Time is the total amount of time the application is stalled within a transaction."),type:(0,s.Cq)(s.$n.StallTotalTime)},[s.$n.StallLongestTime]:{slug:"stall_longest_time",name:(0,a.t)("Longest Stall Time"),description:(0,a.t)("Stall Longest Time is the longest amount of time the application is stalled within a transaction."),type:(0,s.Cq)(s.$n.StallLongestTime)},[s.$n.StallPercentage]:{slug:"stall_percentage",name:(0,a.t)("Stall Percentage"),description:(0,a.t)("Stall Percentage is the percentage of the transaction duration the application was stalled."),type:(0,s.Cq)(s.$n.StallPercentage)}}},"./app/views/performance/traceDetails/utils.tsx":(t,e,n)=>{n.d(e,{YA:()=>r,Rg:()=>i,uM:()=>o}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var a=n("./app/constants/pageFilters.tsx"),s=n("./app/utils/performance/quickTrace/utils.tsx");function r(t,e,n,s){const{start:r,end:i,statsPeriod:o}=n;return{pathname:"/organizations/".concat(t.slug,"/performance/trace/").concat(e,"/"),query:{...s,statsPeriod:o,[a.V.PAGE_START]:r,[a.V.PAGE_END]:i}}}function i(t){const e={projects:new Set,errors:new Set,transactions:new Set,startTimestamp:Number.MAX_SAFE_INTEGER,endTimestamp:0,maxGeneration:0};return t.reduce(((t,e)=>(0,s.S2)(e,((t,e)=>{for(const a of null!==(n=e.errors)&&void 0!==n?n:[]){var n;t.errors.add(a.event_id)}return t.transactions.add(e.event_id),t.projects.add(e.project_slug),t.startTimestamp=Math.min(t.startTimestamp,e.start_timestamp),t.endTimestamp=Math.max(t.endTimestamp,e.timestamp),t.maxGeneration=Math.max(t.maxGeneration,e.generation),t}),t)),e)}function o(t){return null===t.parent_span_id}},"./app/views/performance/transactionSummary/utils.tsx":(t,e,n)=>{n.d(e,{K0:()=>l,e1:()=>c,Z6:()=>m,vd:()=>u,uI:()=>d});var a=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=n("./app/styles/space.tsx"),r=n("./app/utils/discover/urls.tsx"),i=n("./app/utils/performance/urls.ts"),o=n("./app/utils/tokenizeSearch.tsx"),p=n("./app/views/performance/traceDetails/utils.tsx");let l;function c({orgSlug:t,transaction:e,projectID:n,query:a,unselectedSeries:s="p100()",display:r,trendFunction:i,trendColumn:p,showTransactions:l,additionalQuery:c}){const m=function({orgSlug:t}){return"/organizations/".concat(t,"/performance/summary/")}({orgSlug:t});let u;return u="string"==typeof a.query?function(t){const e=new o.MY(t);return e.removeFilter("transaction"),e.formatString()}(a.query):a.query,{pathname:m,query:{transaction:e,project:n,environment:a.environment,statsPeriod:a.statsPeriod,start:a.start,end:a.end,query:u,unselectedSeries:s,showTransactions:l,display:r,trendFunction:i,trendColumn:p,...c}}}function m(t){return(e,n,a)=>{const s="".concat(n.trace);return s?(0,p.YA)(e,s,t,{}):{}}}function u(t){return(e,n,a,s)=>{const o=(0,r.JE)(n);return(0,i.D)(e.slug,o,t,a,s)}}!function(t){t.FASTEST="fastest",t.SLOW="slow",t.OUTLIER="outlier",t.RECENT="recent"}(l||(l={}));const d=(0,a.Z)("div",{target:"e1radvp0"})("margin-top:",(0,s.Z)(3),";")}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_utils_tsx.ada6346e68405909068929ab6b4891c9.js.map