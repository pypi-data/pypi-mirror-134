"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_account_accountClose_tsx"],{"./app/views/asyncView.tsx":(e,t,n)=>{n.d(t,{Z:()=>r}),n("../node_modules/react/index.js");var o=n("./app/components/asyncComponent.tsx"),s=n("./app/components/sentryDocumentTitle.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class r extends o.Z{getTitle(){return""}render(){return(0,i.tZ)(s.Z,{title:this.getTitle(),children:this.renderComponent()})}}r.displayName="AsyncView"},"./app/views/settings/account/accountClose.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var o=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/react/index.js"),n("./app/actionCreators/indicator.tsx")),r=n("./app/actionCreators/modal.tsx"),a=n("./app/components/alert.tsx"),l=n("./app/components/button.tsx"),d=n("./app/components/confirm.tsx"),c=n("./app/components/panels/index.tsx"),u=n("./app/icons/index.tsx"),h=n("./app/locale.tsx"),p=n("./app/views/asyncView.tsx"),m=n("./app/views/settings/components/settingsPageHeader.tsx"),g=n("./app/views/settings/components/text/textBlock.tsx"),w=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const y=()=>window.location.href="/",Z=(0,s.Z)("div",{target:"e1tikij10"})({name:"14rp7vr",styles:"font-weight:bold;font-size:1.2em"}),v=({Header:e,Body:t,Footer:n})=>(0,w.BX)("div",{children:[(0,w.tZ)(e,{children:(0,h.t)("Closing Account")}),(0,w.BX)(t,{children:[(0,w.tZ)(g.Z,{children:(0,h.t)("Your account has been deactivated and scheduled for removal.")}),(0,w.tZ)(g.Z,{children:(0,h.t)("Thanks for using Sentry! We hope to see you again soon!")})]}),(0,w.tZ)(n,{children:(0,w.tZ)(l.ZP,{href:"/",children:(0,h.t)("Goodbye")})})]});v.displayName="GoodbyeModalContent";class x extends p.Z{constructor(...e){super(...e),(0,o.Z)(this,"handleChange",(({slug:e},t,n)=>{const o=n.target.checked;t||this.setState((t=>{const n=t.orgsToRemove||new Set(this.singleOwnerOrgs);return o?n.add(e):n.delete(e),{orgsToRemove:n}}))})),(0,o.Z)(this,"handleRemoveAccount",(async()=>{const{orgsToRemove:e}=this.state,t=null===e?this.singleOwnerOrgs:Array.from(e);(0,i.E3)("Closing accountâ€¦");try{await this.api.requestPromise("/users/me/",{method:"DELETE",data:{organizations:t}}),(0,r.openModal)(v,{onClose:y}),setTimeout(y,1e4)}catch{(0,i.Iw)("Error closing account")}}))}getEndpoints(){return[["organizations","/organizations/?owner=1"]]}getDefaultState(){return{...super.getDefaultState(),orgsToRemove:null}}get singleOwnerOrgs(){var e,t;return null===(e=this.state.organizations)||void 0===e||null===(t=e.filter((({singleOwner:e})=>e)))||void 0===t?void 0:t.map((({organization:e})=>e.slug))}renderBody(){const{organizations:e,orgsToRemove:t}=this.state;return(0,w.BX)("div",{children:[(0,w.tZ)(m.Z,{title:"Close Account"}),(0,w.BX)(g.Z,{children:[(0,h.t)("This will permanently remove all associated data for your user"),"."]}),(0,w.tZ)(a.Z,{type:"error",icon:(0,w.tZ)(u.Gy,{size:"md"}),children:(0,w.BX)(Z,{children:[(0,h.t)("Closing your account is permanent and cannot be undone"),"!"]})}),(0,w.BX)(c.s_,{children:[(0,w.tZ)(c.V9,{children:(0,h.t)("Remove the following organizations")}),(0,w.BX)(c.N,{children:[(0,w.BX)(c.aU,{type:"info",children:[(0,h.t)("Ownership will remain with other organization owners if an organization is not deleted."),(0,w.tZ)("br",{}),(0,h._N)("Boxes which can't be unchecked mean that you are the only organization owner and the organization [strong:will be deleted].",{strong:(0,w.tZ)("strong",{})})]}),null==e?void 0:e.map((({organization:e,singleOwner:n})=>(0,w.tZ)(c.Lv,{children:(0,w.BX)("label",{children:[(0,w.tZ)("input",{style:{marginRight:6},type:"checkbox",value:e.slug,onChange:this.handleChange.bind(this,e,n),name:"organizations",checked:null===t?n:t.has(e.slug),disabled:n}),e.slug]})},e.slug)))]})]}),(0,w.tZ)(d.Z,{priority:"danger",message:(0,h.t)("This is permanent and cannot be undone, are you really sure you want to do this?"),onConfirm:this.handleRemoveAccount,children:(0,w.tZ)(l.ZP,{priority:"danger",children:(0,h.t)("Close Account")})})]})}}const b=x}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_account_accountClose_tsx.847c09a669c67344bf50d0801821f2ab.js.map