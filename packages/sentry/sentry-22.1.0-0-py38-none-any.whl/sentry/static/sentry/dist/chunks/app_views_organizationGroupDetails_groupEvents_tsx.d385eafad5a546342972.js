"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_organizationGroupDetails_groupEvents_tsx"],{"./app/components/acl/role.tsx":(e,t,s)=>{s.d(t,{Z:()=>d});var n=s("../node_modules/react/index.js"),r=s("./app/stores/configStore.tsx"),i=s("./app/utils/isActiveSuperuser.tsx"),o=s("./app/utils/isRenderFunc.tsx"),a=s("./app/utils/withOrganization.tsx");class l extends n.Component{hasRole(){var e;const t=r.Z.get("user"),{organization:s,role:n}=this.props,{availableRoles:o}=s,a=null!==(e=s.role)&&void 0!==e?e:"";if(!t)return!1;if((0,i.M)())return!0;if(!Array.isArray(o))return!1;const l=o.map((e=>e.id));if(!l.includes(n)||!l.includes(a))return!1;const d=l.indexOf(n);return l.indexOf(a)>=d}render(){const{children:e}=this.props,t=this.hasRole();return(0,o.l)(e)?e({hasRole:t}):t&&e?e:null}}l.displayName="Role";const d=(0,a.Z)(l)},"./app/components/deviceName.tsx":(e,t,s)=>{s.d(t,{qW:()=>o,f:()=>a,ZP:()=>l});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(e,t){const s=e.split(" ")[0],n=e.split(" ").splice(1).join(" "),r=t.generationByIdentifier(s);return void 0===r?e:r+" "+n}async function a(){return s.e("vendors-node_modules_ios-device-list_dist_ios-device-list_min_js").then(s.t.bind(s,"../node_modules/ios-device-list/dist/ios-device-list.min.js",23))}class l extends r.Component{constructor(e){super(e),(0,n.Z)(this,"_isMounted",void 0),this.state={iOSDeviceList:null}}componentDidMount(){this._isMounted=!0,a().then((e=>{this._isMounted&&this.setState({iOSDeviceList:e})}))}componentWillUnmount(){this._isMounted=!1}render(){const{value:e,children:t}=this.props,{iOSDeviceList:s}=this.state;if(!e)return null;if(!s)return e;const n=o(e,s);return(0,i.tZ)("span",{"data-test-id":"loaded-device-name",children:t?t(n):n})}}l.displayName="DeviceName"},"./app/components/fileSize.tsx":(e,t,s)=>{s.d(t,{Z:()=>d});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("./app/utils.tsx"),i=s("./app/utils/getDynamicText.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){const{className:t,bytes:s}=e;return(0,o.tZ)(l,{className:t,children:(0,i.Z)({value:(0,r.F)(s),fixed:"xx KB"})})}a.displayName="FileSize";const l=(0,n.Z)("span",{target:"e1xn0mc30"})({name:"kow0uz",styles:"font-variant-numeric:tabular-nums"}),d=a},"./app/utils/attachmentUrl.tsx":(e,t,s)=>{s.d(t,{Z:()=>l});var n=s("../node_modules/react/index.js"),r=s("./app/components/acl/role.tsx"),i=s("./app/utils/withOrganization.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a({attachment:e,organization:t,eventId:s,projectId:n,children:i}){return(0,o.tZ)(r.Z,{role:t.attachmentsRole,children:({hasRole:r})=>i(r?"/api/0/projects/".concat(t.slug,"/").concat(n,"/events/").concat(s,"/attachments/").concat(e.id,"/"):null)})}a.displayName="AttachmentUrl";const l=(0,i.Z)((0,n.memo)(a))},"./app/views/organizationGroupDetails/groupEvents.tsx":(e,t,s)=>{s.r(t),s.d(t,{GroupEvents:()=>L,default:()=>w});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=s("../node_modules/react/index.js"),i=s("../node_modules/react-router/es/index.js"),o=s("../node_modules/lodash/pick.js"),a=s.n(o),l=s("./app/components/emptyStateWarning.tsx"),d=s("./app/components/avatar/userAvatar.tsx"),c=s("./app/components/dateTime.tsx"),p=s("./app/components/deviceName.tsx"),u=s("./app/components/fileSize.tsx"),h=s("./app/components/globalSelectionLink.tsx"),m=s("./app/utils/attachmentUrl.tsx"),v=s("./app/utils/withOrganization.tsx"),Z=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class y extends r.Component{renderCrashFileLink(){const{event:e,projectId:t}=this.props;if(!e.crashFile)return null;const s="event.minidump"===e.crashFile.type?"Minidump":"Crash file";return(0,Z.tZ)(m.Z,{projectId:t,eventId:e.id,attachment:e.crashFile,children:t=>{var n,r;return t&&(0,Z.BX)("small",{children:[s,": ",(0,Z.tZ)("a",{href:"".concat(t,"?download=1"),children:null===(n=e.crashFile)||void 0===n?void 0:n.name})," (",(0,Z.tZ)(u.Z,{bytes:(null===(r=e.crashFile)||void 0===r?void 0:r.size)||0}),")"]})}})}render(){const{className:e,event:t,orgId:s,groupId:n,tagList:r,hasUser:i}=this.props,o={};t.tags.forEach((e=>{o[e.key]=e.value}));const a="/organizations/".concat(s,"/issues/").concat(n,"/events/").concat(t.id,"/");return(0,Z.BX)("tr",{className:e,children:[(0,Z.tZ)("td",{children:(0,Z.BX)("h5",{children:[(0,Z.tZ)(h.Z,{to:a,children:(0,Z.tZ)(c.Z,{date:t.dateCreated})}),(0,Z.tZ)("small",{children:t.title.substr(0,100)}),this.renderCrashFileLink()]})}),i&&(0,Z.tZ)("td",{className:"event-user table-user-info",children:t.user?(0,Z.BX)("div",{children:[(0,Z.tZ)(d.Z,{user:t.user,size:24,className:"avatar",gravatar:!1}),t.user.email]}):(0,Z.tZ)("span",{children:"â€”"})}),r.map((e=>(0,Z.tZ)("td",{children:(0,Z.tZ)("div",{children:"device"===e.key?(0,Z.tZ)(p.ZP,{value:o[e.key]}):o[e.key]})},e.key)))]},t.id)}}y.displayName="EventsTableRow";const g=(0,v.Z)(y);var x=s("./app/locale.tsx");class f extends r.Component{render(){const{events:e,tagList:t,orgId:s,projectId:n,groupId:r}=this.props,i=!!e.find((e=>e.user));return(0,Z.BX)("table",{className:"table events-table",children:[(0,Z.tZ)("thead",{children:(0,Z.BX)("tr",{children:[(0,Z.tZ)("th",{children:(0,x.t)("ID")}),i&&(0,Z.tZ)("th",{children:(0,x.t)("User")}),t.map((e=>(0,Z.tZ)("th",{children:e.name},e.key)))]})}),(0,Z.tZ)("tbody",{children:e.map((e=>(0,Z.tZ)(g,{event:e,orgId:s,projectId:n,groupId:r,tagList:t,hasUser:i},e.id)))})]})}}f.displayName="EventsTable";const j=f;var _=s("./app/components/loadingError.tsx"),b=s("./app/components/loadingIndicator.tsx"),I=s("./app/components/pagination.tsx"),N=s("./app/components/panels/index.tsx"),k=s("./app/components/searchBar.tsx"),S=s("./app/utils/parseApiError.tsx"),q=s("./app/utils/withApi.tsx");class L extends r.Component{constructor(e){super(e),(0,n.Z)(this,"handleSearch",(e=>{const t={...this.props.location.query};t.query=e;const{groupId:s,orgId:n}=this.props.params;i.browserHistory.push({pathname:"/organizations/".concat(n,"/issues/").concat(s,"/events/"),query:t})})),(0,n.Z)(this,"fetchData",(()=>{this.setState({loading:!0,error:!1});const e={...a()(this.props.location.query,["cursor","environment"]),limit:50,query:this.state.query};this.props.api.request("/issues/".concat(this.props.params.groupId,"/events/"),{query:e,method:"GET",success:(e,t,s)=>{var n;this.setState({eventList:e,error:!1,loading:!1,pageLinks:null!==(n=null==s?void 0:s.getResponseHeader("Link"))&&void 0!==n?n:""})},error:e=>{this.setState({error:(0,S.Z)(e),loading:!1})}})}));const t=this.props.location.query;this.state={eventList:[],loading:!0,error:!1,pageLinks:"",query:t.query||""}}UNSAFE_componentWillMount(){this.fetchData()}UNSAFE_componentWillReceiveProps(e){if(this.props.location.search!==e.location.search){const t=e.location.query;this.setState({query:t.query},this.fetchData)}}renderNoQueryResults(){return(0,Z.tZ)(l.Z,{children:(0,Z.tZ)("p",{children:(0,x.t)("Sorry, no events match your search query.")})})}renderEmpty(){return(0,Z.tZ)(l.Z,{children:(0,Z.tZ)("p",{children:(0,x.t)("There don't seem to be any events yet.")})})}renderResults(){const{group:e,params:t}=this.props,s=e.tags.filter((e=>"user"!==e.key))||[];return(0,Z.tZ)(j,{tagList:s,events:this.state.eventList,orgId:t.orgId,projectId:e.project.slug,groupId:t.groupId})}renderBody(){let e;return e=this.state.loading?(0,Z.tZ)(b.Z,{}):this.state.error?(0,Z.tZ)(_.Z,{message:this.state.error,onRetry:this.fetchData}):this.state.eventList.length>0?this.renderResults():this.state.query&&""!==this.state.query?this.renderNoQueryResults():this.renderEmpty(),e}render(){return(0,Z.BX)("div",{children:[(0,Z.tZ)("div",{style:{marginBottom:20},children:(0,Z.tZ)(k.Z,{defaultQuery:"",placeholder:(0,x.t)("search event id, message, or tags"),query:this.state.query,onSearch:this.handleSearch})}),(0,Z.tZ)(N.s_,{className:"event-list",children:(0,Z.tZ)(N.N,{children:this.renderBody()})}),(0,Z.tZ)(I.Z,{pageLinks:this.state.pageLinks})]})}}L.displayName="GroupEvents";const w=(0,q.Z)(L)}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationGroupDetails_groupEvents_tsx.4143d44fb70d24ef665c937a8ae79a37.js.map