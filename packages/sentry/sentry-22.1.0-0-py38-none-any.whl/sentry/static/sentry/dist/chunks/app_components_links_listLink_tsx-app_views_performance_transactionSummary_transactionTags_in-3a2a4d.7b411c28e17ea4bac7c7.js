"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_components_links_listLink_tsx-app_views_performance_transactionSummary_transactionTags_in-3a2a4d"],{"./app/components/charts/components/visualMap.tsx":(e,t,s)=>{function n(e){return e}s.d(t,{Z:()=>n}),s("../node_modules/echarts/lib/component/visualMap.js")},"./app/components/charts/transitionChart.tsx":(e,t,s)=>{s.d(t,{Z:()=>l});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),o=s("./app/components/charts/loadingPanel.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class i extends a.Component{constructor(...e){super(...e),(0,n.Z)(this,"state",{prevReloading:this.props.reloading,prevLoading:this.props.loading,key:1})}static getDerivedStateFromProps(e,t){const s=t.prevReloading,n=e.reloading,a=t.prevLoading,o=e.loading;return a!==o?{prevReloading:n,prevLoading:o,key:t.key+1}:o?{prevReloading:n,prevLoading:o,key:t.key}:s&&!n?{prevReloading:n,prevLoading:o,key:t.key+1}:{prevReloading:n,prevLoading:o,key:t.key}}render(){const{height:e,loading:t,reloading:s}=this.props;return t&&!s?(0,r.tZ)(o.Z,{height:e,"data-test-id":"events-request-loading"}):(0,r.tZ)(a.Fragment,{children:this.props.children},String(this.state.key))}}i.displayName="TransitionChart",(0,n.Z)(i,"defaultProps",{height:"200px"});const l=i},"./app/components/charts/transparentLoadingMask.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(s("../node_modules/react/index.js"),s("./app/components/loadingMask.tsx")),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const r=(0,n.Z)((({className:e,visible:t,children:s,...n})=>{const r=t?{...n,"data-test-id":"loading-placeholder"}:n;return(0,o.tZ)(a.Z,{className:e,...r,children:s})}),{target:"ewtkxp50"})((e=>!e.visible&&"display: none;"),";opacity:0.4;z-index:1;")},"./app/components/events/searchBar.tsx":(e,t,s)=>{s.d(t,{Z:()=>q});var n,a=s("../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/core-js/modules/es.object.from-entries.js"),s("../node_modules/react/index.js")),i=s("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),l=s("../node_modules/lodash/assign.js"),d=s.n(l),c=s("../node_modules/lodash/flatten.js"),m=s.n(c),u=s("../node_modules/lodash/isEqual.js"),p=s.n(u),g=s("../node_modules/lodash/memoize.js"),h=s.n(g),y=s("../node_modules/lodash/omit.js"),Z=s.n(y),v=s("./app/actionCreators/tags.tsx"),f=s("./app/components/smartSearchBar/index.tsx"),x=s("./app/constants/index.tsx"),b=s("./app/types/index.tsx"),w=s("./app/utils.tsx"),j=s("./app/utils/discover/fields.tsx"),k=s("./app/utils/measurements/measurements.tsx"),C=s("./app/utils/withApi.tsx"),_=s("./app/utils/withTags.tsx"),S=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const T=new RegExp("^".concat(x.c$,"|\\").concat(x.ir),"g");class L extends r.PureComponent{constructor(...e){super(...e),(0,o.Z)(this,"getEventFieldValues",h()(((e,t,s)=>{const{api:n,organization:a,projectIds:o}=this.props,r=null==o?void 0:o.map(String);return(0,j.h1)(e.key)||(0,j.Xr)(e.key)?Promise.resolve([]):(0,v.Fo)(n,a.slug,e.key,t,r,s,!0).then((e=>m()(e.filter((({name:e})=>(0,w.ri)(e))).map((({name:e})=>e)))),(()=>{throw new Error("Unable to fetch event field values")}))}),(({key:e},t)=>"".concat(e,"-").concat(t)))),(0,o.Z)(this,"prepareQuery",(e=>e.replace(T,"")))}componentDidMount(){var e,t;null===(e=(t=this.getEventFieldValues.cache).clear)||void 0===e||e.call(t)}componentDidUpdate(e){var t,s;p()(this.props.projectIds,e.projectIds)||null===(t=(s=this.getEventFieldValues.cache).clear)||void 0===t||t.call(s)}getTagList(e){const{fields:t,organization:s,tags:n,omitTags:a}=this.props,o=t?Object.fromEntries(t.filter((e=>!Object.keys(j.wZ).includes(e.field)&&!(0,j.GO)(e.field))).map((e=>[e.field,{key:e.field,name:e.field}]))):{},r=s.features.includes("performance-view")?Object.assign({},e,j.wZ,o):Z()(j.wZ,j.J8),i=s.features.includes("semver")?Object.assign({},j.jg,r):r,l=d()({},n,i);return l.has={key:"has",name:"Has property",values:Object.keys(l),predefined:!0},Z()(l,null!=a?a:[])}render(){const{organization:e}=this.props;return(0,S.tZ)(k.Z,{organization:e,children:({measurements:e})=>{const t=this.getTagList(e);return(0,S.tZ)(i.ms,{children:({css:e})=>(0,S.tZ)(f.Z,{hasRecentSearches:!0,savedSearchType:b.L4.EVENT,onGetTagValues:this.getEventFieldValues,supportedTags:t,prepareQuery:this.prepareQuery,excludeEnvironment:!0,dropdownClassName:e(n||(n=(0,a.Z)(["\n                    max-height: 300px;\n                    overflow-y: auto;\n                  "]))),...this.props})})}})}}L.displayName="SearchBar";const q=(0,C.Z)((0,_.Z)(L))},"./app/components/links/listLink.tsx":(e,t,s)=>{s.d(t,{Z:()=>g});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),r=s("../node_modules/react-router/es/index.js"),i=s("../node_modules/classnames/index.js"),l=s.n(i),d=s("../node_modules/lodash/omit.js"),c=s.n(d),m=s("../node_modules/query-string/index.js"),u=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class p extends o.Component{constructor(...e){super(...e),(0,n.Z)(this,"getClassName",(()=>{const e={},{className:t,activeClassName:s}=this.props;return t&&(e[t]=!0),this.isActive()&&s&&(e[s]=!0),l()(e)}))}isActive(){const{isActive:e,to:t,query:s,index:n,router:a}=this.props,o=s?m.parse(s):void 0,r="string"==typeof t?{pathname:t,query:o}:t;return"function"==typeof e?e(r,n):a.isActive(r,n)}render(){const{index:e,children:t,to:s,disabled:n,...a}=this.props,o=c()(a,"activeClassName","css","isActive","index","router","location");return(0,u.tZ)(h,{className:this.getClassName(),disabled:n,children:(0,u.tZ)(r.Link,{...o,onlyActiveOnIndex:e,to:n?"":s,children:t})})}}p.displayName="ListLink",(0,n.Z)(p,"displayName","ListLink"),(0,n.Z)(p,"defaultProps",{activeClassName:"active",index:!1,disabled:!1});const g=(0,r.withRouter)(p),h=(0,a.Z)("li",{shouldForwardProp:e=>"disabled"!==e,target:"er8tqc10"})((e=>e.disabled&&"\n   a {\n    color:".concat(e.theme.disabled," !important;\n    pointer-events: none;\n    :hover {\n      color: ").concat(e.theme.disabled,"  !important;\n    }\n   }\n")),";")},"./app/utils/measurements/measurements.tsx":(e,t,s)=>{s.d(t,{Z:()=>c}),s("../node_modules/core-js/modules/es.object.from-entries.js"),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=s("../node_modules/react/index.js"),a=s("./app/utils/performance/vitals/constants.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(e){return Object.fromEntries(Object.entries(e).map((([e,t])=>[e,{name:t.name,key:e}])))}const i=r(a.T),l=r(a.r);function d({organization:e,children:t}){const s=e.features.includes("performance-mobile-vitals")?{...l,...i}:l;return(0,o.tZ)(n.Fragment,{children:t({measurements:s})})}d.displayName="Measurements";const c=d},"./app/utils/withTags.tsx":(e,t,s)=>{s.d(t,{Z:()=>l});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),o=s("./app/stores/tagStore.tsx"),r=s("./app/utils/getDisplayName.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=function(e){class t extends a.Component{constructor(...e){super(...e),(0,n.Z)(this,"state",{tags:o.Z.getAllTags()}),(0,n.Z)(this,"unsubscribe",o.Z.listen((e=>this.setState({tags:e})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){const{tags:t,...s}=this.props;return(0,i.tZ)(e,{tags:null!=t?t:this.state.tags,...s})}}return t.displayName="WithTags",(0,n.Z)(t,"displayName","withTags(".concat((0,r.Z)(e),")")),t}},"./app/views/performance/transactionSummary/transactionTags/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>Qe}),s("../node_modules/core-js/modules/es.string.trim.js");var n=s("./app/locale.tsx"),a=s("./app/utils/discover/eventView.tsx"),o=s("./app/utils/queryString.tsx"),r=s("./app/utils/tokenizeSearch.tsx"),i=s("./app/utils/withOrganization.tsx"),l=s("./app/utils/withProjects.tsx"),d=s("./app/views/performance/transactionSummary/pageLayout.tsx"),c=s("./app/views/performance/transactionSummary/tabs.tsx"),m=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),u=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/react/index.js")),p=s("../node_modules/react-router/es/index.js"),g=s("./app/components/charts/styles.tsx"),h=s("./app/components/events/searchBar.tsx"),y=s("./app/components/layouts/thirds.tsx"),Z=s("./app/components/loadingIndicator.tsx"),v=s("./app/components/organizations/pageFilters/parse.tsx"),f=s("./app/components/questionTooltip.tsx"),x=s("./app/components/radio.tsx"),b=s("./app/styles/space.tsx"),w=s("./app/utils/performance/segmentExplorer/segmentExplorerQuery.tsx"),j=s("./app/views/performance/transactionSummary/utils.tsx"),k=s("./app/views/performance/transactionSummary/filter.tsx"),C=s("./app/views/performance/transactionSummary/transactionOverview/tagExplorer.tsx"),_=s("./app/utils/discover/genericDiscoverQuery.tsx"),S=s("./app/utils/withApi.tsx"),T=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function L(e){const{aggregateColumn:t}=e;return function(s){const{eventView:n}=s,a=n.getEventsAPIPayload(s.location);return a.aggregateColumn=t,a.sort=e.sort,a.tagKey=e.tagKey,a.numBucketsPerKey=e.numBucketsPerKey,a}}function q(e,t){return e.aggregateColumn!==t.aggregateColumn||e.sort!==t.sort||e.tagKey!==t.tagKey}function N(e){return(0,T.tZ)(_.ZP,{route:"events-facets-performance-histogram",getRequestPayload:L(e),shouldRefetchData:q,...e})}N.displayName="TagKeyHistogramQuery";const B=(0,S.Z)(N);var V=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),D=(s("../node_modules/core-js/modules/es.array.reverse.js"),s("../node_modules/react-dom/profiling.js")),z=s("../node_modules/react-popper/lib/esm/Popper.js"),A=s("../node_modules/@sentry/utils/esm/string.js"),P=s("../node_modules/classnames/index.js"),F=s.n(P),E=s("../node_modules/lodash/memoize.js"),M=s.n(E);s("./app/components/charts/components/visualMap.tsx"),s("../node_modules/echarts/lib/chart/heatmap.js"),s("../node_modules/echarts/lib/component/visualMap.js");var R=s("./app/components/charts/baseChart.tsx");const O=u.forwardRef(((e,t)=>{const{series:s,seriesOptions:n,visualMaps:a,...o}=e;return(0,T.tZ)(R.Z,{ref:t,options:{visualMap:a},...o,series:s.map((({seriesName:e,data:t,dataArray:s,...a})=>function(e={}){const{data:t,...s}=e;return{data:t,...s,type:"heatmap"}}({...n,...a,name:e,data:s||t.map((({value:e,name:t})=>[t,e]))})))})}));var X=s("./app/components/charts/transitionChart.tsx"),K=s("./app/components/charts/transparentLoadingMask.tsx"),I=s("./app/components/dropdownControl.tsx"),H=s("./app/components/dropdownMenu.tsx"),Q=s("./app/components/panels/index.tsx"),W=s("./app/components/placeholder.tsx"),Y=s("./app/components/quickTrace/styles.tsx"),G=s("./app/components/truncate.tsx"),U=s("./app/utils/discover/charts.tsx"),$=s("./app/utils/formatters.tsx"),J=s("./app/utils/getDynamicText.tsx");function ee(e,t){return e.query!==t.query}function te(e){return(0,T.tZ)(_.ZP,{route:"eventsv2",shouldRefetchData:ee,...e})}te.displayName="TagTransactionsQuery";const se=(0,S.Z)(te);var ne=s("./app/views/performance/utils.tsx"),ae=s("./app/views/performance/transactionSummary/transactionEvents/utils.tsx"),oe=s("./app/views/performance/transactionSummary/transactionTags/utils.tsx");class re{constructor(e){(0,V.Z)(this,"boundingRect",void 0),this.boundingRect=e.getBoundingClientRect()}getBoundingClientRect(){return this.boundingRect}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}const ie=M()((()=>{let e=document.getElementById("heatmap-portal");return e||(e=document.createElement("div"),e.setAttribute("id","heatmap-portal"),document.body.appendChild(e)),e})),le=e=>{const{tableData:t,isLoading:s,organization:a,eventView:r,location:i,tagKey:l,transactionName:d,aggregateColumn:c}=e,m=(0,u.useRef)(null),[p,g]=(0,u.useState)(),[h,y]=(0,u.useState)(),[v,x]=(0,u.useState)(!1),w=["#D1BAFC","#9282F3","#6056BA","#313087","#021156"],k=new Set,C=t&&t.histogram&&t.histogram.data&&t.histogram.data.length?t.histogram.data:void 0,_=t&&t.tags&&t.tags.data?t.tags.data:void 0,S=C&&(L=C[0],Object.keys(L).find((e=>e.includes("histogram"))));var L;const q=_?_.map((e=>e.tags_value)).reverse():[];let N=0;const B=S&&C?C.map((e=>{const t=e[S],s=(0,ne.YL)(t),n=e.tags_value;return k.add(s),N=Math.max(N,e.count),[s,n,e.count]})):null;B&&B.sort(((e,t)=>e[0]===t[0]?t[1]-e[1]:t[0]-e[0]));const V={height:290,animation:!1,colors:w,tooltip:{},yAxis:{type:"category",data:Array.from(q),splitArea:{show:!0},axisLabel:{formatter:e=>(0,A.$G)(e,30)}},xAxis:{boundaryGap:!0,type:"category",splitArea:{show:!0},data:Array.from(k),axisLabel:{show:!0,showMinLabel:!0,showMaxLabel:!0,formatter:e=>(0,U.gu)(e,"Count")},axisLine:{},axisPointer:{show:!1},axisTick:{show:!0,interval:0,alignWithLabel:!0}},grid:{left:(0,b.Z)(3),right:(0,b.Z)(3),top:"25px",bottom:(0,b.Z)(4)}},P=[{min:0,max:N,show:!1,orient:"horizontal",calculable:!0,inRange:{color:w}}],E=[];B&&E.push({seriesName:"Count",dataArray:B,label:{show:!0,formatter:e=>(0,$.Du)(e.value[2])},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}});const M=C&&(0,oe.oT)(C[0]);return(0,T.BX)(pe,{children:[(0,T.BX)(ge,{children:[(0,n.t)("Heat Map"),(0,T.tZ)(f.Z,{size:"sm",position:"top",title:(0,n.t)("This heatmap shows the frequency for each duration across the most common tag values")})]}),(0,T.BX)(X.Z,{loading:s,reloading:s,children:[(0,T.tZ)(K.Z,{visible:s}),(0,T.tZ)(H.Z,{onOpen:()=>{x(!0)},onClose:()=>{x(!1)},shouldIgnoreClickOutside:e=>{var t;return!(null===(t=m.current)||void 0===t||!t.getEchartsInstance().getDom().contains(e.target))},children:({isOpen:e,getMenuProps:t,actions:s})=>(0,T.BX)(u.Fragment,{children:[D.createPortal((0,T.tZ)("div",{children:p?(0,T.tZ)(z.ZP,{referenceElement:p,placement:"bottom",children:({ref:s,style:r,placement:l})=>(0,T.tZ)(me,{ref:s,style:r,className:"anchor-middle","data-placement":l,children:(0,T.tZ)(ue,{...t({className:F()("dropdown-menu")}),isOpen:e,alignMenu:"right",blendCorner:!1,children:h?(0,T.tZ)(se,{query:h.getQueryWithAdditionalConditions(),location:i,eventView:h,orgSlug:a.slug,limit:4,referrer:"api.performance.tag-page",children:({isLoading:e,tableData:t})=>{const s=e?null:(0,ae.xr)({orgSlug:a.slug,transaction:d,projectID:(0,o.ro)(i.query.project),query:{...h.generateQueryStringObject(),query:h.getQueryWithAdditionalConditions()}});return(0,T.tZ)(u.Fragment,{children:e?(0,T.tZ)(de,{children:(0,T.tZ)(Z.Z,{size:40,hideMessage:!0})}):(0,T.BX)("div",{children:[t.data.length?null:(0,T.tZ)(W.Z,{}),[...t.data].slice(0,3).map((e=>{const t=(0,j.vd)(d)(a,e,i.query);return(0,T.tZ)(Y.hP,{width:"small",to:t,children:(0,T.BX)(ce,{children:[(0,T.tZ)(G.Z,{value:e.id,maxLength:12}),(0,T.tZ)(Y.df,{children:(0,T.tZ)(ne.Xr,{milliseconds:e[c],abbreviation:!0})})]})},e.id)})),s&&t.data.length>3?(0,T.tZ)(Y.hP,{width:"small",to:s,children:(0,T.tZ)(ce,{children:(0,n.t)("View all events")})}):null]})})}}):null})})}):null}),ie()),(0,J.Z)({value:(0,T.tZ)(O,{ref:m,visualMaps:P,series:E,onClick:e=>{const t=e.event.event,n=new re(t.target);g(n);const o=r.clone();o.fields=[{field:c}];const[i,d]=e.value;if(M&&C){const t=C[e.dataIndex],s=parseInt("".concat(t[M.histogramField]),10),n=s+M.bucketSize;o.additionalConditions.setFilterValues(c,[">=".concat(s),"<".concat(n)])}l&&o.additionalConditions.setFilterValues(l,[d]),y(o),(0,oe.bZ)(a),v||s.open()},...V}),fixed:(0,T.tZ)(W.Z,{height:"290px",testId:"skeleton-ui"})})]})})]})]})};le.displayName="TagsHeatMap";const de=(0,m.Z)("div",{target:"eoy5kj75"})({name:"kxllrv",styles:"width:200px;height:100px;display:flex;align-items:center;justify-content:center"}),ce=(0,m.Z)("div",{target:"eoy5kj74"})({name:"17wn5yb",styles:"width:100%;display:flex;flex-direction:row;justify-content:space-between"}),me=(0,m.Z)(Y.DZ,{target:"eoy5kj73"})("z-index:",(e=>e.theme.zIndex.dropdown),";"),ue=(0,m.Z)(I.VY,{target:"eoy5kj72"})({name:"17pw1o7",styles:"right:auto;transform:translate(-50%);overflow:visible"}),pe=(0,m.Z)(Q.s_,{target:"eoy5kj71"})("padding:",(0,b.Z)(3)," ",(0,b.Z)(3)," 0 ",(0,b.Z)(3),";margin-bottom:0;border-bottom:0;border-bottom-left-radius:0;border-bottom-right-radius:0;"),ge=(0,m.Z)(g.ws,{target:"eoy5kj70"})(""),he=le;var ye=s("./app/components/gridEditable/index.tsx"),Ze=s("./app/components/gridEditable/sortLink.tsx"),ve=s("./app/components/links/link.tsx"),fe=s("./app/components/pagination.tsx"),xe=s("./app/icons/iconAdd.tsx"),be=s("./app/utils/discover/fields.tsx"),we=s("./app/views/eventsV2/table/cellAction.tsx");const je="tags_cursor";class ke extends u.Component{constructor(...e){super(...e),(0,V.Z)(this,"state",{widths:[]}),(0,V.Z)(this,"renderHeadCellWithMeta",((e,t,s)=>(n,a)=>this.renderHeadCell(e,t,n,s[a]))),(0,V.Z)(this,"handleTagValueClick",((e,t,s)=>{const n=(0,o.ro)(e.query.query),a=new r.MY(null!=n?n:"");a.addFilterValues(t,[s]);const i=a.formatString();p.browserHistory.push({pathname:e.pathname,query:{...e.query,query:String(i).trim()}})})),(0,V.Z)(this,"handleCellAction",((e,t,s)=>n=>{const{eventView:a,location:o,organization:i}=this.props;(0,oe.bZ)(i);const l=new r.MY(a.query);l.removeFilter("event.type"),(0,we.rh)(l,n,{...e,name:s.id},t),p.browserHistory.push({pathname:o.pathname,query:{...o.query,[je]:void 0,query:l.formatString()}})})),(0,V.Z)(this,"renderBodyCell",((e,t,s)=>{const a=s[t.key],{location:o,eventView:i,organization:l}=e;if("key"===t.key)return s.tags_key;const d=[we.eX.ADD,we.eX.EXCLUDE];if("tagValue"===t.key){const e={...s,id:s.tags_key};return(0,T.tZ)(we.ZP,{column:t,dataRow:e,handleCellAction:this.handleCellAction(t,s.tags_value,e),allowActions:d,children:(0,T.tZ)(C.xS,{row:s})})}if("frequency"===t.key)return(0,T.tZ)(_e,{children:(0,$.rl)(s.frequency,0)});if("action"===t.key){const e=new r.MY(i.query).hasFilter(s.tags_key);return(0,T.tZ)(_e,{children:(0,T.tZ)(ve.Z,{disabled:e,to:"",onClick:()=>{(0,oe.bZ)(l),this.handleTagValueClick(o,s.tags_key,s.tags_value)},children:(0,T.BX)(Se,{children:[(0,T.tZ)(xe.N,{isCircled:!0}),(0,n.t)("Add to filter")]})})})}if("comparison"===t.key){const e=s.comparison,t=(0,$.rl)(e-1,0);return e>1?(0,n.t)("+%s slower",t):(0,n.t)("%s faster",t)}return"aggregate"===t.key?(0,T.tZ)(_e,{children:(0,T.tZ)(ne.Xr,{abbreviation:!0,milliseconds:s.aggregate})}):"sumdelta"===t.key?(0,T.tZ)(_e,{children:(0,T.tZ)(ne.Xr,{abbreviation:!0,milliseconds:s.sumdelta})}):"count"===t.key?(0,T.tZ)(_e,{children:a}):a})),(0,V.Z)(this,"renderBodyCellWithData",(e=>(t,s)=>this.renderBodyCell(e,t,s))),(0,V.Z)(this,"handleResizeColumn",((e,t)=>{const s=[...this.state.widths];s[e]=t.width?Number(t.width):ye.z7,this.setState({widths:s})}))}renderHeadCell(e,t,s,n){const{location:a}=this.props,o=(0,be.qG)(s.key,s.type,t),r={field:s.key,width:s.width},i=e.sortForField(r,t),l=i?i.kind:void 0;return(0,T.tZ)(Ze.Z,{align:o,title:n.name,direction:l,canSort:!0,generateSortLink:function(){if(!t)return;const s=e.sortOnField(r,t),{sort:n}=s.generateQueryStringObject();return{...a,query:{...a.query,[je]:void 0,tagSort:n}}}})}render(){const{eventView:e,tagKey:t,location:s,isLoading:n,tableData:a,aggregateColumn:o,pageLinks:r,onCursor:i}=this.props,l=[...Te].map((e=>{const s={...e};return"tagValue"===e.key&&t&&(s.name=t),"aggregate"===e.key&&"measurements.lcp"===o&&(s.name="Avg LCP"),s}));return(0,T.BX)(Ce,{children:[(0,T.tZ)(ye.ZP,{isLoading:n,data:a&&a.data?a.data:[],columnOrder:l,columnSortBy:[],grid:{renderHeadCell:this.renderHeadCellWithMeta(e,a?a.meta:{},l),renderBodyCell:this.renderBodyCellWithData(this.props),onResizeColumn:this.handleResizeColumn},location:s}),(0,T.tZ)(fe.Z,{pageLinks:r,onCursor:i,size:"small"})]})}}ke.displayName="TagValueTable";const Ce=(0,m.Z)("div",{target:"e1gt1k5a2"})({name:"122h187",styles:">div{border-top-left-radius:0;border-top-right-radius:0;}"}),_e=(0,m.Z)("div",{target:"e1gt1k5a1"})({name:"29h503",styles:"text-align:right;flex:1"}),Se=(0,m.Z)("div",{target:"e1gt1k5a0"})("display:grid;grid-auto-flow:column;gap:",(0,b.Z)(.5),";justify-content:flex-end;align-items:center;"),Te=[{key:"tagValue",field:"tagValue",name:"Tag Values",width:-1,column:{kind:"field"}},{key:"frequency",field:"frequency",name:"Frequency",width:-1,column:{kind:"field"},canSort:!0},{key:"count",field:"count",name:"Events",width:-1,column:{kind:"field"},canSort:!0},{key:"aggregate",field:"aggregate",name:"Avg Duration",width:-1,column:{kind:"field"},canSort:!0},{key:"action",field:"action",name:"",width:-1,column:{kind:"field"}}],Le=e=>{var t;const{eventView:s,location:n,organization:r,projects:i,tagKey:l}=e,d=s.clone(),c=(0,C.e2)(k.f1.None,i,d),m=(e,t,s)=>p.browserHistory.push({pathname:t,query:{...s,tableCursor:e}}),g=(0,o.ro)(null===(t=n.query)||void 0===t?void 0:t.tableCursor),h=(0,oe.oc)(n),y=(0,a.vp)(h);d.fields=Te;const Z=d.withSorts(y.length?y:[{field:"frequency",kind:"desc"}]);return(0,T.tZ)(u.Fragment,{children:l?(0,T.BX)(u.Fragment,{children:[(0,T.tZ)(B,{eventView:d,orgSlug:r.slug,location:n,aggregateColumn:c,numBucketsPerKey:40,tagKey:l,limit:8,cursor:g,sort:null!=h?h:"-sumdelta",children:({isLoading:t,tableData:s})=>(0,T.tZ)(he,{...e,tagKey:l,aggregateColumn:c,tableData:s,isLoading:t})}),(0,T.tZ)(w.Z,{eventView:Z,orgSlug:r.slug,location:n,aggregateColumn:c,tagKey:l,limit:8,cursor:g,sort:h,allTagKeys:!0,children:({isLoading:t,tableData:s,pageLinks:n})=>(0,T.tZ)(ke,{...e,eventView:Z,tagKey:l,aggregateColumn:c,pageLinks:n,tableData:s,isLoading:t,onCursor:m})})]}):(0,T.BX)(u.Fragment,{children:[(0,T.tZ)(he,{...e,aggregateColumn:c,tableData:null,isLoading:!1}),(0,T.tZ)(ke,{...e,pageLinks:null,aggregateColumn:c,tableData:null,isLoading:!1})]})})};Le.displayName="TagsDisplay";const qe=Le,Ne=e=>{const{eventView:t,location:s,organization:n,projects:a}=e,o=(0,C.e2)(k.f1.None,a,t);return(0,T.tZ)(y.or,{fullWidth:!0,children:(0,T.tZ)(w.Z,{eventView:t,orgSlug:n.slug,location:s,aggregateColumn:o,limit:20,sort:"-sumdelta",allTagKeys:!0,children:({isLoading:t,tableData:s})=>(0,T.tZ)(Be,{...e,isLoading:t,tableData:s})})})};Ne.displayName="TagsPageContent";const Be=e=>{const{eventView:t,location:s,organization:n,tableData:a,isLoading:r}=e,i=t.clone(),l=a?function(e){const t=[],s=[];return e.data.forEach((e=>{(e.comparison>1?t:s).push(e.tags_key)})),{suspectTags:t,otherTags:s}}(a):null,d=l?l.suspectTags:[],c=l?l.otherTags:[],m=(0,oe.Zn)(s),g=[...d,...c],h=m?g.find((e=>e===m)):void 0,y=g.length?g[0]:void 0,Z=null!=h?h:y,[f,x]=(0,u.useState)(Z),b=e=>{const t=(0,v.fK)({...s.query||{},tagKey:e});p.browserHistory.replace({pathname:s.pathname,query:t}),x(e)};(0,u.useEffect)((()=>{Z&&b(Z)}),[Z]),f&&i.additionalConditions.setFilterValues("has",[f]);const w=(0,o.ro)(s.query.query,"");return(0,T.BX)(Fe,{children:[(0,T.tZ)(Ve,{suspectTags:d,otherTags:c,tagSelected:f,changeTag:e=>b(e),isLoading:r}),(0,T.BX)(Me,{children:[(0,T.tZ)(Oe,{children:(0,T.tZ)(Re,{organization:n,projectIds:i.project,query:w,fields:i.fields,onSearch:e=>{const t=(0,v.fK)({...s.query||{},query:e});p.browserHistory.push({pathname:s.pathname,query:t})}})}),(0,T.tZ)(qe,{...e,tagKey:f})]})]})};Be.displayName="InnerContent";const Ve=e=>{const{suspectTags:t,otherTags:s,changeTag:a,tagSelected:o,isLoading:r}=e;return(0,T.BX)(Ee,{children:[(0,T.BX)(Pe,{children:[(0,n.t)("Suspect Tags"),(0,T.tZ)(f.Z,{position:"top",title:(0,n.t)("Suspect tags are tags that often correspond to slower transaction"),size:"sm"})]}),r?(0,T.tZ)(De,{children:(0,T.tZ)(Z.Z,{mini:!0})}):t.length?t.map((e=>(0,T.BX)(ze,{children:[(0,T.tZ)(x.Z,{"aria-label":e,checked:o===e,onChange:()=>a(e)}),(0,T.tZ)(Ae,{className:"truncate",children:e})]},e))):(0,T.tZ)("div",{children:(0,n.t)("No tags detected.")}),(0,T.tZ)(j.uI,{}),(0,T.BX)(Pe,{children:[(0,n.t)("Other Tags"),(0,T.tZ)(f.Z,{position:"top",title:(0,n.t)("Other common tags for this transaction"),size:"sm"})]}),r?(0,T.tZ)(De,{children:(0,T.tZ)(Z.Z,{mini:!0})}):s.length?s.map((e=>(0,T.BX)(ze,{children:[(0,T.tZ)(x.Z,{"aria-label":e,checked:o===e,onChange:()=>a(e)}),(0,T.tZ)(Ae,{className:"truncate",children:e})]},e))):(0,T.tZ)("div",{children:(0,n.t)("No tags detected.")})]})};Ve.displayName="TagsSideBar";const De=(0,m.Z)("div",{target:"e5m8yi88"})({name:"1wnowod",styles:"display:flex;align-items:center;justify-content:center"}),ze=(0,m.Z)("label",{target:"e5m8yi87"})("cursor:pointer;margin-bottom:",(0,b.Z)(1),";font-weight:normal;display:grid;grid-auto-flow:column;grid-auto-columns:max-content 1fr;align-items:center;gap:",(0,b.Z)(1),";"),Ae=(0,m.Z)("span",{target:"e5m8yi86"})({name:"1d3w5wq",styles:"width:100%"}),Pe=(0,m.Z)(g.OT,{target:"e5m8yi85"})("margin-bottom:",(0,b.Z)(2),";"),Fe=(0,m.Z)("div",{target:"e5m8yi84"})("margin:0;background-color:",(e=>e.theme.background),";flex-grow:1;@media (min-width: ",(e=>e.theme.breakpoints[1]),"){display:grid;grid-template-columns:auto 66%;align-content:start;gap:",(0,b.Z)(3),";}@media (min-width: ",(e=>e.theme.breakpoints[2]),"){grid-template-columns:225px minmax(100px, auto);}"),Ee=(0,m.Z)("div",{target:"e5m8yi83"})({name:"sarfoe",styles:"grid-column:1/2"}),Me=(0,m.Z)("div",{target:"e5m8yi82"})({name:"g99mcu",styles:"grid-column:2/4;max-width:100%"}),Re=(0,m.Z)(h.Z,{target:"e5m8yi81"})({name:"1ff36h2",styles:"flex-grow:1"}),Oe=(0,m.Z)("div",{target:"e5m8yi80"})("margin-bottom:",(0,b.Z)(1),";"),Xe=Ne;function Ke(e){const{location:t,organization:s,projects:n}=e;return(0,T.tZ)(d.Z,{location:t,organization:s,projects:n,tab:c.Z.Tags,getDocumentTitle:Ie,generateEventView:He,childComponent:Xe})}function Ie(e){return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,n.t)("Tags")].join(" — "):[(0,n.t)("Summary"),(0,n.t)("Tags")].join(" — ")}function He({location:e,transactionName:t,isMetricsData:s}){const n=(0,o.ro)(e.query.query,""),i=new r.MY(n);return s||i.setFilterValues("event.type",["transaction"]),i.setFilterValues("transaction",[t]),a.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:t,fields:["transaction.duration"],query:i.formatString(),projects:[]},e)}Ke.displayName="TransactionTags";const Qe=(0,l.Z)((0,i.Z)(Ke))}}]);
//# sourceMappingURL=../sourcemaps/app_components_links_listLink_tsx-app_views_performance_transactionSummary_transactionTags_in-3a2a4d.caf1349d54ebb07bcbb9630a090fb67b.js.map