(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_projectDebugFiles_index_tsx"],{"./app/components/acl/role.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var o=s("../node_modules/react/index.js"),i=s("./app/stores/configStore.tsx"),n=s("./app/utils/isActiveSuperuser.tsx"),r=s("./app/utils/isRenderFunc.tsx"),a=s("./app/utils/withOrganization.tsx");class l extends o.Component{hasRole(){var e;const t=i.Z.get("user"),{organization:s,role:o}=this.props,{availableRoles:r}=s,a=null!==(e=s.role)&&void 0!==e?e:"";if(!t)return!1;if((0,n.M)())return!0;if(!Array.isArray(r))return!1;const l=r.map((e=>e.id));if(!l.includes(o)||!l.includes(a))return!1;const c=l.indexOf(o);return l.indexOf(a)>=c}render(){const{children:e}=this.props,t=this.hasRole();return(0,r.l)(e)?e({hasRole:t}):t&&e?e:null}}l.displayName="Role";const c=(0,a.Z)(l)},"./app/components/confirmDelete.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>p});var o=s("../node_modules/react/index.js"),i=s("./app/components/alert.tsx"),n=s("./app/components/confirm.tsx"),r=s("./app/locale.tsx"),a=s("./app/views/settings/components/forms/controls/input.tsx"),l=s("./app/views/settings/components/forms/field/index.tsx"),c=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const d=({message:e,confirmInput:t,...s})=>(0,c.tZ)(n.Z,{...s,bypass:!1,disableConfirmButton:!0,renderMessage:({disableConfirmButton:s})=>(0,c.BX)(o.Fragment,{children:[(0,c.tZ)(i.Z,{type:"error",children:e}),(0,c.tZ)(l.Z,{flexibleControlStateSize:!0,inline:!1,label:(0,r.t)("Please enter %s to confirm the deletion",(0,c.tZ)("code",{children:t})),children:(0,c.tZ)(a.Z,{type:"text",placeholder:t,onChange:e=>s(e.target.value!==t)})})]})});d.displayName="ConfirmDelete";const p=d},"./app/components/fileSize.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=s("./app/utils.tsx"),n=s("./app/utils/getDynamicText.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){const{className:t,bytes:s}=e;return(0,r.tZ)(l,{className:t,children:(0,n.Z)({value:(0,i.F)(s),fixed:"xx KB"})})}a.displayName="FileSize";const l=(0,o.Z)("span",{target:"e1xn0mc30"})({name:"kow0uz",styles:"font-variant-numeric:tabular-nums"}),c=a},"./app/components/notAvailable.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(s("../node_modules/react/index.js"),s("./app/components/tooltip.tsx")),n=s("./app/utils.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a({tooltip:e,className:t}){return(0,r.tZ)(l,{className:t,children:(0,r.tZ)(i.Z,{title:e,disabled:!(0,n.ri)(e),children:"—"})})}a.displayName="NotAvailable";const l=(0,o.Z)("div",{target:"e1ickyb10"})("color:",(e=>e.theme.gray200),";"),c=a},"./app/components/projects/appStoreConnectContext.tsx":(e,t,s)=>{"use strict";s.d(t,{z:()=>l,Z:()=>c}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var o=s("../node_modules/react/index.js"),i=s("./app/utils/appStoreValidationErrorMessage.tsx"),n=s("./app/utils/useApi.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=(0,o.createContext)(void 0),l=({children:e,project:t,organization:s})=>{const l=(0,n.Z)(),[c,d]=(0,o.useState)(),[p,u]=(0,o.useState)(void 0),m=s.slug,h=(null!=c&&c.symbolSources?JSON.parse(c.symbolSources):[]).reduce(((e,{type:t,id:s,...o})=>("appstoreconnect"===t.toLowerCase()&&(e[s]={type:t,...o}),e)),{});function g(e,t){if("valid"!==(null==t?void 0:t.status))return(0,i.e)(t,e)}return(0,o.useEffect)((()=>{!async function(){if(t&&!c)if(t.symbolSources)d(t);else try{const e=await l.requestPromise("/projects/".concat(m,"/").concat(t.slug,"/"));d(e)}catch{}}()}),[t]),(0,o.useEffect)((()=>{!async function(){if(c&&Object.keys(h).length)try{const e=await l.requestPromise("/projects/".concat(m,"/").concat(c.slug,"/appstoreconnect/status/"));u(e)}catch{}}()}),[c]),(0,r.tZ)(a.Provider,{value:p&&t?Object.keys(p).reduce(((e,o)=>{const i=p[o];return{...e,[o]:{...i,updateAlertMessage:g({name:h[o].name,link:"/settings/".concat(s.slug,"/projects/").concat(t.slug,"/debug-symbols/?customRepository=").concat(o)},i.credentials)}}}),{}):void 0,children:e})};l.displayName="Provider";const c=a},"./app/types/debugFiles.tsx":(e,t,s)=>{"use strict";let o,i,n;s.d(t,{BQ:()=>o,Wi:()=>i,Et:()=>n}),function(e){e.EXE="exe",e.DBG="dbg",e.LIB="lib"}(o||(o={})),function(e){e.SYMTAB="symtab",e.DEBUG="debug",e.UNWIND="unwind",e.SOURCES="sources"}(i||(i={})),function(e){e.HTTP="http",e.S3="s3",e.GCS="gcs",e.APP_STORE_CONNECT="appStoreConnect"}(n||(n={}))},"./app/utils/appStoreValidationErrorMessage.tsx":(e,t,s)=>{"use strict";s.d(t,{O:()=>a,e:()=>l});var o=s("../node_modules/@sentry/minimal/esm/index.js"),i=s("./app/components/links/link.tsx"),n=s("./app/locale.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=(0,n.t)("An unexpected error occurred while configuring the App Store Connect integration");function l(e,t){switch(e.code){case"app-connect-authentication-error":return t?(0,n._N)("App Store Connect credentials are invalid or missing. [linkToCustomRepository]",{linkToCustomRepository:(0,r.tZ)(i.Z,{to:t.link,children:(0,n._N)("Make sure the credentials of the '[customRepositoryName]' repository are correct and exist.",{customRepositoryName:t.name})})}):(0,n.t)("The supplied App Store Connect credentials are invalid or missing.");case"app-connect-forbidden-error":return(0,n.t)("The supplied API key does not have sufficient permissions.");case"app-connect-multiple-sources-error":return(0,n.t)("Only one App Store Connect application is allowed in this project.");default:return o.Tb(new Error("Unknown app store connect error.")),a}}},"./app/utils/routeTitle.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});const o=function(e,t,s=!0,o){const i="".concat(e," - ").concat(t),n=o?"".concat(i," - ").concat(o):i;return s?"".concat(n," - Sentry"):n}},"./app/views/asyncView.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r}),s("../node_modules/react/index.js");var o=s("./app/components/asyncComponent.tsx"),i=s("./app/components/sentryDocumentTitle.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class r extends o.Z{getTitle(){return""}render(){return(0,n.tZ)(i.Z,{title:this.getTitle(),children:this.renderComponent()})}}r.displayName="AsyncView"},"./app/views/settings/project/permissionAlert.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>c}),s("../node_modules/react/index.js");var o=s("./app/components/acl/access.tsx"),i=s("./app/components/alert.tsx"),n=s("./app/icons/index.tsx"),r=s("./app/locale.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=({access:e=["project:write"],...t})=>(0,a.tZ)(o.Z,{access:e,children:({hasAccess:e})=>!e&&(0,a.tZ)(i.Z,{type:"warning",icon:(0,a.tZ)(n.FC,{size:"xs"}),...t,children:(0,r.t)("These settings can only be edited by users with the organization owner, manager, or admin role.")})});l.displayName="PermissionAlert";const c=l},"./app/views/settings/projectDebugFiles/index.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>pt});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),r=s("./app/actionCreators/indicator.tsx"),a=s("./app/actions/projectActions.tsx"),l=s("./app/components/checkbox.tsx"),c=s("./app/components/pagination.tsx"),d=s("./app/components/panels/index.tsx"),p=s("./app/components/searchBar.tsx"),u=s("./app/locale.tsx"),m=s("./app/styles/space.tsx"),h=s("./app/utils/routeTitle.tsx"),g=s("./app/views/asyncView.tsx"),y=s("./app/views/settings/components/settingsPageHeader.tsx"),Z=s("./app/views/settings/components/text/textBlock.tsx"),b=s("./app/views/settings/project/permissionAlert.tsx"),f=s("./app/components/acl/access.tsx"),x=s("./app/components/acl/role.tsx"),v=s("./app/components/button.tsx"),S=s("./app/components/buttonBar.tsx"),w=s("./app/components/confirm.tsx"),j=s("./app/components/fileSize.tsx"),C=s("./app/components/tag.tsx"),E=s("./app/components/timeSince.tsx"),T=s("./app/components/tooltip.tsx"),_=s("./app/icons/index.tsx"),D=s("./app/styles/overflowEllipsis.tsx"),N=s("./app/views/settings/projectDebugFiles/utils.tsx"),A=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const k=({debugFile:e,showDetails:t,downloadUrl:s,downloadRole:o,onDelete:i})=>{const{id:r,data:a,debugId:l,uuid:c,size:d,dateCreated:p,objectName:m,cpuName:h,symbolType:g,codeId:y}=e,Z=(0,N.J)(e),{features:b}=a||{};return(0,A.BX)(n.Fragment,{children:[(0,A.BX)(P,{children:[(0,A.tZ)("div",{children:(0,A.tZ)(O,{children:l||c})}),(0,A.BX)(M,{children:[(0,A.tZ)(I,{bytes:d}),(0,A.BX)(X,{children:[(0,A.tZ)(_.jo,{size:"xs"}),(0,A.tZ)(E.Z,{date:p})]})]})]}),(0,A.BX)(P,{children:[(0,A.tZ)(q,{children:"proguard"===g&&"proguard-mapping"===m?"―":m}),(0,A.BX)(L,{children:[(0,A.tZ)(B,{children:"proguard"===g&&"any"===h?(0,u.t)("proguard mapping"):"".concat(h," (").concat(g).concat(Z?" ".concat(Z):"",")")}),b&&(0,A.tZ)(z,{children:b.map((e=>(0,A.tZ)(R,{tooltipText:(0,N.V)(e),children:e},e)))}),t&&(0,A.tZ)("div",{children:y&&(0,A.BX)(U,{children:[(0,u.t)("Code ID"),": ",y]})})]})]}),(0,A.tZ)(F,{children:(0,A.BX)(S.ZP,{gap:.5,children:[(0,A.tZ)(x.Z,{role:o,children:({hasRole:e})=>(0,A.tZ)(T.Z,{disabled:e,title:(0,u.t)("You do not have permission to download debug files."),children:(0,A.tZ)(v.ZP,{size:"xsmall",icon:(0,A.tZ)(_.Dj,{size:"xs"}),href:s,disabled:!e,children:(0,u.t)("Download")})})}),(0,A.tZ)(f.Z,{access:["project:write"],children:({hasAccess:e})=>(0,A.tZ)(T.Z,{disabled:e,title:(0,u.t)("You do not have permission to delete debug files."),children:(0,A.tZ)(w.Z,{confirmText:(0,u.t)("Delete"),message:(0,u.t)("Are you sure you wish to delete this file?"),onConfirm:()=>i(r),disabled:!e,children:(0,A.tZ)(v.ZP,{priority:"danger",icon:(0,A.tZ)(_.Fz,{size:"xs"}),size:"xsmall",disabled:!e,"data-test-id":"delete-dif"})})})})]})})]})};k.displayName="DebugFileRow";const B=(0,i.Z)("span",{target:"e1imnv3r11"})("display:inline-flex;margin:0 ",(0,m.Z)(1)," ",(0,m.Z)(1)," 0;"),z=(0,i.Z)("div",{target:"e1imnv3r10"})("display:inline-flex;flex-wrap:wrap;margin:-",(0,m.Z)(.5),";"),R=(0,i.Z)(C.Z,{target:"e1imnv3r9"})("padding:",(0,m.Z)(.5),";"),P=(0,i.Z)("div",{target:"e1imnv3r8"})({name:"6kz1wu",styles:"display:flex;flex-direction:column;align-items:flex-start"}),F=(0,i.Z)("div",{target:"e1imnv3r7"})("display:flex;justify-content:flex-end;align-items:flex-start;margin-top:",(0,m.Z)(1),";"),O=(0,i.Z)("code",{target:"e1imnv3r6"})("font-size:",(e=>e.theme.fontSizeSmall),";"),M=(0,i.Z)("div",{target:"e1imnv3r5"})("width:100%;display:flex;font-size:",(e=>e.theme.fontSizeSmall),";margin-top:",(0,m.Z)(1),";color:",(e=>e.theme.subText),";align-items:center;"),I=(0,i.Z)(j.Z,{target:"e1imnv3r4"})("flex:1;padding-left:",(0,m.Z)(.5),";"),X=(0,i.Z)("div",{target:"e1imnv3r3"})("display:grid;gap:",(0,m.Z)(.5),";grid-template-columns:min-content 1fr;flex:2;align-items:center;padding-left:",(0,m.Z)(.5),";"),q=(0,i.Z)("div",{target:"e1imnv3r2"})("font-size:",(e=>e.theme.fontSizeMedium),";margin-bottom:",(0,m.Z)(1),";"),L=(0,i.Z)("div",{target:"e1imnv3r1"})("font-size:",(e=>e.theme.fontSizeSmall),";color:",(e=>e.theme.subText),";@media (max-width: ",(e=>e.theme.breakpoints[2]),"){line-height:1.7;}"),U=(0,i.Z)("div",{target:"e1imnv3r0"})(D.Z," margin-top:",(0,m.Z)(1),";"),Y=k;var V=s("./app/components/loadingIndicator.tsx"),G=s("./app/views/settings/components/forms/selectField.tsx");const W=(0,u.t)("Built-in Repositories");function Q({api:e,organization:t,builtinSymbolSourceOptions:s,builtinSymbolSources:o,projSlug:i,isLoading:n}){const l=o.filter((e=>s.find((({sentry_key:t})=>t===e))));async function c(s){const{successMessage:o,errorMessage:n}=0===(c=(null!=s?s:[]).length)?{errorMessage:(0,u.t)("This field requires at least one built-in repository")}:c>l.length?{successMessage:(0,u.t)("Successfully added built-in repository"),errorMessage:(0,u.t)("An error occurred while adding new built-in repository")}:{successMessage:(0,u.t)("Successfully removed built-in repository"),errorMessage:(0,u.t)("An error occurred while removing built-in repository")};var c;try{const n=await e.requestPromise("/projects/".concat(t.slug,"/").concat(i,"/"),{method:"PUT",data:{builtinSymbolSources:s}});a.Z.updateSuccess(n),(0,r.S9)(o)}catch{(0,r.Iw)(n)}}return(0,A.BX)(d.s_,{children:[(0,A.tZ)(d.V9,{children:W}),(0,A.tZ)(d.N,{children:n?(0,A.tZ)(V.Z,{}):(0,A.tZ)(f.Z,{access:["project:write"],children:({hasAccess:e})=>(0,A.tZ)(K,{disabledReason:e?void 0:(0,u.t)("You do not have permission to edit built-in repositories configurations."),disabled:!e,name:"builtinSymbolSources",label:W,help:(0,u.t)("Configures which built-in repositories Sentry should use to resolve debug files."),placeholder:(0,u.t)("Select built-in repository"),value:l,onChange:c,options:s.filter((e=>!e.hidden)).map((e=>({value:e.sentry_key,label:e.name}))),getValue:e=>null===e?[]:e,flexibleControlStateSize:!0,multiple:!0})})})]})}Q.displayName="BuiltInRepositories";const H=Q,K=(0,i.Z)(G.Z,{target:"e1wp48am0"})((e=>e.disabled&&"cursor: not-allowed"),";");var J=s("./app/actionCreators/modal.tsx"),$=s("./app/components/acl/feature.tsx"),ee=s("./app/components/acl/featureDisabled.tsx"),te=s("./app/components/dropdownAutoComplete/index.tsx"),se=s("./app/components/dropdownButton.tsx"),oe=s("./app/components/emptyStateWarning.tsx"),ie=s("./app/components/hookOrDefault.tsx"),ne=s("./app/components/menuItem.tsx"),re=s("./app/components/panels/panelAlert.tsx"),ae=s("./app/components/projects/appStoreConnectContext.tsx"),le=s("./app/types/debugFiles.tsx"),ce=s("./app/utils.tsx"),de=s("./app/components/actions/button.tsx"),pe=s("./app/components/actions/menuItemActionLink.tsx"),ue=s("./app/components/confirmDelete.tsx"),me=s("./app/components/dropdownLink.tsx"),he=s("./app/icons/iconEllipsis.tsx");function ge({repositoryName:e,repositoryType:t,isDetailsExpanded:s,isDetailsDisabled:o,onToggleDetails:i,onEdit:r,onDelete:a,showDetails:l,hasFeature:c,hasAccess:d}){function p(s){return(0,A.tZ)(ue.Z,{confirmText:(0,u.t)("Delete Repository"),message:t===le.Et.APP_STORE_CONNECT?(0,A.BX)(n.Fragment,{children:[(0,A.tZ)(Z.Z,{children:(0,A.tZ)("strong",{children:(0,u.t)("Removing App Store Connect symbol source does not remove current dSYMs.")})}),(0,A.tZ)(Z.Z,{children:(0,u.t)('The App Store Connect symbol source periodically imports dSYMs into the "Uploaded debug information files". Removing this symbol source does not delete those files and they will remain available for symbolication until deleted directly.')})]}):(0,A.BX)(n.Fragment,{children:[(0,A.tZ)(Z.Z,{children:(0,A.tZ)("strong",{children:(0,u.t)("Removing this repository applies instantly to new events.")})}),(0,A.tZ)(Z.Z,{children:(0,u.t)("Debug files from this repository will not be used to symbolicate future events. This may create new issues and alert members in your organization.")})]}),confirmInput:e,priority:"danger",onConfirm:a,children:s})}const m=!d||o||!c;return(0,A.BX)(fe,{gap:1,children:[l&&(0,A.tZ)(be,{isOpen:s,size:"small",onClick:o?void 0:i,hideBottomBorder:!1,disabled:o,children:(0,u.t)("Details")}),(0,A.tZ)(xe,{title:c?d?void 0:(0,u.t)("You do not have permission to edit custom repositories configurations."):void 0,disabled:m,children:(0,A.tZ)(ve,{disabled:m,onClick:r,size:"small",children:(0,u.t)("Configure")})}),m?(0,A.tZ)(xe,{title:c?d?void 0:(0,u.t)("You do not have permission to delete custom repositories configurations."):void 0,disabled:m,children:(0,A.tZ)(ve,{size:"small",disabled:!0,children:(0,u.t)("Delete")})}):p((0,A.tZ)(ve,{size:"small",children:(0,u.t)("Delete")})),(0,A.tZ)(Se,{children:(0,A.BX)(me.Z,{caret:!1,disabled:m,customTitle:(0,A.tZ)(Ze,{label:(0,u.t)("Actions"),disabled:m,title:c?d?void 0:(0,u.t)("You do not have permission to edit and delete custom repositories configurations."):void 0,icon:(0,A.tZ)(he.Y,{})}),anchorRight:!0,children:[(0,A.tZ)(pe.Z,{title:(0,u.t)("Configure"),onClick:r,children:(0,u.t)("Configure")}),p((0,A.tZ)(pe.Z,{title:(0,u.t)("Delete"),children:(0,u.t)("Delete")}))]})})]})}ge.displayName="Actions";const ye=ge,Ze=(0,i.Z)(de.Z,{target:"e1md5css5"})({name:"s0vnfv",styles:"height:32px"}),be=(0,i.Z)(se.Z,{target:"e1md5css4"})("border-bottom-right-radius:",(e=>e.theme.borderRadius),";border-bottom-left-radius:",(e=>e.theme.borderRadius),";"),fe=(0,i.Z)(S.ZP,{target:"e1md5css3"})("@media (min-width: ",(e=>e.theme.breakpoints[0]),"){grid-row:1/3;}@media (max-width: ",(e=>e.theme.breakpoints[0]),"){grid-auto-flow:row;gap:",(0,m.Z)(1),";margin-top:",(0,m.Z)(.5),";}"),xe=(0,i.Z)(T.Z,{target:"e1md5css2"})("@media (min-width: ",(e=>e.theme.breakpoints[0]),"){display:none;}"),ve=(0,i.Z)(v.ZP,{target:"e1md5css1"})("width:100%;@media (min-width: ",(e=>e.theme.breakpoints[0]),"){display:none;}"),Se=(0,i.Z)("div",{target:"e1md5css0"})("@media (max-width: ",(e=>e.theme.breakpoints[0]),"){display:none;}");var we=s("./app/components/dateTime.tsx"),je=s("./app/components/notAvailable.tsx");function Ce({details:e}){const{latestBuildVersion:t,latestBuildNumber:s,lastCheckedBuilds:o}=null!=e?e:{};return(0,A.BX)(Te,{children:[(0,u.t)("Last detected version"),(0,A.tZ)(_e,{children:t?(0,u._N)("v[version]",{version:t}):(0,A.tZ)(je.Z,{tooltip:(0,u.t)("Not available")})}),(0,u.t)("Last detected build"),(0,A.tZ)(_e,{children:null!=s?s:(0,A.tZ)(je.Z,{tooltip:(0,u.t)("Not available")})}),(0,u.t)("Detected last build on"),(0,A.tZ)(_e,{children:o?(0,A.tZ)(we.Z,{date:o}):(0,A.tZ)(je.Z,{tooltip:(0,u.t)("Not available")})})]})}Ce.displayName="Details";const Ee=Ce,Te=(0,i.Z)("div",{target:"e50haka1"})("display:grid;gap:",(0,m.Z)(1),";margin-top:",(0,m.Z)(.5),";align-items:center;font-size:",(e=>e.theme.fontSizeSmall),";font-weight:700;@media (min-width: ",(e=>e.theme.breakpoints[0]),"){margin-top:",(0,m.Z)(1),";grid-template-columns:max-content 1fr;gap:",(0,m.Z)(1),";grid-row:3/3;grid-column:1/-1;}"),_e=(0,i.Z)("div",{target:"e50haka0"})("font-weight:400;white-space:pre-wrap;word-break:break-all;padding:",(0,m.Z)(1)," ",(0,m.Z)(1.5),";font-family:",(e=>e.theme.text.familyMono),";background-color:",(e=>e.theme.backgroundSecondary),";@media (max-width: ",(e=>e.theme.breakpoints[0]),"){:not(:last-child){margin-bottom:",(0,m.Z)(1),";}}");var De=s("../node_modules/@emotion/react/dist/emotion-element-a8309070.browser.esm.js"),Ne=s("./app/components/placeholder.tsx"),Ae=s("./app/icons/iconDownload.tsx"),ke=s("./app/icons/iconRefresh.tsx"),Be=s("./app/icons/iconWarning.tsx");const ze=function({details:e,onEditRepository:t}){const s=(0,De.u)();if(!e)return(0,A.tZ)(Ne.Z,{height:"14px"});const{pendingDownloads:o,credentials:i,lastCheckedBuilds:n}=e;return"invalid"===i.status?(0,A.BX)(Re,{color:s.red300,onClick:t,children:[(0,A.tZ)(Pe,{title:(0,u.t)("Re-check your App Store Credentials"),containerDisplayMode:"inline-flex",children:(0,A.tZ)(Be.F,{size:"sm"})}),(0,u.t)("Credentials are invalid")]}):o?(0,A.BX)(Re,{color:s.gray400,children:[(0,A.tZ)(Fe,{children:(0,A.tZ)(Ae.D,{size:"sm"})}),(0,u.tn)("%s build pending","%s builds pending",o)]}):n?(0,A.BX)(Re,{color:s.gray400,children:[(0,A.tZ)(Fe,{children:(0,A.tZ)(ke.t,{size:"sm"})}),(0,A.tZ)(E.Z,{date:n})]}):null},Re=(0,i.Z)("div",{target:"e1i2rm1x2"})("display:grid;grid-template-columns:repeat(2, max-content);align-items:center;gap:",(0,m.Z)(.75),";color:",(e=>e.color),";font-size:",(e=>e.theme.fontSizeMedium),";height:14px;",(e=>e.onClick&&"cursor: pointer"),";"),Pe=(0,i.Z)(T.Z,{target:"e1i2rm1x1"})({name:"m44gc5",styles:"margin-top:-5px;height:14px"}),Fe=(0,i.Z)("div",{target:"e1i2rm1x0"})({name:"m44gc5",styles:"margin-top:-5px;height:14px"});var Oe=s("../node_modules/lodash/forEach.js"),Me=s.n(Oe),Ie=s("../node_modules/lodash/set.js"),Xe=s.n(Ie);const qe={[le.Et.APP_STORE_CONNECT]:"App Store Connect",[le.Et.HTTP]:"SymbolServer (HTTP)",[le.Et.S3]:"Amazon S3",[le.Et.GCS]:"Google Cloud Storage"},Le=[{value:le.Et.S3,label:qe[le.Et.S3],searchKey:(0,u.t)("aws amazon s3 bucket")},{value:le.Et.GCS,label:qe[le.Et.GCS],searchKey:(0,u.t)("gcs google cloud storage bucket")},{value:le.Et.HTTP,label:qe[le.Et.HTTP],searchKey:(0,u.t)("http symbol server ssqp symstore symsrv")}];function Ue(e){const t={};return Me()(e,((e,s)=>{Xe()(t,s.split("."),e)})),t}function Ye({repository:e,onDelete:t,onEdit:s,hasFeature:o,hasAccess:i}){const[r,a]=(0,n.useState)(!1),{id:l,name:c,type:d}=e;return(0,A.BX)(Ge,{children:[(0,A.tZ)(We,{children:c}),(0,A.BX)(Qe,{children:[qe[d],e.type===le.Et.APP_STORE_CONNECT&&(0,A.tZ)(ze,{details:e.details,onEditRepository:()=>s(l)})]}),(0,A.tZ)(ye,{repositoryName:c,repositoryType:d,hasFeature:o,hasAccess:i,onDelete:()=>t(l),onEdit:()=>s(l),showDetails:e.type===le.Et.APP_STORE_CONNECT,isDetailsDisabled:e.type===le.Et.APP_STORE_CONNECT&&void 0===e.details,isDetailsExpanded:r,onToggleDetails:()=>a(!r)}),e.type===le.Et.APP_STORE_CONNECT&&r&&(0,A.tZ)(Ee,{details:e.details})]})}Ye.displayName="Repository";const Ve=Ye,Ge=(0,i.Z)(d.Lv,{target:"egeeyr42"})("display:grid;grid-template-columns:1fr;row-gap:",(0,m.Z)(1),";@media (min-width: ",(e=>e.theme.breakpoints[0]),"){grid-template-columns:1fr max-content;grid-template-rows:repeat(2, max-content);}"),We=(0,i.Z)("div",{target:"egeeyr41"})("@media (min-width: ",(e=>e.theme.breakpoints[0]),"){grid-row:1/2;}"),Qe=(0,i.Z)("div",{target:"egeeyr40"})("color:",(e=>e.theme.gray400),";font-size:",(e=>e.theme.fontSizeMedium),";display:grid;gap:",(0,m.Z)(1.5),";align-items:center;@media (min-width: ",(e=>e.theme.breakpoints[0]),"){grid-template-columns:max-content minmax(200px, max-content);grid-row:2/3;gap:",(0,m.Z)(1),";}"),He=(0,u.t)("Custom Repositories"),Ke=(0,ie.Z)({hookName:"component:disabled-app-store-connect-item",defaultComponent:({children:e})=>(0,A.tZ)(n.Fragment,{children:e})}),Je=(0,ie.Z)({hookName:"component:disabled-custom-symbol-sources",defaultComponent:({children:e})=>(0,A.tZ)(n.Fragment,{children:e})});function $e({api:e,organization:t,customRepositories:s,projSlug:o,router:i,location:l,isLoading:c}){var p;const m=(0,n.useContext)(ae.Z);(0,n.useEffect)((()=>{!function(){const{customRepository:e}=l.query;if(!e)return;const t=s.findIndex((t=>t.id===e)),o=s[t];o&&(0,J.openDebugFileSourceModal)({sourceConfig:o,sourceType:o.type,appStoreConnectStatusData:null==m?void 0:m[o.id],onSave:e=>Z({updatedItem:e,index:t}),onClose:b})}()}),[l.query,m]);const h=t.slug,g=!(null===(p=t.features)||void 0===p||!p.includes("app-store-connect-multiple")),y=!!s.find((e=>e.type===le.Et.APP_STORE_CONNECT));function Z({updatedItems:t,updatedItem:i,index:n,refresh:l}){let c=null!=t?t:[];i&&(0,ce.ri)(n)&&(c=[...s],c.splice(n,1,i));const{successMessage:d,errorMessage:p}=(m=c.length)>(g=s.length)?{successMessage:(0,u.t)("Successfully added custom repository"),errorMessage:(0,u.t)("An error occurred while adding a new custom repository")}:m<g?{successMessage:(0,u.t)("Successfully removed custom repository"),errorMessage:(0,u.t)("An error occurred while removing the custom repository")}:{successMessage:(0,u.t)("Successfully updated custom repository"),errorMessage:(0,u.t)("An error occurred while updating the custom repository")};var m,g;const y=JSON.stringify(c.map(Ue)),Z=e.requestPromise("/projects/".concat(h,"/").concat(o,"/"),{method:"PUT",data:{symbolSources:y}});return Z.catch((()=>{(0,r.Iw)(p)})),Z.then((e=>{a.Z.updateSuccess(e),(0,r.S9)(d),l&&window.location.reload()})),Z}function b(){i.push({...l,query:{...l.query,customRepository:void 0}})}function x(e){(0,J.openDebugFileSourceModal)({sourceType:e,onSave:e=>Z({updatedItems:[...s,e]})})}function v(e){const t=[...s],o=t.findIndex((t=>t.id===e));t.splice(o,1),Z({updatedItems:t,refresh:s[o].type===le.Et.APP_STORE_CONNECT})}function S(e){i.push({...l,query:{...l.query,customRepository:e}})}function w({hasAccess:e,hasFeature:t}){return(0,A.tZ)(T.Z,{title:t?e?void 0:(0,u.t)("You do not have permission to add custom repositories."):void 0,children:(0,A.tZ)(te.Z,{alignMenu:"right",disabled:!e||!t||c,onSelect:e=>{x(e.value)},items:Le.map((e=>{const t=e.value===le.Et.APP_STORE_CONNECT&&y&&!g;return{...e,value:e.value,disabled:t,label:(0,A.tZ)(Ke,{disabled:t,onTrialStarted:()=>{x(e.value)},children:(0,A.tZ)(st,{disabled:t,children:e.label})})}})),children:({isOpen:s})=>(0,A.tZ)(se.Z,{isOpen:s,disabled:!e||!t||c,size:"small",children:(0,u.t)("Add Repository")})})})}function j({hasAccess:e,hasFeature:o,features:i}){return c?(0,A.tZ)(V.Z,{}):(0,A.BX)(Je,{disabled:o,organization:t,children:[!o&&(0,A.tZ)(ee.Z,{features:i,alert:re.Z,message:(0,u.t)("This feature is not enabled on your Sentry installation."),featureName:He}),s.length?s.map(((t,s)=>(0,A.tZ)(Ve,{repository:t.type===le.Et.APP_STORE_CONNECT?{...t,details:null==m?void 0:m[t.id]}:t,hasFeature:o,hasAccess:e,onDelete:v,onEdit:S},s))):(0,A.tZ)(oe.Z,{children:(0,A.tZ)("p",{children:(0,u.t)("No custom repositories configured")})})]})}return m||Le.find((e=>e.value===le.Et.APP_STORE_CONNECT))||Le.push({value:le.Et.APP_STORE_CONNECT,label:qe[le.Et.APP_STORE_CONNECT],searchKey:(0,u.t)("apple store connect itunes ios")}),(0,A.tZ)($.Z,{features:["custom-symbol-sources"],organization:t,children:({hasFeature:e,features:t})=>(0,A.tZ)(f.Z,{access:["project:write"],children:({hasAccess:s})=>(0,A.BX)(tt,{hasFeature:e,children:[(0,A.BX)(d.V9,{hasButtons:!0,children:[He,w({hasAccess:s,hasFeature:e})]}),(0,A.tZ)(d.N,{children:j({hasAccess:s,hasFeature:e,features:t})})]})})})}$e.displayName="CustomRepositories";const et=$e,tt=(0,i.Z)(d.s_,{target:"el5qoxx1"})((e=>!e.hasFeature&&"overflow: hidden;"),";"),st=(0,i.Z)(ne.Z,{target:"el5qoxx0"})("color:",(e=>e.theme.textColor),";font-size:",(e=>e.theme.fontSizeMedium),";font-weight:400;text-transform:none;span{padding:0;}");function ot({api:e,organization:t,customRepositories:s,builtinSymbolSources:o,builtinSymbolSourceOptions:i,projSlug:r,location:a,router:l,isLoading:c}){return(0,A.BX)(n.Fragment,{children:[(0,A.tZ)(H,{api:e,organization:t,builtinSymbolSources:o,builtinSymbolSourceOptions:i,projSlug:r,isLoading:c}),(0,A.tZ)(et,{api:e,location:a,router:l,organization:t,customRepositories:s,projSlug:r,isLoading:c})]})}ot.displayName="Sources";const it=ot;class nt extends g.Z{constructor(...e){super(...e),(0,o.Z)(this,"handleDelete",(e=>{const{orgId:t,projectId:s}=this.props.params;this.setState({loading:!0}),this.api.request("/projects/".concat(t,"/").concat(s,"/files/dsyms/?id=").concat(e),{method:"DELETE",complete:()=>this.fetchData()})})),(0,o.Z)(this,"handleSearch",(e=>{const{location:t,router:s}=this.props;s.push({...t,query:{...t.query,cursor:void 0,query:e}})}))}getTitle(){const{projectId:e}=this.props.params;return(0,h.Z)((0,u.t)("Debug Files"),e,!1)}getDefaultState(){return{...super.getDefaultState(),project:this.props.project,showDetails:!1}}getEndpoints(){const{organization:e,params:t,location:s}=this.props,{builtinSymbolSources:o}=this.state||{},{orgId:i,projectId:n}=t,{query:r}=s.query,a=[["debugFiles","/projects/".concat(i,"/").concat(n,"/files/dsyms/"),{query:{query:r,file_formats:["breakpad","macho","elf","pe","pdb","sourcebundle","wasm","bcsymbolmap","uuidmap"]}}]];return!o&&e.features.includes("symbol-sources")&&a.push(["builtinSymbolSources","/builtin-symbol-sources/",{}]),a}async fetchProject(){const{params:e}=this.props,{orgId:t,projectId:s}=e;try{const e=await this.api.requestPromise("/projects/".concat(t,"/").concat(s,"/"));a.Z.updateSuccess(e)}catch{(0,r.Iw)((0,u.t)("An error occurred while fetching project data"))}}getQuery(){const{query:e}=this.props.location.query;return"string"==typeof e?e:void 0}getEmptyMessage(){return this.getQuery()?(0,u.t)("There are no debug symbols that match your search."):(0,u.t)("There are no debug symbols for this project.")}renderLoading(){return this.renderBody()}renderDebugFiles(){const{debugFiles:e,showDetails:t}=this.state,{organization:s,params:o}=this.props,{orgId:i,projectId:n}=o;return null!=e&&e.length?e.map((e=>{const o="".concat(this.api.baseUrl,"/projects/").concat(i,"/").concat(n,"/files/dsyms/?id=").concat(e.id);return(0,A.tZ)(Y,{debugFile:e,showDetails:t,downloadUrl:o,downloadRole:s.debugFilesRole,onDelete:this.handleDelete},e.id)})):null}renderBody(){var e;const{organization:t,project:s,router:o,location:i}=this.props,{loading:r,showDetails:a,builtinSymbolSources:d,debugFiles:m,debugFilesPageLinks:h}=this.state;return(0,A.BX)(n.Fragment,{children:[(0,A.tZ)(y.Z,{title:(0,u.t)("Debug Information Files")}),(0,A.tZ)(Z.Z,{children:(0,u.t)("\n            Debug information files are used to convert addresses and minified\n            function names from native crash reports into function names and\n            locations.\n          ")}),t.features.includes("symbol-sources")&&(0,A.BX)(n.Fragment,{children:[(0,A.tZ)(b.Z,{}),(0,A.tZ)(it,{api:this.api,location:i,router:o,projSlug:s.slug,organization:t,customRepositories:s.symbolSources?JSON.parse(s.symbolSources):[],builtinSymbolSources:null!==(e=s.builtinSymbolSources)&&void 0!==e?e:[],builtinSymbolSourceOptions:null!=d?d:[],isLoading:r})]}),(0,A.BX)(lt,{children:[(0,A.tZ)(Z.Z,{noMargin:!0,children:(0,u.t)("Uploaded debug information files")}),(0,A.BX)(ct,{children:[(0,A.BX)(dt,{children:[(0,A.tZ)(l.Z,{checked:a,onChange:e=>{this.setState({showDetails:e.target.checked})}}),(0,u.t)("show details")]}),(0,A.tZ)(p.Z,{placeholder:(0,u.t)("Search DIFs"),onSearch:this.handleSearch,query:this.getQuery()})]})]}),(0,A.tZ)(rt,{headers:[(0,u.t)("Debug ID"),(0,u.t)("Information"),(0,A.tZ)(at,{children:(0,u.t)("Actions")},"actions")],emptyMessage:this.getEmptyMessage(),isEmpty:0===(null==m?void 0:m.length),isLoading:r,children:this.renderDebugFiles()}),(0,A.tZ)(c.Z,{pageLinks:h})]})}}const rt=(0,i.Z)(d.KB,{target:"e1l178ju4"})({name:"l40ow2",styles:"grid-template-columns:37% 1fr auto"}),at=(0,i.Z)("div",{target:"e1l178ju3"})({name:"2qga7i",styles:"text-align:right"}),lt=(0,i.Z)("div",{target:"e1l178ju2"})("display:grid;grid-template-columns:auto 1fr;gap:",(0,m.Z)(4),";align-items:center;margin-top:",(0,m.Z)(4),";margin-bottom:",(0,m.Z)(1),";@media (max-width: ",(e=>e.theme.breakpoints[0]),"){display:block;}"),ct=(0,i.Z)("div",{target:"e1l178ju1"})("display:grid;grid-template-columns:min-content minmax(200px, 400px);align-items:center;justify-content:flex-end;gap:",(0,m.Z)(2),";@media (max-width: ",(e=>e.theme.breakpoints[0]),"){grid-template-columns:min-content 1fr;}"),dt=(0,i.Z)("label",{target:"e1l178ju0"})("font-weight:normal;display:flex;margin-bottom:0;white-space:nowrap;input{margin-top:0;margin-right:",(0,m.Z)(1),";}"),pt=nt},"./app/views/settings/projectDebugFiles/utils.tsx":(e,t,s)=>{"use strict";s.d(t,{J:()=>n,V:()=>r});var o=s("./app/locale.tsx"),i=s("./app/types/debugFiles.tsx");function n(e){var t;switch(null===(t=e.data)||void 0===t?void 0:t.type){case i.BQ.EXE:return(0,o.t)("executable");case i.BQ.DBG:return(0,o.t)("debug companion");case i.BQ.LIB:return(0,o.t)("dynamic library");default:return null}}function r(e){switch(e){case i.Wi.SYMTAB:return(0,o.t)("Symbol tables are used as a fallback when full debug information is not available");case i.Wi.DEBUG:return(0,o.t)("Debug information provides function names and resolves inlined frames during symbolication");case i.Wi.UNWIND:return(0,o.t)("Stack unwinding information improves the quality of stack traces extracted from minidumps");case i.Wi.SOURCES:return(0,o.t)("Source code information allows Sentry to display source code context for stack frames");default:return null}}},"../node_modules/lodash/_castFunction.js":(e,t,s)=>{var o=s("../node_modules/lodash/identity.js");e.exports=function(e){return"function"==typeof e?e:o}},"../node_modules/lodash/forEach.js":(e,t,s)=>{var o=s("../node_modules/lodash/_arrayEach.js"),i=s("../node_modules/lodash/_baseEach.js"),n=s("../node_modules/lodash/_castFunction.js"),r=s("../node_modules/lodash/isArray.js");e.exports=function(e,t){return(r(e)?o:i)(e,n(t))}}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_projectDebugFiles_index_tsx.7b296305b9046fdf76e45940cc56a6ad.js.map