"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_performance_trends_index_tsx"],{"./app/components/events/searchBar.tsx":(e,t,r)=>{r.d(t,{Z:()=>F});var a,s=r("../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.string.replace.js"),r("../node_modules/core-js/modules/es.object.from-entries.js"),r("../node_modules/react/index.js")),o=r("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),l=r("../node_modules/lodash/assign.js"),p=r.n(l),u=r("../node_modules/lodash/flatten.js"),d=r.n(u),c=r("../node_modules/lodash/isEqual.js"),m=r.n(c),f=r("../node_modules/lodash/memoize.js"),h=r.n(f),_=r("../node_modules/lodash/omit.js"),g=r.n(_),y=r("./app/actionCreators/tags.tsx"),v=r("./app/components/smartSearchBar/index.tsx"),b=r("./app/constants/index.tsx"),T=r("./app/types/index.tsx"),x=r("./app/utils.tsx"),w=r("./app/utils/discover/fields.tsx"),P=r("./app/utils/measurements/measurements.tsx"),D=r("./app/utils/withApi.tsx"),A=r("./app/utils/withTags.tsx"),S=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const j=new RegExp("^".concat(b.c$,"|\\").concat(b.ir),"g");class E extends i.PureComponent{constructor(...e){super(...e),(0,n.Z)(this,"getEventFieldValues",h()(((e,t,r)=>{const{api:a,organization:s,projectIds:n}=this.props,i=null==n?void 0:n.map(String);return(0,w.h1)(e.key)||(0,w.Xr)(e.key)?Promise.resolve([]):(0,y.Fo)(a,s.slug,e.key,t,i,r,!0).then((e=>d()(e.filter((({name:e})=>(0,x.ri)(e))).map((({name:e})=>e)))),(()=>{throw new Error("Unable to fetch event field values")}))}),(({key:e},t)=>"".concat(e,"-").concat(t)))),(0,n.Z)(this,"prepareQuery",(e=>e.replace(j,"")))}componentDidMount(){var e,t;null===(e=(t=this.getEventFieldValues.cache).clear)||void 0===e||e.call(t)}componentDidUpdate(e){var t,r;m()(this.props.projectIds,e.projectIds)||null===(t=(r=this.getEventFieldValues.cache).clear)||void 0===t||t.call(r)}getTagList(e){const{fields:t,organization:r,tags:a,omitTags:s}=this.props,n=t?Object.fromEntries(t.filter((e=>!Object.keys(w.wZ).includes(e.field)&&!(0,w.GO)(e.field))).map((e=>[e.field,{key:e.field,name:e.field}]))):{},i=r.features.includes("performance-view")?Object.assign({},e,w.wZ,n):g()(w.wZ,w.J8),o=r.features.includes("semver")?Object.assign({},w.jg,i):i,l=p()({},a,o);return l.has={key:"has",name:"Has property",values:Object.keys(l),predefined:!0},g()(l,null!=s?s:[])}render(){const{organization:e}=this.props;return(0,S.tZ)(P.Z,{organization:e,children:({measurements:e})=>{const t=this.getTagList(e);return(0,S.tZ)(o.ms,{children:({css:e})=>(0,S.tZ)(v.Z,{hasRecentSearches:!0,savedSearchType:T.L4.EVENT,onGetTagValues:this.getEventFieldValues,supportedTags:t,prepareQuery:this.prepareQuery,excludeEnvironment:!0,dropdownClassName:e(a||(a=(0,s.Z)(["\n                    max-height: 300px;\n                    overflow-y: auto;\n                  "]))),...this.props})})}})}}E.displayName="SearchBar";const F=(0,D.Z)((0,A.Z)(E))},"./app/utils/measurements/measurements.tsx":(e,t,r)=>{r.d(t,{Z:()=>u}),r("../node_modules/core-js/modules/es.object.from-entries.js"),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var a=r("../node_modules/react/index.js"),s=r("./app/utils/performance/vitals/constants.tsx"),n=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){return Object.fromEntries(Object.entries(e).map((([e,t])=>[e,{name:t.name,key:e}])))}const o=i(s.T),l=i(s.r);function p({organization:e,children:t}){const r=e.features.includes("performance-mobile-vitals")?{...l,...o}:l;return(0,n.tZ)(a.Fragment,{children:t({measurements:r})})}p.displayName="Measurements";const u=p},"./app/utils/withTags.tsx":(e,t,r)=>{r.d(t,{Z:()=>l});var a=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js")),n=r("./app/stores/tagStore.tsx"),i=r("./app/utils/getDisplayName.tsx"),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=function(e){class t extends s.Component{constructor(...e){super(...e),(0,a.Z)(this,"state",{tags:n.Z.getAllTags()}),(0,a.Z)(this,"unsubscribe",n.Z.listen((e=>this.setState({tags:e})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){const{tags:t,...r}=this.props;return(0,o.tZ)(e,{tags:null!=t?t:this.state.tags,...r})}}return t.displayName="WithTags",(0,a.Z)(t,"displayName","withTags(".concat((0,i.Z)(e),")")),t}},"./app/views/performance/data.tsx":(e,t,r)=>{r.d(t,{GY:()=>d,hj:()=>c,V$:()=>m,ze:()=>f,L0:()=>h,g1:()=>_,DW:()=>g,Gm:()=>y,$r:()=>b,C:()=>T,AM:()=>x}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var a=r("./app/components/gridEditable/index.tsx"),s=r("./app/constants/pageFilters.tsx"),n=r("./app/locale.tsx"),i=r("./app/utils/discover/eventView.tsx"),o=r("./app/utils/queryString.tsx"),l=r("./app/utils/tokenizeSearch.tsx"),p=r("./app/views/performance/landing/utils.tsx"),u=r("./app/views/performance/vitalDetail/utils.tsx");const d="24h",c=["transaction","project","tpm","p50","p95","failure rate","apdex","users","user misery"];let m;function f(e){return[{tooltip:b(e,m.APDEX_NEW),value:"apdex()",label:(0,n.t)("Apdex")},{tooltip:b(e,m.TPM),value:"tpm()",label:(0,n.t)("Transactions Per Minute")},{tooltip:b(e,m.FAILURE_RATE),value:"failure_rate()",label:(0,n.t)("Failure Rate")},{tooltip:b(e,m.P50),value:"p50()",label:(0,n.t)("p50 Duration")},{tooltip:b(e,m.P95),value:"p95()",label:(0,n.t)("p95 Duration")},{tooltip:b(e,m.P99),value:"p99()",label:(0,n.t)("p99 Duration")}]}function h(e){return[{tooltip:b(e,m.LCP),value:"p75(lcp)",label:(0,n.t)("LCP p75"),field:"p75(measurements.lcp)",isLeftDefault:!0,backupOption:{tooltip:b(e,m.FCP),value:"p75(fcp)",label:(0,n.t)("FCP p75"),field:"p75(measurements.fcp)"}},{tooltip:b(e,m.DURATION_DISTRIBUTION),value:"lcp_distribution",label:(0,n.t)("LCP Distribution"),field:"measurements.lcp",isDistribution:!0,isRightDefault:!0,backupOption:{tooltip:b(e,m.DURATION_DISTRIBUTION),value:"fcp_distribution",label:(0,n.t)("FCP Distribution"),field:"measurements.fcp",isDistribution:!0}},{tooltip:b(e,m.TPM),value:"tpm()",label:(0,n.t)("Transactions Per Minute"),field:"tpm()"}]}function _(e){return[{tooltip:b(e,m.P50),value:"p50()",label:(0,n.t)("Duration p50"),field:"p50(transaction.duration)"},{tooltip:b(e,m.P75),value:"p75()",label:(0,n.t)("Duration p75"),field:"p75(transaction.duration)",isLeftDefault:!0},{tooltip:b(e,m.P95),value:"p95()",label:(0,n.t)("Duration p95"),field:"p95(transaction.duration)"},{tooltip:b(e,m.DURATION_DISTRIBUTION),value:"duration_distribution",label:(0,n.t)("Duration Distribution"),field:"transaction.duration",isDistribution:!0,isRightDefault:!0}]}function g(e){return[{tooltip:b(e,m.P50),value:"p50()",label:(0,n.t)("Duration p50"),field:"p50(transaction.duration)"},{tooltip:b(e,m.P75),value:"p75()",label:(0,n.t)("Duration p75"),field:"p75(transaction.duration)",isLeftDefault:!0},{tooltip:b(e,m.P95),value:"p95()",label:(0,n.t)("Duration p95"),field:"p95(transaction.duration)"},{tooltip:b(e,m.P99),value:"p99()",label:(0,n.t)("Duration p99"),field:"p99(transaction.duration)"},{tooltip:b(e,m.TPM),value:"tpm()",label:(0,n.t)("Transactions Per Minute"),field:"tpm()"},{tooltip:b(e,m.FAILURE_RATE),value:"failure_rate()",label:(0,n.t)("Failure Rate"),field:"failure_rate()"},{tooltip:b(e,m.DURATION_DISTRIBUTION),value:"duration_distribution",label:(0,n.t)("Duration Distribution"),field:"transaction.duration",isDistribution:!0,isRightDefault:!0},{tooltip:b(e,m.APDEX),value:"apdex()",label:(0,n.t)("Apdex"),field:"apdex()"}]}function y(e){return[{tooltip:b(e,m.APP_START_COLD),value:"p50(measurements.app_start_cold)",label:(0,n.t)("Cold Start Duration p50"),field:"p50(measurements.app_start_cold)"},{tooltip:b(e,m.APP_START_COLD),value:"p75(measurements.app_start_cold)",label:(0,n.t)("Cold Start Duration p75"),field:"p75(measurements.app_start_cold)",isLeftDefault:!0},{tooltip:b(e,m.APP_START_COLD),value:"p95(measurements.app_start_cold)",label:(0,n.t)("Cold Start Duration p95"),field:"p95(measurements.app_start_cold)"},{tooltip:b(e,m.APP_START_COLD),value:"p99(measurements.app_start_cold)",label:(0,n.t)("Cold Start Duration p99"),field:"p99(measurements.app_start_cold)"},{tooltip:b(e,m.DURATION_DISTRIBUTION),value:"app_start_cold_distribution",label:(0,n.t)("Cold Start Distribution"),field:"measurements.app_start_cold",isDistribution:!0,isRightDefault:!0},{tooltip:b(e,m.APP_START_WARM),value:"p50(measurements.app_start_warm)",label:(0,n.t)("Warm Start Duration p50"),field:"p50(measurements.app_start_warm)"},{tooltip:b(e,m.APP_START_WARM),value:"p75(measurements.app_start_warm)",label:(0,n.t)("Warm Start Duration p75"),field:"p75(measurements.app_start_warm)"},{tooltip:b(e,m.APP_START_WARM),value:"p95(measurements.app_start_warm)",label:(0,n.t)("Warm Start Duration p95"),field:"p95(measurements.app_start_warm)"},{tooltip:b(e,m.APP_START_WARM),value:"p99(measurements.app_start_warm)",label:(0,n.t)("Warm Start Duration p99"),field:"p99(measurements.app_start_warm)"},{tooltip:b(e,m.DURATION_DISTRIBUTION),value:"app_start_warm_distribution",label:(0,n.t)("Warm Start Distribution"),field:"measurements.app_start_warm",isDistribution:!0},{tooltip:b(e,m.TPM),value:"tpm()",label:(0,n.t)("Transactions Per Minute"),field:"tpm()"},{tooltip:b(e,m.FAILURE_RATE),value:"failure_rate()",label:(0,n.t)("Failure Rate"),field:"failure_rate()"}]}!function(e){e.APDEX="apdex",e.TPM="tpm",e.THROUGHPUT="throughput",e.FAILURE_RATE="failureRate",e.P50="p50",e.P75="p75",e.P95="p95",e.P99="p99",e.LCP="lcp",e.FCP="fcp",e.FID="fid",e.CLS="cls",e.USER_MISERY="userMisery",e.STATUS_BREAKDOWN="statusBreakdown",e.DURATION_DISTRIBUTION="durationDistribution",e.USER_MISERY_NEW="userMiseryNew",e.APDEX_NEW="apdexNew",e.APP_START_COLD="appStartCold",e.APP_START_WARM="appStartWarm",e.SLOW_FRAMES="slowFrames",e.FROZEN_FRAMES="frozenFrames",e.STALL_PERCENTAGE="stallPercentage",e.MOST_ISSUES="mostIssues",e.MOST_ERRORS="mostErrors",e.SLOW_HTTP_SPANS="slowHTTPSpans"}(m||(m={}));const v={apdex:()=>(0,n.t)("Apdex is the ratio of both satisfactory and tolerable response times to all response times. To adjust the tolerable threshold, go to performance settings."),tpm:()=>(0,n.t)("TPM is the number of recorded transaction events per minute."),throughput:()=>(0,n.t)("Throughput is the number of recorded transaction events per minute."),failureRate:()=>(0,n.t)("Failure rate is the percentage of recorded transactions that had a known and unsuccessful status."),p50:()=>(0,n.t)("p50 indicates the duration that 50% of transactions are faster than."),p75:()=>(0,n.t)("p75 indicates the duration that 75% of transactions are faster than."),p95:()=>(0,n.t)("p95 indicates the duration that 95% of transactions are faster than."),p99:()=>(0,n.t)("p99 indicates the duration that 99% of transactions are faster than."),lcp:()=>(0,n.t)("Largest contentful paint (LCP) is a web vital meant to represent user load times"),fcp:()=>(0,n.t)("First contentful paint (FCP) is a web vital meant to represent user load times"),fid:()=>(0,n.t)("First input delay (FID) is a web vital representing load for the first user interaction on a page."),cls:()=>(0,n.t)("Cumulative layout shift (CLS) is a web vital measuring unexpected visual shifting a user experiences."),userMisery:e=>(0,n.t)("User Misery is a score that represents the number of unique users who have experienced load times 4x your organization's apdex threshold of %sms.",e.apdexThreshold),statusBreakdown:()=>(0,n.t)("The breakdown of transaction statuses. This may indicate what type of failure it is."),durationDistribution:()=>(0,n.t)("Distribution buckets counts of transactions at specifics times for your current date range"),userMiseryNew:()=>(0,n.t)("User Misery is a score that represents the number of unique users who have experienced load times 4x the project's configured threshold. Adjust project threshold in project performance settings."),apdexNew:()=>(0,n.t)("Apdex is the ratio of both satisfactory and tolerable response times to all response times. To adjust the tolerable threshold, go to project performance settings."),appStartCold:()=>(0,n.t)("Cold start is a measure of the application start up time from scratch."),appStartWarm:()=>(0,n.t)("Warm start is a measure of the application start up time while still in memory."),slowFrames:()=>(0,n.t)("The count of the number of slow frames in the transaction."),frozenFrames:()=>(0,n.t)("The count of the number of frozen frames in the transaction."),mostErrors:()=>(0,n.t)("Transactions with the most associated errors."),mostIssues:()=>(0,n.t)("The most instances of an issue for a related transaction."),slowHTTPSpans:()=>(0,n.t)("The transactions with the slowest spans of a certain type."),stallPercentage:()=>(0,n.t)("The percentage of the transaction duration in which the application is in a stalled state.")};function b(e,t){return v.hasOwnProperty(t)?v[t](e):""}function T(e,t,r,{isTrends:u=!1,isMetricsData:c=!1}={}){const m=function(e,t){const{query:r}=e,s=r.start&&r.end,p={id:void 0,name:(0,n.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","tpm()","p50()","p95()","failure_rate()","apdex()","count_unique(user)","count_miserable(user)","user_misery()"],version:2},u=Array(p.fields.length).fill(a.z7);u[p.fields.length-1]="110",p.widths=u,r.statsPeriod||s||(p.range=d),p.orderby=(0,o.ro)(r.sort,"-tpm");const c=(0,o.ro)(r.query,""),m=new l.MY(c);m.hasFilter("transaction.duration")||t||m.setFilterValues("transaction.duration",["<15m"]),m.freeText.length>0&&(m.setFilterValues("transaction",["*".concat(m.freeText.join(" "),"*")],!1),m.freeText=[]),p.query=m.formatString();const f=i.ZP.fromNewQueryWithLocation(p,e);return t||f.additionalConditions.addFilterValues("event.type",["transaction"]),f}(e,c);if(u)return m;const f=(0,p.Q_)(e,r,m);switch(null==f?void 0:f.field){case p.BY.FRONTEND_PAGELOAD:return function(e,t){const{query:r}=e,s=r.start&&r.end,p={id:void 0,name:(0,n.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","tpm()","p75(measurements.fcp)","p75(measurements.lcp)","p75(measurements.fid)","p75(measurements.cls)","count_unique(user)","count_miserable(user)","user_misery()"],version:2},u=Array(p.fields.length).fill(a.z7);u[p.fields.length-1]="110",p.widths=u,r.statsPeriod||s||(p.range=d),p.orderby=(0,o.ro)(r.sort,"-tpm");const c=(0,o.ro)(r.query,""),m=new l.MY(c);m.hasFilter("transaction.duration")||t||m.setFilterValues("transaction.duration",["<15m"]),m.freeText.length>0&&(m.setFilterValues("transaction",["*".concat(m.freeText.join(" "),"*")],!1),m.freeText=[]),p.query=m.formatString();const f=i.ZP.fromNewQueryWithLocation(p,e);return t||(f.additionalConditions.addFilterValues("event.type",["transaction"]),f.additionalConditions.addFilterValues("transaction.op",["pageload"])),f}(e,c);case p.BY.FRONTEND_OTHER:return function(e,t,r){const{query:s}=e,p=s.start&&s.end,u={id:void 0,name:(0,n.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","transaction.op","tpm()","p50(transaction.duration)","p75(transaction.duration)","p95(transaction.duration)","count_unique(user)","count_miserable(user)","user_misery()"],version:2},c=Array(u.fields.length).fill(a.z7);c[u.fields.length-1]="110",u.widths=c,s.statsPeriod||p||(u.range=d),u.orderby=(0,o.ro)(s.sort,"-tpm");const m=(0,o.ro)(s.query,""),f=new l.MY(m);f.hasFilter("transaction.duration")||r||f.setFilterValues("transaction.duration",["<15m"]),f.freeText.length>0&&(f.setFilterValues("transaction",["*".concat(f.freeText.join(" "),"*")],!1),f.freeText=[]),u.query=f.formatString();const h=i.ZP.fromNewQueryWithLocation(u,e);return r||(h.additionalConditions.addFilterValues("event.type",["transaction"]),t.features.includes("organizations:performance-landing-widgets")||h.additionalConditions.addFilterValues("!transaction.op",["pageload"])),h}(e,t,c);case p.BY.BACKEND:return function(e,t){const{query:r}=e,s=r.start&&r.end,p={id:void 0,name:(0,n.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","transaction.op","http.method","tpm()","p50()","p95()","failure_rate()","apdex()","count_unique(user)","count_miserable(user)","user_misery()"],version:2},u=Array(p.fields.length).fill(a.z7);u[p.fields.length-1]="110",p.widths=u,r.statsPeriod||s||(p.range=d),p.orderby=(0,o.ro)(r.sort,"-tpm");const c=(0,o.ro)(r.query,""),m=new l.MY(c);m.hasFilter("transaction.duration")||t||m.setFilterValues("transaction.duration",["<15m"]),m.freeText.length>0&&(m.setFilterValues("transaction",["*".concat(m.freeText.join(" "),"*")],!1),m.freeText=[]),p.query=m.formatString();const f=i.ZP.fromNewQueryWithLocation(p,e);return t||f.additionalConditions.addFilterValues("event.type",["transaction"]),f}(e,c);case p.BY.MOBILE:return function(e,t,r,p){const{query:u}=e,c=["team_key_transaction","transaction","project","transaction.op","tpm()","p75(measurements.app_start_cold)","p75(measurements.app_start_warm)","p75(measurements.frames_slow_rate)","p75(measurements.frames_frozen_rate)"],m=r.project;if(m.length>0&&m[0]!==s.mP){const e=t.filter((e=>m.includes(parseInt(e.id,10))));e.length>0&&e.every((e=>"react-native"===e.platform))&&(c.pop(),c.pop(),c.push("p75(measurements.stall_percentage)"))}const f=u.start&&u.end,h={id:void 0,name:(0,n.t)("Performance"),query:"event.type:transaction",projects:[],fields:[...c,"count_unique(user)","count_miserable(user)","user_misery()"],version:2},_=Array(h.fields.length).fill(a.z7);_[h.fields.length-1]="110",h.widths=_,u.statsPeriod||f||(h.range=d),h.orderby=(0,o.ro)(u.sort,"-tpm");const g=(0,o.ro)(u.query,""),y=new l.MY(g);y.hasFilter("transaction.duration")||p||y.setFilterValues("transaction.duration",["<15m"]),y.freeText.length>0&&(y.setFilterValues("transaction",["*".concat(y.freeText.join(" "),"*")],!1),y.freeText=[]),h.query=y.formatString();const v=i.ZP.fromNewQueryWithLocation(h,e);return p||v.additionalConditions.addFilterValues("event.type",["transaction"]),v}(e,r,m,c);default:return m}}function x(e,t){const{query:r}=e,a=(0,u.iF)(e),s=r.start&&r.end,p={id:void 0,name:(0,n.t)("Vitals Performance Details"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","count_unique(user)","count()","p50(".concat(a,")"),"p75(".concat(a,")"),"p95(".concat(a,")"),(0,u.Ve)(a),(0,u.q4)(a)],version:2};r.statsPeriod||s||(p.range=d),p.orderby=(0,o.ro)(r.sort,"-count");const c=(0,o.ro)(r.query,""),m=new l.MY(c);m.freeText.length>0&&(m.setFilterValues("transaction",["*".concat(m.freeText.join(" "),"*")],!1),m.freeText=[]),p.query=m.formatString();const f=i.ZP.fromNewQueryWithLocation(p,e);return t||(f.additionalConditions.addFilterValues("event.type",["transaction"]),f.additionalConditions.addFilterValues("has",[a])),f}},"./app/views/performance/landing/utils.tsx":(e,t,r)=>{r.d(t,{Y1:()=>m,V:()=>f,BY:()=>h,Lx:()=>_,NO:()=>g,kP:()=>y,Cf:()=>v,TT:()=>b,Q_:()=>T,NJ:()=>x,Oo:()=>w,hv:()=>P,Gd:()=>D,ZR:()=>A});var a=r("../node_modules/react-router/es/index.js"),s=r("../node_modules/lodash/omit.js"),n=r.n(s),i=r("./app/locale.tsx"),o=r("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),l=r("./app/utils/formatters.tsx"),p=r("./app/utils/queryString.tsx"),u=r("./app/utils/tokenizeSearch.tsx"),d=r("./app/views/performance/data.tsx"),c=r("./app/views/performance/utils.tsx");const m="left",f="right";let h;!function(e){e.ALL="all",e.FRONTEND_PAGELOAD="frontend_pageload",e.FRONTEND_OTHER="frontend_other",e.BACKEND="backend",e.MOBILE="mobile"}(h||(h={}));const _=[{label:"All Transactions",field:h.ALL},{label:"Frontend (Pageload)",field:h.FRONTEND_PAGELOAD},{label:"Frontend (Other)",field:h.FRONTEND_OTHER},{label:"Backend",field:h.BACKEND},{label:"Mobile",field:h.MOBILE,isShown:e=>e.features.includes("performance-mobile-vitals")}],g=[{label:"All Transactions",field:h.ALL},{label:"Web Vitals",field:h.FRONTEND_PAGELOAD},{label:"Frontend",field:h.FRONTEND_OTHER},{label:"Backend",field:h.BACKEND},{label:"Mobile",field:h.MOBILE,isShown:e=>e.features.includes("performance-mobile-vitals")}];function y(e,t){const{eventView:r,location:s}=t,n=new u.MY(r.query);n.addFilterValues("!transaction",["".concat(e)]),a.browserHistory.push({pathname:s.pathname,query:{...s.query,cursor:void 0,query:n.formatString()}})}function v(e){var t;const r=(0,p.ro)(null==e||null===(t=e.query)||void 0===t?void 0:t.landingDisplay);return _.find((({field:e})=>e===r))}function b(e,t){const r=w(e,t);return _.find((({field:e})=>e===r))||_[0]}function T(e,t,r){return v(e)||b(t,r)}function x(e,t,r,s,i){const l=(0,p.ro)(t.query.query,""),d=new u.MY(l);d.removeFilter("transaction.op");const c={...n()(t.query,["landingDisplay","sort"]),query:d.formatString()};delete c[m],delete c[f];const h=w(r,i),_=T(t,r,i).field,g=h===e?{...c}:{...c,landingDisplay:e};(0,o.Z)("performance_views.landingv3.display_change",{organization:s,change_to_display:e,default_display:h,current_display:_,is_default:h===_}),a.browserHistory.push({pathname:t.pathname,query:g})}function w(e,t){var r;if(!t)return h.ALL;const a=t.project;return null!==(r={[c.iy.ANY]:h.ALL,[c.iy.FRONTEND]:h.FRONTEND_PAGELOAD,[c.iy.BACKEND]:h.BACKEND,[c.iy.MOBILE]:h.MOBILE}[(0,c.Bh)(e,a)])&&void 0!==r?r:h.ALL}const P=e=>({"p75(transaction.duration)":{title:(0,i.t)("Duration (p75)"),tooltip:(0,d.$r)(e,d.V$.P75),formatter:e=>(0,l.g9)(e/1e3,e>=1e3?3:0,!0)},"tpm()":{title:(0,i.t)("Throughput"),tooltip:(0,d.$r)(e,d.V$.THROUGHPUT),formatter:l.Du},"failure_rate()":{title:(0,i.t)("Failure Rate"),tooltip:(0,d.$r)(e,d.V$.FAILURE_RATE),formatter:e=>(0,l.rl)(e,2)},"apdex()":{title:(0,i.t)("Apdex"),tooltip:(0,d.$r)(e,d.V$.APDEX_NEW),formatter:e=>(0,l.$1)(e,4)},"p75(measurements.frames_slow_rate)":{title:(0,i.t)("Slow Frames (p75)"),tooltip:(0,d.$r)(e,d.V$.SLOW_FRAMES),formatter:e=>(0,l.rl)(e,2)},"p75(measurements.frames_frozen_rate)":{title:(0,i.t)("Frozen Frames (p75)"),tooltip:(0,d.$r)(e,d.V$.FROZEN_FRAMES),formatter:e=>(0,l.rl)(e,2)},"p75(measurements.app_start_cold)":{title:(0,i.t)("Cold Start (p75)"),tooltip:(0,d.$r)(e,d.V$.APP_START_COLD),formatter:e=>(0,l.g9)(e/1e3,e>=1e3?3:0,!0)},"p75(measurements.app_start_warm)":{title:(0,i.t)("Warm Start (p75)"),tooltip:(0,d.$r)(e,d.V$.APP_START_WARM),formatter:e=>(0,l.g9)(e/1e3,e>=1e3?3:0,!0)},"p75(measurements.stall_percentage)":{title:(0,i.t)("Stall Percentage (p75)"),tooltip:(0,d.$r)(e,d.V$.STALL_PERCENTAGE),formatter:e=>(0,l.rl)(e,2)}});function D(e,t){const r=e.find((e=>e.isLeftDefault))||e[0],a=e.find((e=>e.isRightDefault))||e[1];return{leftAxis:e.find((e=>e.value===t.query[m]))||r,rightAxis:e.find((e=>e.value===t.query[f]))||a}}function A(e){return Boolean(e.getFields().find((e=>e.includes("measurements.stall_percentage"))))}},"./app/views/performance/trends/index.tsx":(e,t,r)=>{r.r(t),r.d(t,{default:()=>B});var a=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js")),i=r("./app/components/noProjectMessage.tsx"),o=r("./app/components/sentryDocumentTitle.tsx"),l=r("./app/locale.tsx"),p=r("./app/styles/organization.tsx"),u=r("./app/utils/withApi.tsx"),d=r("./app/utils/withOrganization.tsx"),c=r("./app/utils/withPageFilters.tsx"),m=r("./app/utils/withProjects.tsx"),f=r("./app/views/performance/data.tsx"),h=(r("../node_modules/core-js/modules/es.string.trim.js"),r("../node_modules/react-router/es/index.js")),_=r("./app/components/alert.tsx"),g=r("./app/components/breadcrumbs.tsx"),y=r("./app/components/dropdownControl.tsx"),v=r("./app/components/events/searchBar.tsx"),b=r("./app/components/layouts/thirds.tsx"),T=r("./app/components/organizations/pageFilters/container.tsx"),x=r("./app/constants/index.tsx"),w=r("./app/icons/iconFlag.tsx"),P=r("./app/styles/space.tsx"),D=r("./app/utils/analytics.tsx"),A=r("./app/utils/discover/fields.tsx"),S=r("./app/utils/queryString.tsx"),j=r("./app/utils/tokenizeSearch.tsx"),E=r("./app/views/performance/utils.tsx"),F=r("./app/views/performance/trends/changedTransactions.tsx"),R=r("./app/views/performance/trends/types.tsx"),Z=r("./app/views/performance/trends/utils.tsx"),O=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class N extends n.Component{constructor(...e){super(...e),(0,a.Z)(this,"state",{}),(0,a.Z)(this,"handleSearch",(e=>{const{location:t}=this.props,r=(0,Z.Ws)();h.browserHistory.push({pathname:t.pathname,query:{...t.query,...r,query:String(e).trim()||void 0}})})),(0,a.Z)(this,"setError",(e=>{this.setState({error:e})})),(0,a.Z)(this,"handleTrendFunctionChange",(e=>{const{organization:t,location:r}=this.props,a={};Object.values(R.ER).forEach((e=>{const t=(0,Z.j_)(e);a[t]=void 0})),(0,D.ec)({eventKey:"performance_views.trends.change_function",eventName:"Performance Views: Change Function",organization_id:parseInt(t.id,10),function_name:e}),this.setState({previousTrendFunction:(0,Z.CE)(r).field});const s=(0,Z.Ws)();h.browserHistory.push({pathname:r.pathname,query:{...r.query,...a,...s,trendFunction:e}})})),(0,a.Z)(this,"handleParameterChange",(e=>{const{organization:t,location:r}=this.props,a=(0,Z.Ws)();(0,D.ec)({eventKey:"performance_views.trends.change_parameter",eventName:"Performance Views: Change Parameter",organization_id:parseInt(t.id,10),parameter_name:e}),h.browserHistory.push({pathname:r.pathname,query:{...r.query,...a,trendParameter:e}})}))}renderError(){const{error:e}=this.state;return e?(0,O.tZ)(_.Z,{type:"error",icon:(0,O.tZ)(w.G,{size:"md"}),children:e}):null}getPerformanceLink(){const{location:e}=this.props,t={...e.query},r=(0,S.ro)(e.query.query,""),a=new j.MY(r);return a.removeFilter("tpm()"),a.removeFilter("confidence()"),a.removeFilter("transaction.duration"),t.query=a.formatString(),{pathname:(0,E.de)(this.props.organization),query:t}}render(){const{organization:e,eventView:t,location:r}=this.props,{previousTrendFunction:a}=this.state,s=t.clone();(0,Z.iF)(s,r);const n=(0,A.db)(e,[{field:"absolute_correlation()"},{field:"trend_percentage()"},{field:"trend_difference()"},{field:"count_percentage()"},{field:"tpm()"},{field:"tps()"}],["epm()","eps()"]),i=(0,Z.CE)(r),o=(0,Z.IO)(r),p=(0,E.Ov)(r);return(0,O.BX)(T.Z,{defaultSelection:{datetime:{start:null,end:null,utc:!1,period:Z._1}},children:[(0,O.tZ)(b.h4,{children:(0,O.BX)(b.oB,{children:[(0,O.tZ)(g.Z,{crumbs:[{label:"Performance",to:this.getPerformanceLink()},{label:"Trends"}]}),(0,O.tZ)(b.Dx,{children:(0,l.t)("Trends")})]})}),(0,O.tZ)(b.uT,{children:(0,O.tZ)(b.or,{fullWidth:!0,children:(0,O.BX)(C,{location:r,eventView:t,children:[(0,O.BX)(I,{children:[(0,O.tZ)(L,{searchSource:"trends",organization:e,projectIds:s.project,query:p,fields:n,onSearch:this.handleSearch,maxQueryLength:x.dI}),(0,O.tZ)(q,{children:(0,O.tZ)(y.ZP,{buttonProps:{prefix:(0,l.t)("Percentile")},label:i.label,children:Z.T1.map((({label:e,field:t})=>(0,O.tZ)(y.hP,{onSelect:this.handleTrendFunctionChange,eventKey:t,"data-test-id":t,isActive:t===i.field,children:e},t)))})}),(0,O.tZ)(q,{children:(0,O.tZ)(y.ZP,{buttonProps:{prefix:(0,l.t)("Parameter")},label:o.label,children:Z.cs.map((({label:e})=>(0,O.tZ)(y.hP,{onSelect:this.handleParameterChange,eventKey:e,"data-test-id":e,isActive:e===o.label,children:e},e)))})})]}),(0,O.BX)(V,{children:[(0,O.tZ)(F.Z,{trendChangeType:R.ER.IMPROVED,previousTrendFunction:a,trendView:s,location:r,setError:this.setError}),(0,O.tZ)(F.Z,{trendChangeType:R.ER.REGRESSION,previousTrendFunction:a,trendView:s,location:r,setError:this.setError})]})]})})})]})}}N.displayName="TrendsContent";class C extends n.Component{constructor(...e){super(...e),(0,a.Z)(this,"hasPushedDefaults",!1)}render(){const{children:e,location:t,eventView:r}=this.props,a=(0,S.ro)(t.query.query),s=(0,Z.IO)(t),i=new j.MY(a||"");if(a||this.hasPushedDefaults)return this.hasPushedDefaults=!0,(0,O.tZ)(n.Fragment,{children:e});this.hasPushedDefaults=!0,i.setFilterValues("tpm()",[">0.01"]),i.setFilterValues(s.column,[">0","<".concat(Z.bg)]);const o=i.formatString();return r.query=o,h.browserHistory.push({pathname:t.pathname,query:{...t.query,cursor:void 0,query:String(o).trim()||void 0}}),null}}C.displayName="DefaultTrends";const L=(0,s.Z)(v.Z,{target:"e1yf76wj3"})("flex-grow:1;margin-bottom:",(0,P.Z)(2),";"),q=(0,s.Z)("div",{target:"e1yf76wj2"})("margin-left:",(0,P.Z)(1),";flex-grow:0;"),I=(0,s.Z)("div",{target:"e1yf76wj1"})({name:"zjik7",styles:"display:flex"}),V=(0,s.Z)("div",{target:"e1yf76wj0"})("display:grid;gap:",(0,P.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints[1]),"){grid-template-columns:repeat(2, minmax(0, 1fr));align-items:stretch;}"),M=(0,c.Z)(N);class z extends n.Component{constructor(...e){super(...e),(0,a.Z)(this,"state",{eventView:(0,f.C)(this.props.location,this.props.organization,this.props.projects,{isTrends:!0}),error:void 0}),(0,a.Z)(this,"setError",(e=>{this.setState({error:e})}))}static getDerivedStateFromProps(e,t){return{...t,eventView:(0,f.C)(e.location,e.organization,e.projects,{isTrends:!0})}}getDocumentTitle(){return[(0,l.t)("Trends"),(0,l.t)("Performance")].join(" - ")}renderContent(){const{organization:e,location:t}=this.props,{eventView:r}=this.state;return(0,O.tZ)(M,{organization:e,location:t,eventView:r})}render(){const{organization:e}=this.props;return(0,O.tZ)(o.Z,{title:this.getDocumentTitle(),orgSlug:e.slug,children:(0,O.tZ)(k,{children:(0,O.tZ)(i.Z,{organization:e,children:this.renderContent()})})})}}z.displayName="TrendsSummary";const B=(0,d.Z)((0,m.Z)((0,c.Z)((0,u.Z)(z)))),k=(0,s.Z)(p.JH,{target:"e183k9ay0"})({name:"1hcx8jb",styles:"padding:0"})}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_trends_index_tsx.20619fa820f1f5717fadda82b52429e5.js.map