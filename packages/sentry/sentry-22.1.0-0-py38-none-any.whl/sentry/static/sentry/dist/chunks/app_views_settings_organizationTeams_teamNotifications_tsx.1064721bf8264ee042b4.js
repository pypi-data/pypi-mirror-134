"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_organizationTeams_teamNotifications_tsx"],{"./app/views/asyncView.tsx":(e,t,n)=>{n.d(t,{Z:()=>a}),n("../node_modules/react/index.js");var s=n("./app/components/asyncComponent.tsx"),i=n("./app/components/sentryDocumentTitle.tsx"),o=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class a extends s.Z{getTitle(){return""}render(){return(0,o.tZ)(i.Z,{title:this.getTitle(),children:this.renderComponent()})}}a.displayName="AsyncView"},"./app/views/settings/organizationTeams/teamNotifications.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var s=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/core-js/modules/es.object.from-entries.js"),n("../node_modules/react/index.js"),n("./app/actionCreators/indicator.tsx")),a=n("./app/components/button.tsx"),r=n("./app/components/confirm.tsx"),l=n("./app/components/links/externalLink.tsx"),d=n("./app/components/panels/index.tsx"),c=n("./app/components/tooltip.tsx"),m=n("./app/icons/index.tsx"),p=n("./app/locale.tsx"),h=n("./app/styles/space.tsx"),u=n("./app/utils.tsx"),g=n("./app/utils/withOrganization.tsx"),x=n("./app/views/asyncView.tsx"),Z=n("./app/views/settings/components/emptyMessage.tsx"),y=n("./app/views/settings/components/forms/textField.tsx"),f=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const k="https://docs.sentry.io/product/integrations/notification-incidents/slack/#team-notifications",b=["slack"];class v extends x.Z{constructor(...e){super(...e),(0,s.Z)(this,"handleDelete",(async e=>{try{const{organization:t,team:n}=this.props,s="/teams/".concat(t.slug,"/").concat(n.slug,"/external-teams/").concat(e.id,"/");await this.api.requestPromise(s,{method:"DELETE"}),(0,o.S9)((0,p.t)("Deletion successful")),this.fetchData()}catch{(0,o.Iw)((0,p.t)("An error occurred"))}}))}getTitle(){return"Team Notification Settings"}getEndpoints(){const{organization:e,team:t}=this.props;return[["teamDetails","/teams/".concat(e.slug,"/").concat(t.slug,"/"),{query:{expand:["externalTeams"]}}],["integrations","/organizations/".concat(e.slug,"/integrations/"),{query:{includeConfig:0}}]]}renderBody(){return(0,f.BX)(d.s_,{children:[(0,f.tZ)(d.V9,{children:(0,p.t)("Notifications")}),(0,f.tZ)(d.N,{children:this.renderPanelBody()})]})}renderPanelBody(){const{organization:e}=this.props,{teamDetails:t,integrations:n}=this.state,s=n.filter((e=>b.includes(e.provider.key)));if(!s.length)return(0,f.tZ)(Z.Z,{children:(0,p.t)("No Notification Integrations have been installed yet.")});const i=(t.externalTeams||[]).filter((e=>b.includes(e.provider)));if(!i.length)return(0,f.BX)(Z.Z,{children:[(0,f.tZ)("div",{children:(0,p.t)("No teams have been linked yet.")}),(0,f.tZ)(j,{children:(0,p._N)("Head over to Slack and type [code] to get started. [link].",{code:(0,f.tZ)("code",{children:"/sentry link team"}),link:(0,f.tZ)(l.Z,{href:k,children:(0,p.t)("Learn more")})})})]});const o=Object.fromEntries(s.map((e=>[e.id,e]))),d=new Set(e.access).has("team:write");return i.map((e=>(0,f.BX)(_,{children:[(0,f.tZ)(N,{disabled:!0,label:(0,f.BX)("div",{children:[(0,f.BX)(z,{children:[(0,u.LF)(e.provider),":",o[e.integrationId].name]}),(0,f.tZ)(j,{children:(0,p._N)("Unlink this channel in Slack with [code]. [link].",{code:(0,f.tZ)("code",{children:"/sentry unlink team"}),link:(0,f.tZ)(l.Z,{href:k,children:(0,p.t)("Learn more")})})})]}),name:"externalName",value:e.externalName}),(0,f.tZ)(T,{children:(0,f.tZ)(c.Z,{title:(0,p.t)("You must be an organization owner, manager or admin to remove a Slack team link"),disabled:d,children:(0,f.tZ)(r.Z,{disabled:!d,onConfirm:()=>this.handleDelete(e),message:(0,p.t)("Are you sure you want to remove this Slack team link?"),children:(0,f.tZ)(a.ZP,{size:"small",icon:(0,f.tZ)(m.Fz,{size:"md"}),label:(0,p.t)("delete"),disabled:!d})})})})]},e.id)))}}const w=(0,g.Z)(v),z=(0,i.Z)("div",{target:"edknbzx4"})("color:",(e=>e.theme.textColor),";line-height:",(0,h.Z)(2),";"),j=(0,i.Z)("div",{target:"edknbzx3"})("color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeRelativeSmall),";line-height:1.4;margin-top:",(0,h.Z)(1),";"),_=(0,i.Z)("div",{target:"edknbzx2"})({name:"1dmiggy",styles:"display:flex;align-items:center;justify-content:flex-start"}),N=(0,i.Z)(y.Z,{target:"edknbzx1"})({name:"82a6rk",styles:"flex:1"}),T=(0,i.Z)("div",{target:"edknbzx0"})("margin-right:",(0,h.Z)(4),";padding-right:",(0,h.Z)(.5),";")}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_organizationTeams_teamNotifications_tsx.8f23e5b2b2fdaf2ff07edf3666aa8984.js.map