"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_projectPlugins_details_tsx"],{"./app/utils/withPlugins.tsx":(t,e,s)=>{s.d(e,{Z:()=>b});var i=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),r=s("./app/actionCreators/plugins.tsx"),a=s("../node_modules/reflux/src/index.js"),l=s.n(a),o=s("./app/actions/pluginActions.tsx");const p={loading:!0,plugins:[],error:null,pageLinks:null},d={plugins:null,state:{...p},updating:new Map,reset(){return this.plugins=null,this.state={...p},this.updating=new Map,this.state},getInitialState(){return this.getState()},getState(){const{plugins:t,...e}=this.state;return{...e,plugins:this.plugins?Array.from(this.plugins.values()):[]}},init(){this.reset(),this.listenTo(o.Z.fetchAll,this.onFetchAll),this.listenTo(o.Z.fetchAllSuccess,this.onFetchAllSuccess),this.listenTo(o.Z.fetchAllError,this.onFetchAllError),this.listenTo(o.Z.update,this.onUpdate),this.listenTo(o.Z.updateSuccess,this.onUpdateSuccess),this.listenTo(o.Z.updateError,this.onUpdateError)},triggerState(){this.trigger(this.getState())},onFetchAll({resetLoading:t}={}){t&&(this.state.loading=!0,this.state.error=null,this.plugins=null),this.triggerState()},onFetchAllSuccess(t,{pageLinks:e}){this.plugins=new Map(t.map((t=>[t.id,t]))),this.state.pageLinks=e||null,this.state.loading=!1,this.triggerState()},onFetchAllError(t){this.plugins=null,this.state.loading=!1,this.state.error=t,this.triggerState()},onUpdate(t,e){if(!this.plugins)return;const s=this.plugins.get(t);if(!s)return;const i={...s,...e};this.plugins.set(t,i),this.updating.set(t,s),this.triggerState()},onUpdateSuccess(t,e){this.updating.delete(t)},onUpdateError(t,e,s){const i=this.updating.get(t);i&&this.plugins&&(this.plugins.set(t,i),this.updating.delete(t),this.state.error=s,this.triggerState())}},c=l().createStore(d);var u=s("./app/utils.tsx"),h=s("./app/utils/getDisplayName.tsx"),g=s("./app/utils/withOrganization.tsx"),m=s("./app/utils/withProject.tsx"),Z=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const b=function(t){class e extends n.Component{constructor(...t){super(...t),(0,i.Z)(this,"state",{plugins:[],loading:!0}),(0,i.Z)(this,"unsubscribe",c.listen((({plugins:t,loading:e})=>{this.setState({plugins:t,loading:e})}),void 0))}componentDidMount(){this.fetchPlugins()}componentDidUpdate(t,e,s){const{organization:i,project:n}=this.props,r=t.organization||(null==s?void 0:s.organization),a=t.project||(null==s?void 0:s.project);if(!(0,u.ri)(a)||!(0,u.ri)(r))return;const l=r.slug===i.slug,o=a.slug===(null==n?void 0:n.slug);l&&o||this.fetchPlugins()}componentWillUnmount(){this.unsubscribe()}fetchPlugins(){const{organization:t,project:e}=this.props;e&&t&&(0,r.MM)({projectId:e.slug,orgId:t.slug})}render(){return(0,Z.tZ)(t,{...this.props,plugins:this.state})}}return e.displayName="WithPlugins",(0,i.Z)(e,"displayName","withPlugins(".concat((0,h.Z)(t),")")),(0,g.Z)((0,m.Z)(e))}},"./app/views/asyncView.tsx":(t,e,s)=>{s.d(e,{Z:()=>a}),s("../node_modules/react/index.js");var i=s("./app/components/asyncComponent.tsx"),n=s("./app/components/sentryDocumentTitle.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class a extends i.Z{getTitle(){return""}render(){return(0,r.tZ)(n.Z,{title:this.getTitle(),children:this.renderComponent()})}}a.displayName="AsyncView"},"./app/views/settings/projectPlugins/details.tsx":(t,e,s)=>{s.r(e),s.d(e,{ProjectPluginDetails:()=>b,default:()=>x});var i=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.symbol.description.js"),s("./app/actionCreators/indicator.tsx")),a=s("./app/actionCreators/plugins.tsx"),l=s("./app/components/button.tsx"),o=s("./app/components/links/externalLink.tsx"),p=s("./app/components/pluginConfig.tsx"),d=s("./app/locale.tsx"),c=s("./app/styles/space.tsx"),u=s("./app/utils/integrationUtil.tsx"),h=s("./app/utils/withPlugins.tsx"),g=s("./app/views/asyncView.tsx"),m=s("./app/views/settings/components/settingsPageHeader.tsx"),Z=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class b extends g.Z{constructor(...t){super(...t),(0,i.Z)(this,"handleReset",(()=>{const{projectId:t,orgId:e,pluginId:s}=this.props.params;(0,r.E3)((0,d.t)("Saving changesâ€¦")),(0,u.Db)("integrations.uninstall_clicked",{integration:s,integration_type:"plugin",view:"plugin_details",organization:this.props.organization}),this.api.request("/projects/".concat(e,"/").concat(t,"/plugins/").concat(s,"/"),{method:"POST",data:{reset:!0},success:t=>{this.setState({pluginDetails:t}),(0,r.S9)((0,d.t)("Plugin was reset")),(0,u.Db)("integrations.uninstall_completed",{integration:s,integration_type:"plugin",view:"plugin_details",organization:this.props.organization})},error:()=>{(0,r.Iw)((0,d.t)("An error occurred"))}})})),(0,i.Z)(this,"handleEnable",(()=>{(0,a.Cg)(this.props.params),this.analyticsChangeEnableStatus(!0)})),(0,i.Z)(this,"handleDisable",(()=>{(0,a.rR)(this.props.params),this.analyticsChangeEnableStatus(!1)})),(0,i.Z)(this,"analyticsChangeEnableStatus",(t=>{const{pluginId:e}=this.props.params,s=t?"integrations.enabled":"integrations.disabled";(0,u.Db)(s,{integration:e,integration_type:"plugin",view:"plugin_details",organization:this.props.organization})}))}componentDidUpdate(t,e){super.componentDidUpdate(t,e),t.params.pluginId!==this.props.params.pluginId&&this.recordDetailsViewed()}componentDidMount(){this.recordDetailsViewed()}recordDetailsViewed(){const{pluginId:t}=this.props.params;(0,u.Db)("integrations.details_viewed",{integration:t,integration_type:"plugin",view:"plugin_details",organization:this.props.organization})}getTitle(){const{plugin:t}=this.state;return t&&t.name?t.name:"Sentry"}getEndpoints(){const{projectId:t,orgId:e,pluginId:s}=this.props.params;return[["pluginDetails","/projects/".concat(e,"/").concat(t,"/plugins/").concat(s,"/")]]}trimSchema(t){return t.split("//")[1]}getEnabled(){const{pluginDetails:t}=this.state,{plugins:e}=this.props,s=e&&e.plugins&&e.plugins.find((({slug:t})=>t===this.props.params.pluginId));return s?s.enabled:t&&t.enabled}renderActions(){const{pluginDetails:t}=this.state;if(!t)return null;const e=this.getEnabled(),s=(0,Z.tZ)(j,{size:"small",onClick:this.handleEnable,children:(0,d.t)("Enable Plugin")}),i=(0,Z.tZ)(j,{size:"small",priority:"danger",onClick:this.handleDisable,children:(0,d.t)("Disable Plugin")}),n=e?i:s;return(0,Z.BX)("div",{className:"pull-right",children:[t.canDisable&&n,(0,Z.tZ)(l.ZP,{size:"small",onClick:this.handleReset,children:(0,d.t)("Reset Configuration")})]})}renderBody(){var t,e;const{organization:s,project:i}=this.props,{pluginDetails:n}=this.state;return n?(0,Z.BX)("div",{children:[(0,Z.tZ)(m.Z,{title:n.name,action:this.renderActions()}),(0,Z.BX)("div",{className:"row",children:[(0,Z.tZ)("div",{className:"col-md-7",children:(0,Z.tZ)(p.Z,{organization:s,project:i,data:n,enabled:this.getEnabled(),onDisablePlugin:this.handleDisable})}),(0,Z.tZ)("div",{className:"col-md-4 col-md-offset-1",children:(0,Z.BX)("div",{className:"pluginDetails-meta",children:[(0,Z.tZ)("h4",{children:(0,d.t)("Plugin Information")}),(0,Z.BX)("dl",{className:"flat",children:[(0,Z.tZ)("dt",{children:(0,d.t)("Name")}),(0,Z.tZ)("dd",{children:n.name}),(0,Z.tZ)("dt",{children:(0,d.t)("Author")}),(0,Z.tZ)("dd",{children:null===(t=n.author)||void 0===t?void 0:t.name}),(null===(e=n.author)||void 0===e?void 0:e.url)&&(0,Z.BX)("div",{children:[(0,Z.tZ)("dt",{children:(0,d.t)("URL")}),(0,Z.tZ)("dd",{children:(0,Z.tZ)(o.Z,{href:n.author.url,children:this.trimSchema(n.author.url)})})]}),(0,Z.tZ)("dt",{children:(0,d.t)("Version")}),(0,Z.tZ)("dd",{children:n.version})]}),n.description&&(0,Z.BX)("div",{children:[(0,Z.tZ)("h4",{children:(0,d.t)("Description")}),(0,Z.tZ)("p",{className:"description",children:n.description})]}),n.resourceLinks&&(0,Z.BX)("div",{children:[(0,Z.tZ)("h4",{children:(0,d.t)("Resources")}),(0,Z.tZ)("dl",{className:"flat",children:n.resourceLinks.map((({title:t,url:e})=>(0,Z.tZ)("dd",{children:(0,Z.tZ)(o.Z,{href:e,children:t})},e)))})]})]})})]})]}):null}}const x=(0,h.Z)(b),j=(0,n.Z)(l.ZP,{target:"eq4tbyn0"})("margin-right:",(0,c.Z)(.75),";")}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_projectPlugins_details_tsx.a0505abe04665cbf68b32bd244b370f0.js.map