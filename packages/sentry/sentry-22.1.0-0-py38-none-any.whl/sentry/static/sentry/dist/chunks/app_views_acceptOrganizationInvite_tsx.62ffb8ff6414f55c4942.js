"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_acceptOrganizationInvite_tsx"],{"./app/components/narrowLayout.tsx":(e,t,i)=>{i.d(t,{Z:()=>h});var n=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(i("../node_modules/core-js/modules/web.dom-collections.iterator.js"),i("../node_modules/react/index.js")),o=i("./app/actionCreators/account.tsx"),a=i("./app/api.tsx"),c=i("./app/icons/index.tsx"),l=i("./app/locale.tsx"),d=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class u extends r.Component{constructor(...e){super(...e),(0,n.Z)(this,"api",new a.KU),(0,n.Z)(this,"handleLogout",(()=>{(0,o.kS)(this.api).then((()=>window.location.assign("/auth/login")))}))}UNSAFE_componentWillMount(){document.body.classList.add("narrow")}componentWillUnmount(){this.api.clear(),document.body.classList.remove("narrow")}render(){return(0,d.BX)("div",{className:"app",children:[(0,d.tZ)("div",{className:"pattern-bg"}),(0,d.tZ)("div",{className:"container",style:{maxWidth:this.props.maxWidth},children:(0,d.BX)("div",{className:"box box-modal",children:[(0,d.BX)("div",{className:"box-header",children:[(0,d.tZ)("a",{href:"/",children:(0,d.tZ)(c.iW,{size:"lg"})}),this.props.showLogout&&(0,d.tZ)("a",{className:"logout pull-right",onClick:this.handleLogout,children:(0,d.tZ)(p,{children:(0,l.t)("Sign out")})})]}),(0,d.tZ)("div",{className:"box-content with-padding",children:this.props.children})]})})]})}}u.displayName="NarrowLayout";const p=(0,s.Z)("span",{target:"eaq1ri90"})({name:"11g4mt0",styles:"font-size:16px"}),h=u},"./app/views/acceptOrganizationInvite.tsx":(e,t,i)=>{i.r(t),i.d(t,{default:()=>j});var n=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(i("../node_modules/core-js/modules/web.dom-collections.iterator.js"),i("../node_modules/core-js/modules/es.string.replace.js"),i("../node_modules/react/index.js")),o=i("../node_modules/react-router/es/index.js"),a=i("../node_modules/@sentry/utils/esm/object.js"),c=i("./app/actionCreators/account.tsx"),l=i("./app/components/alert.tsx"),d=i("./app/components/button.tsx"),u=i("./app/components/links/externalLink.tsx"),p=i("./app/components/links/link.tsx"),h=i("./app/components/narrowLayout.tsx"),g=i("./app/locale.tsx"),m=i("./app/stores/configStore.tsx"),Z=i("./app/styles/space.tsx"),x=i("./app/views/asyncView.tsx"),w=i("./app/views/settings/components/settingsPageHeader.tsx"),y=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class b extends x.Z{constructor(...e){super(...e),(0,n.Z)(this,"disableErrorReport",!1),(0,n.Z)(this,"handleLogout",(async e=>{e.preventDefault(),await(0,c.kS)(this.api),window.location.replace(this.makeNextUrl("/auth/login/"))})),(0,n.Z)(this,"handleAcceptInvite",(async()=>{const{memberId:e,token:t}=this.props.params;this.setState({accepting:!0});try{await this.api.requestPromise("/accept-invite/".concat(e,"/").concat(t,"/"),{method:"POST"}),o.browserHistory.replace("/".concat(this.state.inviteDetails.orgSlug,"/"))}catch{this.setState({acceptError:!0})}this.setState({accepting:!1})}))}getEndpoints(){const{memberId:e,token:t}=this.props.params;return[["inviteDetails","/accept-invite/".concat(e,"/").concat(t,"/")]]}getTitle(){return(0,g.t)("Accept Organization Invite")}makeNextUrl(e){return"".concat(e,"?").concat((0,a._j)({next:window.location.pathname}))}get existingMemberAlert(){const e=m.Z.get("user");return(0,y.tZ)(l.Z,{type:"warning","data-test-id":"existing-member",children:(0,g._N)("Your account ([email]) is already a member of this organization. [switchLink:Switch accounts]?",{email:e.email,switchLink:(0,y.tZ)(p.Z,{to:"","data-test-id":"existing-member-link",onClick:this.handleLogout})})})}get authenticationActions(){const{inviteDetails:e}=this.state;return(0,y.BX)(r.Fragment,{children:[!e.requireSso&&(0,y.tZ)("p",{"data-test-id":"action-info-general",children:(0,g.t)("To continue, you must either create a new account, or login to an\n              existing Sentry account.")}),e.needsSso&&(0,y.tZ)("p",{"data-test-id":"action-info-sso",children:e.requireSso?(0,g._N)("Note that [orgSlug] has required Single Sign-On (SSO) using\n               [authProvider]. You may create an account by authenticating with\n               the organization's SSO provider.",{orgSlug:(0,y.tZ)("strong",{children:e.orgSlug}),authProvider:e.ssoProvider}):(0,g._N)("Note that [orgSlug] has enabled Single Sign-On (SSO) using\n               [authProvider]. You may create an account by authenticating with\n               the organization's SSO provider.",{orgSlug:(0,y.tZ)("strong",{children:e.orgSlug}),authProvider:e.ssoProvider})}),(0,y.BX)(v,{children:[(0,y.BX)(S,{children:[e.needsSso&&(0,y.tZ)(d.ZP,{label:"sso-login",priority:"primary",href:this.makeNextUrl("/auth/login/".concat(e.orgSlug,"/")),children:(0,g.t)("Join with %s",e.ssoProvider)}),!e.requireSso&&(0,y.tZ)(d.ZP,{label:"create-account",priority:"primary",href:this.makeNextUrl("/auth/register/"),children:(0,g.t)("Create a new account")})]}),!e.requireSso&&(0,y.tZ)(u.Z,{href:this.makeNextUrl("/auth/login/"),openInNewTab:!1,"data-test-id":"link-with-existing",children:(0,g.t)("Login using an existing account")})]})]})}get warning2fa(){const{inviteDetails:e}=this.state;return(0,y.BX)(r.Fragment,{children:[(0,y.tZ)("p",{"data-test-id":"2fa-warning",children:(0,g._N)("To continue, [orgSlug] requires all members to configure two-factor authentication.",{orgSlug:e.orgSlug})}),(0,y.tZ)(v,{children:(0,y.tZ)(d.ZP,{priority:"primary",to:"/settings/account/security/",children:(0,g.t)("Configure Two-Factor Auth")})})]})}get warningEmailVerification(){const{inviteDetails:e}=this.state;return(0,y.BX)(r.Fragment,{children:[(0,y.tZ)("p",{"data-test-id":"email-verification-warning",children:(0,g._N)("To continue, [orgSlug] requires all members to verify their email address.",{orgSlug:e.orgSlug})}),(0,y.tZ)(v,{children:(0,y.tZ)(d.ZP,{priority:"primary",to:"/settings/account/emails/",children:(0,g.t)("Verify Email Address")})})]})}get acceptActions(){const{inviteDetails:e,accepting:t}=this.state;return(0,y.tZ)(v,{children:(0,y.tZ)(d.ZP,{label:"join-organization",priority:"primary",disabled:t,onClick:this.handleAcceptInvite,children:(0,g.t)("Join the %s organization",e.orgSlug)})})}renderError(){return(0,y.tZ)(h.Z,{children:(0,y.tZ)(l.Z,{type:"warning",children:(0,g.t)("This organization invite link is no longer valid.")})})}renderBody(){const{inviteDetails:e,acceptError:t}=this.state;return(0,y.BX)(h.Z,{children:[(0,y.tZ)(w.Z,{title:(0,g.t)("Accept organization invite")}),t&&(0,y.tZ)(l.Z,{type:"error",children:(0,g.t)("Failed to join this organization. Please try again")}),(0,y.tZ)(f,{"data-test-id":"accept-invite",children:(0,g._N)("[orgSlug] is using Sentry to track and debug errors.",{orgSlug:(0,y.tZ)("strong",{children:e.orgSlug})})}),e.needsAuthentication?this.authenticationActions:e.existingMember?this.existingMemberAlert:e.needs2fa?this.warning2fa:e.needsEmailVerification?this.warningEmailVerification:e.needsSso?this.authenticationActions:this.acceptActions]})}}const v=(0,s.Z)("div",{target:"e1adv0ef2"})("display:flex;align-items:center;justify-content:space-between;margin-bottom:",(0,Z.Z)(3),";"),S=(0,s.Z)("span",{target:"e1adv0ef1"})(">a{margin-right:",(0,Z.Z)(1),";}"),f=(0,s.Z)("p",{target:"e1adv0ef0"})({name:"1elbn1z",styles:"font-size:1.2em"}),j=b},"./app/views/asyncView.tsx":(e,t,i)=>{i.d(t,{Z:()=>o}),i("../node_modules/react/index.js");var n=i("./app/components/asyncComponent.tsx"),s=i("./app/components/sentryDocumentTitle.tsx"),r=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class o extends n.Z{getTitle(){return""}render(){return(0,r.tZ)(s.Z,{title:this.getTitle(),children:this.renderComponent()})}}o.displayName="AsyncView"}}]);
//# sourceMappingURL=../sourcemaps/app_views_acceptOrganizationInvite_tsx.3f10ba8793dacc9003d384f3fe603f28.js.map